/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AdvancedCanvasPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// node_modules/monkey-around/mjs/index.js
function around(obj, factories) {
  const removers = Object.keys(factories).map((key) => around1(obj, key, factories[key]));
  return removers.length === 1 ? removers[0] : function() {
    removers.forEach((r) => r());
  };
}
function around1(obj, method, createWrapper) {
  const original = obj[method], hadOwn = obj.hasOwnProperty(method);
  let current = createWrapper(original);
  if (original)
    Object.setPrototypeOf(current, original);
  Object.setPrototypeOf(wrapper, current);
  obj[method] = wrapper;
  return remove;
  function wrapper(...args) {
    if (current === original && obj[method] === wrapper)
      remove();
    return current.apply(this, args);
  }
  function remove() {
    if (obj[method] === wrapper) {
      if (hadOwn)
        obj[method] = original;
      else
        delete obj[method];
    }
    if (current === original)
      return;
    current = original;
    Object.setPrototypeOf(wrapper, original || Function);
  }
}

// src/utils/patch-helper.ts
var PatchHelper = class {
  static tryPatchWorkspacePrototype(plugin, getTarget, functions) {
    return new Promise((resolve) => {
      const tryPatch = () => {
        const target = getTarget();
        if (!target)
          return null;
        const uninstaller = around(target.constructor.prototype, functions);
        plugin.register(uninstaller);
        return target;
      };
      const result = tryPatch();
      if (result) {
        resolve(result);
        return;
      }
      const listener = plugin.app.workspace.on("layout-change", () => {
        const result2 = tryPatch();
        if (result2) {
          plugin.app.workspace.offref(listener);
          resolve(result2);
        }
      });
      plugin.registerEvent(listener);
    });
  }
  static patchObjectPrototype(plugin, target, functions) {
    const uninstaller = around(target.constructor.prototype, functions);
    plugin.register(uninstaller);
  }
  static patchObjectInstance(plugin, target, functions) {
    const uninstaller = around(target, functions);
    plugin.register(uninstaller);
  }
};

// src/core/events.ts
var CANVAS_EVENT_PREFIX = "canvas";
var PLUGIN_EVENT_PREFIX = "advanced-canvas";
var CanvasEvent = {
  // Built-in events
  SelectionContextMenu: `${CANVAS_EVENT_PREFIX}:selection-menu`,
  NodeContextMenu: `${CANVAS_EVENT_PREFIX}:node-menu`,
  EdgeContextMenu: `${CANVAS_EVENT_PREFIX}:edge-menu`,
  NodeConnectionDropContextMenu: `${CANVAS_EVENT_PREFIX}:node-connection-drop-menu`,
  // Custom events
  CanvasChanged: `${PLUGIN_EVENT_PREFIX}:canvas-changed`,
  ViewportChanged: {
    Before: `${PLUGIN_EVENT_PREFIX}:viewport-changed:before`,
    After: `${PLUGIN_EVENT_PREFIX}:viewport-changed:after`
  },
  NodeMoved: `${PLUGIN_EVENT_PREFIX}:node-moved`,
  DoubleClick: `${PLUGIN_EVENT_PREFIX}:double-click`,
  DraggingStateChanged: `${PLUGIN_EVENT_PREFIX}:dragging-state-changed`,
  NodeCreated: `${PLUGIN_EVENT_PREFIX}:node-created`,
  EdgeCreated: `${PLUGIN_EVENT_PREFIX}:edge-created`,
  NodeAdded: `${PLUGIN_EVENT_PREFIX}:node-added`,
  EdgeAdded: `${PLUGIN_EVENT_PREFIX}:edge-added`,
  NodeChanged: `${PLUGIN_EVENT_PREFIX}:node-changed`,
  EdgeChanged: `${PLUGIN_EVENT_PREFIX}:edge-changed`,
  NodeTextContentChanged: `${PLUGIN_EVENT_PREFIX}:node-text-content-changed`,
  NodeRemoved: `${PLUGIN_EVENT_PREFIX}:node-removed`,
  EdgeRemoved: `${PLUGIN_EVENT_PREFIX}:edge-removed`,
  OnCopy: `${PLUGIN_EVENT_PREFIX}:copy`,
  NodeBBoxRequested: `${PLUGIN_EVENT_PREFIX}:node-bbox-requested`,
  EdgeCenterRequested: `${PLUGIN_EVENT_PREFIX}:edge-center-requested`,
  ContainingNodesRequested: `${PLUGIN_EVENT_PREFIX}:containing-nodes-requested`,
  SelectionChanged: `${PLUGIN_EVENT_PREFIX}:selection-changed`,
  ZoomToBbox: {
    Before: `${PLUGIN_EVENT_PREFIX}:zoom-to-bbox:before`,
    After: `${PLUGIN_EVENT_PREFIX}:zoom-to-bbox:after`
  },
  PopupMenuCreated: `${PLUGIN_EVENT_PREFIX}:popup-menu-created`,
  NodeInteraction: `${PLUGIN_EVENT_PREFIX}:node-interaction`,
  Undo: `${PLUGIN_EVENT_PREFIX}:undo`,
  Redo: `${PLUGIN_EVENT_PREFIX}:redo`,
  ReadonlyChanged: `${PLUGIN_EVENT_PREFIX}:readonly-changed`,
  DataRequested: `${PLUGIN_EVENT_PREFIX}:data-requested`,
  LoadData: `${PLUGIN_EVENT_PREFIX}:load-data`,
  CanvasSaved: {
    Before: `${PLUGIN_EVENT_PREFIX}:canvas-saved:before`,
    After: `${PLUGIN_EVENT_PREFIX}:canvas-saved:after`
  }
};

// src/core/canvas-patcher.ts
var import_obsidian = require("obsidian");
var import_view = require("@codemirror/view");

// node_modules/tiny-jsonc/dist/index.js
var stringOrCommentRe = /("(?:\\?[^])*?")|(\/\/.*)|(\/\*[^]*?\*\/)/g;
var stringOrTrailingCommaRe = /("(?:\\?[^])*?")|(,\s*)(?=]|})/g;
var JSONC = {
  parse: (text) => {
    text = String(text);
    try {
      return JSON.parse(text);
    } catch (e) {
      return JSON.parse(text.replace(stringOrCommentRe, "$1").replace(stringOrTrailingCommaRe, "$1"));
    }
  }
};
var dist_default = JSONC;

// src/core/canvas-patcher.ts
var CanvasPatcher = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.applyPatches();
  }
  async applyPatches() {
    const that = this;
    await new Promise((resolve) => this.plugin.app.workspace.onLayoutReady(() => resolve()));
    const getCanvasView = async () => {
      var _a;
      const canvasLeaf = (_a = this.plugin.app.workspace.getLeavesOfType("canvas")) == null ? void 0 : _a.first();
      if (!canvasLeaf)
        return null;
      if ((0, import_obsidian.requireApiVersion)("1.7.2"))
        await canvasLeaf.loadIfDeferred();
      return canvasLeaf.view;
    };
    let canvasView = await getCanvasView();
    canvasView != null ? canvasView : canvasView = await new Promise((resolve) => {
      const event = this.plugin.app.workspace.on("layout-change", async () => {
        const newCanvasView = await getCanvasView();
        if (!newCanvasView)
          return;
        resolve(newCanvasView);
        this.plugin.app.workspace.offref(event);
      });
      this.plugin.registerEvent(event);
    });
    console.log("Patching canvas view:", canvasView);
    PatchHelper.patchObjectPrototype(this.plugin, canvasView, {
      getViewData: (_next) => function(..._args) {
        var _a;
        const canvasData = this.canvas.getData();
        canvasData.metadata = (_a = this.canvas.metadata) != null ? _a : {};
        return JSON.stringify(canvasData, null, 2);
      },
      setViewData: (next) => function(json, ...args) {
        let validJson = json !== "" ? json : "{}";
        let parsedJson;
        try {
          parsedJson = JSON.parse(validJson);
        } catch (e) {
          that.plugin.createFileSnapshot(this.file.path, json);
          parsedJson = dist_default.parse(validJson);
          validJson = JSON.stringify(parsedJson, null, 2);
        }
        const result = next.call(this, validJson, ...args);
        try {
          this.canvas.metadata = parsedJson.metadata;
        } catch (_e) {
          this.canvas.metadata = {};
        }
        that.triggerWorkspaceEvent(CanvasEvent.CanvasChanged, this.canvas);
        return result;
      }
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView.canvas, {
      markViewportChanged: (next) => function(...args) {
        that.triggerWorkspaceEvent(CanvasEvent.ViewportChanged.Before, this);
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.ViewportChanged.After, this);
        return result;
      },
      markMoved: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeMoved, this, node);
        return result;
      },
      onDoubleClick: (next) => function(event) {
        const preventDefault = { value: false };
        that.triggerWorkspaceEvent(CanvasEvent.DoubleClick, this, event, preventDefault);
        if (!preventDefault.value)
          next.call(this, event);
      },
      setDragging: (next) => function(dragging) {
        const result = next.call(this, dragging);
        that.triggerWorkspaceEvent(CanvasEvent.DraggingStateChanged, this, dragging);
        return result;
      },
      getContainingNodes: (next) => function(bbox) {
        const result = next.call(this, bbox);
        that.triggerWorkspaceEvent(CanvasEvent.ContainingNodesRequested, this, bbox, result);
        return result;
      },
      updateSelection: (next) => function(update) {
        const oldSelection = new Set(this.selection);
        const result = next.call(this, update);
        that.triggerWorkspaceEvent(CanvasEvent.SelectionChanged, this, oldSelection, (update2) => next.call(this, update2));
        return result;
      },
      createTextNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createFileNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createFileNodes: (next) => function(...args) {
        const nodes = next.call(this, ...args);
        nodes.forEach((node) => that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node));
        return nodes;
      },
      createGroupNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createLinkNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      addNode: (next) => function(node) {
        that.patchNode(node);
        return next.call(this, node);
      },
      addEdge: (next) => function(edge) {
        that.patchEdge(edge);
        if (!this.viewportChanged)
          that.triggerWorkspaceEvent(CanvasEvent.EdgeCreated, this, edge);
        return next.call(this, edge);
      },
      removeNode: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeRemoved, this, node);
        return result;
      },
      removeEdge: (next) => function(edge) {
        const result = next.call(this, edge);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeRemoved, this, edge);
        return result;
      },
      handleCopy: (next) => function(...args) {
        this.isCopying = true;
        const result = next.call(this, ...args);
        this.isCopying = false;
        return result;
      },
      getSelectionData: (next) => function(...args) {
        const result = next.call(this, ...args);
        if (this.isCopying)
          that.triggerWorkspaceEvent(CanvasEvent.OnCopy, this, result);
        return result;
      },
      zoomToBbox: (next) => function(bbox) {
        that.triggerWorkspaceEvent(CanvasEvent.ZoomToBbox.Before, this, bbox);
        const result = next.call(this, bbox);
        that.triggerWorkspaceEvent(CanvasEvent.ZoomToBbox.After, this, bbox);
        return result;
      },
      setReadonly: (next) => function(readonly) {
        const result = next.call(this, readonly);
        that.triggerWorkspaceEvent(CanvasEvent.ReadonlyChanged, this, readonly);
        return result;
      },
      undo: (next) => function(...args) {
        const result = next.call(this, ...args);
        this.importData(this.getData(), true);
        that.triggerWorkspaceEvent(CanvasEvent.Undo, this);
        return result;
      },
      redo: (next) => function(...args) {
        const result = next.call(this, ...args);
        this.importData(this.getData(), true);
        that.triggerWorkspaceEvent(CanvasEvent.Redo, this);
        return result;
      },
      /*setData: (next: any) => function (...args: any) {
        //
        const result = next.call(this, ...args)
        //
        return result
      },*/
      getData: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.DataRequested, this, result);
        return result;
      },
      importData: (next) => function(data, clearCanvas, silent) {
        const targetFilePath = this.view.file.path;
        const setData = (data2) => {
          if (!this.view.file || this.view.file.path !== targetFilePath)
            return;
          this.importData(data2, true, true);
          that.emitEventsForUnknownDataChanges(this);
        };
        if (!silent)
          that.triggerWorkspaceEvent(CanvasEvent.LoadData, this, data, setData);
        const result = next.call(this, data, clearCanvas);
        that.emitEventsForUnknownDataChanges(this);
        return result;
      },
      requestSave: (next) => function(...args) {
        that.triggerWorkspaceEvent(CanvasEvent.CanvasSaved.Before, this);
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.CanvasSaved.After, this);
        return result;
      }
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView.canvas.menu, {
      render: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.PopupMenuCreated, this.canvas);
        next.call(this);
        return result;
      }
    });
    PatchHelper.patchObjectPrototype(this.plugin, canvasView.canvas.nodeInteractionLayer, {
      setTarget: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeInteraction, this.canvas, node);
        return result;
      }
    });
    this.plugin.registerEditorExtension([import_view.EditorView.updateListener.of((update) => {
      if (!update.docChanged)
        return;
      const editor = update.state.field(import_obsidian.editorInfoField);
      const node = editor.node;
      if (!node)
        return;
      that.triggerWorkspaceEvent(CanvasEvent.NodeTextContentChanged, node.canvas, node, update);
    })]);
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf.view.getViewType() !== "canvas")
        return;
      const canvasView2 = leaf.view;
      canvasView2.leaf.rebuildView();
    });
  }
  patchNode(node) {
    const that = this;
    PatchHelper.patchObjectInstance(this.plugin, node, {
      setData: (next) => function(data, addHistory) {
        const result = next.call(this, data);
        if (node.initialized && !node.isDirty) {
          node.isDirty = true;
          that.triggerWorkspaceEvent(CanvasEvent.NodeChanged, this.canvas, node);
          delete node.isDirty;
        }
        this.canvas.data = this.canvas.getData();
        this.canvas.view.requestSave();
        if (addHistory)
          this.canvas.pushHistory(this.canvas.getData());
        return result;
      },
      getBBox: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeBBoxRequested, this.canvas, node, result);
        return result;
      }
    });
    this.runAfterInitialized(node, () => {
      this.triggerWorkspaceEvent(CanvasEvent.NodeAdded, node.canvas, node);
      this.triggerWorkspaceEvent(CanvasEvent.NodeChanged, node.canvas, node);
    });
  }
  patchEdge(edge) {
    const that = this;
    PatchHelper.patchObjectInstance(this.plugin, edge, {
      setData: (next) => function(data, addHistory) {
        const result = next.call(this, data);
        if (edge.initialized && !edge.isDirty) {
          edge.isDirty = true;
          that.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, this.canvas, edge);
          delete edge.isDirty;
        }
        this.canvas.data = this.canvas.getData();
        this.canvas.view.requestSave();
        if (addHistory)
          this.canvas.pushHistory(this.canvas.getData());
        return result;
      },
      render: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, this.canvas, edge);
        return result;
      },
      getCenter: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeCenterRequested, this.canvas, edge, result);
        return result;
      }
    });
    this.runAfterInitialized(edge, () => {
      this.triggerWorkspaceEvent(CanvasEvent.EdgeAdded, edge.canvas, edge);
    });
  }
  runAfterInitialized(canvasElement, onReady) {
    if (canvasElement.initialized) {
      onReady();
      return;
    }
    const that = this;
    const uninstall = around(canvasElement, {
      initialize: (next) => function(...args) {
        const result = next.call(this, ...args);
        onReady();
        uninstall();
        return result;
      }
    });
    that.plugin.register(uninstall);
  }
  emitEventsForUnknownDataChanges(canvas) {
    canvas.nodes.forEach((node) => this.runAfterInitialized(node, () => {
      this.triggerWorkspaceEvent(CanvasEvent.NodeChanged, node.canvas, node);
    }));
    canvas.edges.forEach((edge) => this.runAfterInitialized(edge, () => {
      this.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, edge.canvas, edge);
    }));
  }
  triggerWorkspaceEvent(event, ...args) {
    this.plugin.app.workspace.trigger(event, ...args);
  }
};

// src/utils/icons-helper.ts
var import_obsidian2 = require("obsidian");
var CUSTOM_ICONS = {
  "shape-pill": `<rect rx="31.25" height="62.5" width="93.75" y="18.75" x="3.125" stroke-width="8.333" stroke="currentColor" fill="transparent"/>`,
  "shape-parallelogram": `<rect transform="skewX(-20)" rx="5" height="50" width="70" y="25" x="35" stroke-width="8.333" stroke="currentColor" fill="transparent"/>`,
  "shape-predefined-process": `
    <g stroke-width="2" stroke="currentColor" fill="none" transform="matrix(4.166667,0,0,4.166667,0,0)">
      <path d="M 4.999687 3 L 19.000312 3 C 20.104688 3 21 3.895312 21 4.999687 L 21 19.000312 C 21 20.104688 20.104688 21 19.000312 21 L 4.999687 21 C 3.895312 21 3 20.104688 3 19.000312 L 3 4.999687 C 3 3.895312 3.895312 3 4.999687 3 Z M 4.999687 3 "/>
      <path d="M 7 3 L 7 21 "/>
      <path d="M 17 3 L 17 21 "/>
    </g>
  `,
  "shape-document": `<path transform="translate(0, 5)" stroke="currentColor" fill="none" stroke-width="8.333" d="M83.75 25C85.82 25 87.5 26.68 87.5 28.75L87.5 64.375Q68.75 54.25 50 64.375 31.25 74.5 12.5 64.375L12.5 30.625 12.5 28.75C12.5 26.68 14.18 25 16.25 25Z"/>`,
  "shape-database": `
    <g transform="translate(20, 20)" stroke-width="8.333" stroke="currentColor" fill="none">
      <path d="M 1 51 L 1 11 C 1 5.48 14.43 1 31 1 C 47.57 1 61 5.48 61 11 L 61 51 C 61 56.52 47.57 61 31 61 C 14.43 61 1 56.52 1 51 Z"/>
      <path d="M 1 11 C 1 16.52 14.43 21 31 21 C 47.57 21 61 16.52 61 11"/>
    </g>
  `,
  "border-solid": `<path stroke="currentColor" fill="none" stroke-width="8.333" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "border-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.333" stroke-dasharray="13.7" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "border-dotted": `<path stroke="currentColor" fill="none" stroke-width="8.333" stroke-dasharray="8.7" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "path-solid": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-dotted": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="8.8" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-short-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="15" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-long-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="23" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "arrow-triangle": `<path stroke="currentColor" fill="currentColor" d="M 15 10 L 85 50 L 15 90 Z"/>`,
  "arrow-triangle-outline": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 15 10 L 85 50 L 15 90 Z"/>`,
  "arrow-thin-triangle": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 15 10 L 85 50 L 15 90"/>`,
  "arrow-halved-triangle": `<path stroke="currentColor" fill="currentColor" d="M 15 50 L 85 50 L 15 90 Z"/>`,
  "arrow-diamond": `<path stroke="currentColor" fill="currentColor" d="M 50 0 L 100 50 L 50 100 L 0 50 Z"/>`,
  "arrow-diamond-outline": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 50 0 L 100 50 L 50 100 L 0 50 Z"/>`,
  "arrow-circle": `<circle stroke="currentColor" fill="currentColor" cx="50" cy="50" r="45"/>`,
  "arrow-circle-outline": `<circle stroke="currentColor" stroke-width="8.5" fill="none" cx="50" cy="50" r="45"/>`,
  "pathfinding-method-bezier": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "pathfinding-method-square": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M72.9167 79.1667 72.9167 50 27.0833 50 27.0833 20.8333"/>`
};
var IconsHelper = class {
  static addIcons() {
    for (const [id, svg] of Object.entries(CUSTOM_ICONS)) {
      (0, import_obsidian2.addIcon)(id, svg);
    }
  }
};

// src/utils/debug-helper.ts
var DebugHelper = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeAdded,
      (_canvas, _node) => console.count("\u{1F7E2} NodeAdded")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (_canvas, _node) => console.count("\u{1F7E1} NodeChanged")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeAdded,
      (_canvas, _edge) => console.count("\u{1F7E2} EdgeAdded")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (_canvas, _edge) => console.count("\u{1F7E1} EdgeChanged")
    ));
  }
};

// src/settings.ts
var import_obsidian3 = require("obsidian");

// src/canvas-extensions/advanced-styles/style-config.ts
var BUILTIN_NODE_STYLE_ATTRIBUTES = [
  {
    datasetKey: "textAlign",
    label: "Text Alignment",
    nodeTypes: ["text"],
    options: [
      {
        icon: "align-left",
        label: "Left (default)",
        value: null
      },
      {
        icon: "align-center",
        label: "Center",
        value: "center"
      },
      {
        icon: "align-right",
        label: "Right",
        value: "right"
      }
    ]
  },
  {
    datasetKey: "shape",
    label: "Shape",
    nodeTypes: ["text"],
    options: [
      {
        icon: "rectangle-horizontal",
        label: "Round Rectangle (default)",
        value: null
      },
      {
        icon: "shape-pill",
        label: "Pill",
        value: "pill"
      },
      {
        icon: "diamond",
        label: "Diamond",
        value: "diamond"
      },
      {
        icon: "shape-parallelogram",
        label: "Parallelogram",
        value: "parallelogram"
      },
      {
        icon: "circle",
        label: "Circle",
        value: "circle"
      },
      {
        icon: "shape-predefined-process",
        label: "Predefined Process",
        value: "predefined-process"
      },
      {
        icon: "shape-document",
        label: "Document",
        value: "document"
      },
      {
        icon: "shape-database",
        label: "Database",
        value: "database"
      }
    ]
  },
  {
    datasetKey: "border",
    label: "Border",
    options: [
      {
        icon: "border-solid",
        label: "Solid (default)",
        value: null
      },
      {
        icon: "border-dashed",
        label: "Dashed",
        value: "dashed"
      },
      {
        icon: "border-dotted",
        label: "Dotted",
        value: "dotted"
      },
      {
        icon: "eye-off",
        label: "Invisible",
        value: "invisible"
      }
    ]
  }
];
var BUILTIN_EDGE_STYLE_ATTRIBUTES = [
  {
    datasetKey: "path",
    label: "Path Style",
    options: [
      {
        icon: "path-solid",
        label: "Solid (default)",
        value: null
      },
      {
        icon: "path-dotted",
        label: "Dotted",
        value: "dotted"
      },
      {
        icon: "path-short-dashed",
        label: "Short Dashed",
        value: "short-dashed"
      },
      {
        icon: "path-long-dashed",
        label: "Long Dashed",
        value: "long-dashed"
      }
    ]
  },
  {
    datasetKey: "arrow",
    label: "Arrow Style",
    options: [
      {
        icon: "arrow-triangle",
        label: "Triangle (default)",
        value: null
      },
      {
        icon: "arrow-triangle-outline",
        label: "Triangle Outline",
        value: "triangle-outline"
      },
      {
        icon: "arrow-thin-triangle",
        label: "Thin Triangle",
        value: "thin-triangle"
      },
      {
        icon: "arrow-halved-triangle",
        label: "Halved Triangle",
        value: "halved-triangle"
      },
      {
        icon: "arrow-diamond",
        label: "Diamond",
        value: "diamond"
      },
      {
        icon: "arrow-diamond-outline",
        label: "Diamond Outline",
        value: "diamond-outline"
      },
      {
        icon: "arrow-circle",
        label: "Circle",
        value: "circle"
      },
      {
        icon: "arrow-circle-outline",
        label: "Circle Outline",
        value: "circle-outline"
      }
    ]
  },
  {
    datasetKey: "pathfindingMethod",
    label: "Pathfinding Method",
    options: [
      {
        icon: "pathfinding-method-bezier",
        label: "Bezier (default)",
        value: null
      },
      {
        icon: "slash",
        label: "Direct",
        value: "direct"
      },
      {
        icon: "pathfinding-method-square",
        label: "Square",
        value: "square"
      },
      {
        icon: "map",
        label: "A*",
        value: "a-star"
      }
    ]
  }
];

// src/settings.ts
var NODE_TYPES_ON_DOUBLE_CLICK = {
  "text": "Text",
  "file": "File"
};
var EDGE_LINE_DIRECTIONS = {
  "nondirectional": "Nondirectional",
  "unidirectional": "Unidirectional",
  "bidirectional": "Bidirectional"
};
var DEFAULT_SETTINGS = {
  nodeTypeOnDoubleClick: "text",
  alignNewNodesToGrid: true,
  defaultTextNodeWidth: 260,
  defaultTextNodeHeight: 60,
  defaultFileNodeWidth: 400,
  defaultFileNodeHeight: 400,
  minNodeSize: 60,
  disableFontSizeRelativeToZoom: false,
  combineCustomStylesInDropdown: false,
  nodeStylingFeatureEnabled: true,
  customNodeStyleAttributes: [],
  defaultTextNodeStyleAttributes: {},
  edgesStylingFeatureEnabled: true,
  customEdgeStyleAttributes: [],
  defaultEdgeLineDirection: "unidirectional",
  defaultEdgeStyleAttributes: {},
  edgeStyleDirectRotateArrow: false,
  edgeStylePathfinderGridResolution: 10,
  edgeStylePathfinderPathLiveUpdate: true,
  edgeStylePathfinderPathRounded: true,
  commandsFeatureEnabled: true,
  zoomToClonedNode: true,
  cloneNodeMargin: 20,
  expandNodeStepSize: 20,
  betterReadonlyEnabled: true,
  disableNodePopup: false,
  disableZoom: false,
  disablePan: false,
  autoResizeNodeFeatureEnabled: true,
  autoResizeNodeSnapToGrid: true,
  collapsibleGroupsFeatureEnabled: true,
  collapsedGroupPreviewOnDrag: true,
  focusModeFeatureEnabled: true,
  presentationFeatureEnabled: true,
  showSetStartNodeInPopup: false,
  defaultSlideSize: "1200x675",
  wrapInSlidePadding: 20,
  resetViewportOnPresentationEnd: true,
  useArrowKeysToChangeSlides: true,
  usePgUpPgDownKeysToChangeSlides: true,
  zoomToSlideWithoutPadding: true,
  slideTransitionAnimationDuration: 0.5,
  slideTransitionAnimationIntensity: 1.25,
  canvasEncapsulationEnabled: true,
  portalsFeatureEnabled: true,
  maintainClosedPortalSize: true,
  showEdgesIntoDisabledPortals: true
};
var _SettingsManager = class _SettingsManager {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.plugin.loadData());
    this.plugin.app.workspace.trigger(_SettingsManager.SETTINGS_CHANGED_EVENT);
  }
  async saveSettings() {
    await this.plugin.saveData(this.settings);
  }
  getSetting(key) {
    return this.settings[key];
  }
  async setSetting(data) {
    this.settings = Object.assign(this.settings, data);
    await this.saveSettings();
    this.plugin.app.workspace.trigger(_SettingsManager.SETTINGS_CHANGED_EVENT);
  }
  addSettingsTab() {
    this.settingsTab = new AdvancedCanvasPluginSettingTab(this.plugin, this);
    this.plugin.addSettingTab(this.settingsTab);
  }
};
_SettingsManager.SETTINGS_CHANGED_EVENT = "advanced-canvas:settings-changed";
var SettingsManager = _SettingsManager;
var AdvancedCanvasPluginSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(plugin, settingsManager) {
    super(plugin.app, plugin);
    this.settingsManager = settingsManager;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    new import_obsidian3.Setting(containerEl).setHeading().setClass("ac-settings-heading").setName("General");
    new import_obsidian3.Setting(containerEl).setName("Node type on double click").setDesc("The type of node that will be created when double clicking on the canvas.").addDropdown(
      (dropdown) => dropdown.addOptions(NODE_TYPES_ON_DOUBLE_CLICK).setValue(this.settingsManager.getSetting("nodeTypeOnDoubleClick")).onChange(async (value) => await this.settingsManager.setSetting({ nodeTypeOnDoubleClick: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("Always align new nodes to grid").setDesc("When enabled, new nodes will be aligned to the grid.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("alignNewNodesToGrid")).onChange(async (value) => await this.settingsManager.setSetting({ alignNewNodesToGrid: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("Default text node width").setDesc("The default width of a text node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultTextNodeWidth").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultTextNodeWidth: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian3.Setting(containerEl).setName("Default text node height").setDesc("The default height of a text node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultTextNodeHeight").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultTextNodeHeight: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian3.Setting(containerEl).setName("Default file node width").setDesc("The default width of a file node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultFileNodeWidth").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultFileNodeWidth: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian3.Setting(containerEl).setName("Default file node height").setDesc("The default height of a file node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultFileNodeHeight").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultFileNodeHeight: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian3.Setting(containerEl).setName("Minimum node size").setDesc("The minimum size of a node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("minNodeSize").toString()).onChange(async (value) => await this.settingsManager.setSetting({ minNodeSize: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian3.Setting(containerEl).setName("Disable font size relative to zoom").setDesc("When enabled, the font size of e.g. group node titles and edge labels will not increase when zooming out.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("disableFontSizeRelativeToZoom")).onChange(async (value) => await this.settingsManager.setSetting({ disableFontSizeRelativeToZoom: value }))
    );
    this.createFeatureHeading(
      containerEl,
      "Combine custom styles",
      "Combine all style attributes of Advanced Canvas in a single dropdown.",
      "combineCustomStylesInDropdown"
    );
    this.createFeatureHeading(
      containerEl,
      "Node styling",
      "Style your nodes with different shapes and borders.",
      "nodeStylingFeatureEnabled"
    );
    new import_obsidian3.Setting(containerEl).setName("Custom node style settings").setDesc("Add custom style settings for nodes. (Go to GitHub for more information)").addButton(
      (button) => button.setButtonText("Open Tutorial").onClick(() => window.open("https://github.com/Developer-Mike/obsidian-advanced-canvas/blob/main/README.md#custom-styles"))
    );
    const allNodeStyleAttributes = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.settingsManager.getSetting("customNodeStyleAttributes")].filter((setting) => {
      var _a;
      return setting.nodeTypes === void 0 || ((_a = setting.nodeTypes) == null ? void 0 : _a.includes("text"));
    });
    this.createDefaultStylesSection(containerEl, "Default text node style attributes", "defaultTextNodeStyleAttributes", allNodeStyleAttributes);
    this.createFeatureHeading(
      containerEl,
      "Edges styling",
      "Style your edges with different path styles.",
      "edgesStylingFeatureEnabled"
    );
    new import_obsidian3.Setting(containerEl).setName("Custom edge style settings").setDesc("Add custom style settings for edges. (Go to GitHub for more information)").addButton(
      (button) => button.setButtonText("Open Tutorial").onClick(() => window.open("https://github.com/Developer-Mike/obsidian-advanced-canvas/blob/main/README.md#custom-styles"))
    );
    new import_obsidian3.Setting(containerEl).setName("Default edge line direction").setDesc("The default line direction of an edge.").addDropdown(
      (dropdown) => dropdown.addOptions(EDGE_LINE_DIRECTIONS).setValue(this.settingsManager.getSetting("defaultEdgeLineDirection")).onChange(async (value) => await this.settingsManager.setSetting({ defaultEdgeLineDirection: value }))
    );
    this.createDefaultStylesSection(containerEl, "Default edge style attributes", "defaultEdgeStyleAttributes", [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.settingsManager.getSetting("customEdgeStyleAttributes")]);
    new import_obsidian3.Setting(containerEl).setName('Rotate arrow if pathfinding method is "Direct"').setDesc('When enabled, the arrow will be rotated to the direction of the edge if the pathfinding method is set to "Direct".').addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStyleDirectRotateArrow")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStyleDirectRotateArrow: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("A* grid resolution").setDesc("The resolution of the grid when using the A* path style. The lower the value, the more precise the path will be. But it will also take longer to calculate.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("edgeStylePathfinderGridResolution").toString()).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderGridResolution: Math.max(5, parseInt(value)) }))
    );
    new import_obsidian3.Setting(containerEl).setName("Live update A* path").setDesc("When enabled, the A* path style will be updated live while dragging the edge.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStylePathfinderPathLiveUpdate")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderPathLiveUpdate: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("A* rounded path").setDesc("When enabled, the A* path style will be rounded.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStylePathfinderPathRounded")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderPathRounded: value }))
    );
    this.createFeatureHeading(
      containerEl,
      "Extended commands",
      "Add more commands to the canvas.",
      "commandsFeatureEnabled"
    );
    new import_obsidian3.Setting(containerEl).setName("Zoom to cloned node").setDesc("When enabled, the canvas will zoom to the cloned node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("zoomToClonedNode")).onChange(async (value) => await this.settingsManager.setSetting({ zoomToClonedNode: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("Clone node margin").setDesc("The margin between the cloned node and the source node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("cloneNodeMargin").toString()).onChange(async (value) => await this.settingsManager.setSetting({ cloneNodeMargin: parseInt(value) }))
    );
    new import_obsidian3.Setting(containerEl).setName("Expand node step size").setDesc("The step size for expanding the node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("expandNodeStepSize").toString()).onChange(async (value) => await this.settingsManager.setSetting({ expandNodeStepSize: parseInt(value) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Better readonly",
      "Improve the readonly mode.",
      "betterReadonlyEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Auto resize node",
      "Automatically resize the height of a node to fit the content.",
      "autoResizeNodeFeatureEnabled"
    );
    new import_obsidian3.Setting(containerEl).setName("Snap to grid").setDesc("When enabled, the height of the node will snap to the grid.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("autoResizeNodeSnapToGrid")).onChange(async (value) => await this.settingsManager.setSetting({ autoResizeNodeSnapToGrid: value }))
    );
    this.createFeatureHeading(
      containerEl,
      "Collapsible groups",
      "Group nodes can be collapsed and expanded to keep the canvas organized.",
      "collapsibleGroupsFeatureEnabled"
    );
    new import_obsidian3.Setting(containerEl).setName("Collapsed group preview on drag").setDesc("When enabled, a group that is collapsed show its border while dragging a node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("collapsedGroupPreviewOnDrag")).onChange(async (value) => await this.settingsManager.setSetting({ collapsedGroupPreviewOnDrag: value }))
    );
    this.createFeatureHeading(
      containerEl,
      "Focus mode",
      "Focus on a single node and blur all other nodes.",
      "focusModeFeatureEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Presentations",
      "Create a presentation from your canvas.",
      "presentationFeatureEnabled"
    );
    new import_obsidian3.Setting(containerEl).setName('Show "Set Start Node" in node popup').setDesc("If turned off, you can still set the start node using the corresponding command.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("showSetStartNodeInPopup")).onChange(async (value) => await this.settingsManager.setSetting({ showSetStartNodeInPopup: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("Default slide ratio").setDesc("The default ratio of the slide. For example, 16:9 is 1200x675 and 3:2 is 1350x900.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultSlideSize")).onChange(async (value) => await this.settingsManager.setSetting({ defaultSlideSize: value.replace(" ", "") }))
    );
    new import_obsidian3.Setting(containerEl).setName("Wrap in slide padding").setDesc("The padding of the slide when wrapping the canvas in a slide.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("wrapInSlidePadding").toString()).onChange(async (value) => await this.settingsManager.setSetting({ wrapInSlidePadding: parseInt(value) }))
    );
    new import_obsidian3.Setting(containerEl).setName("Reset viewport on presentation end").setDesc("When enabled, the viewport will be reset to the original position after the presentation ends.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("resetViewportOnPresentationEnd")).onChange(async (value) => await this.settingsManager.setSetting({ resetViewportOnPresentationEnd: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("Use arrow keys to change slides").setDesc("When enabled, you can use the arrow keys to change slides in presentation mode.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("useArrowKeysToChangeSlides")).onChange(async (value) => await this.settingsManager.setSetting({ useArrowKeysToChangeSlides: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("Use PgUp/PgDown keys to change slides").setDesc("When enabled, you can use the PgUp/PgDown keys to change slides in presentation mode (Makes the presentation mode compatible with most presentation remotes).").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("usePgUpPgDownKeysToChangeSlides")).onChange(async (value) => await this.settingsManager.setSetting({ usePgUpPgDownKeysToChangeSlides: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("Zoom to slide without padding").setDesc("When enabled, the canvas will zoom to the slide without padding.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("zoomToSlideWithoutPadding")).onChange(async (value) => await this.settingsManager.setSetting({ zoomToSlideWithoutPadding: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("Slide transition animation duration").setDesc("The duration of the slide transition animation in seconds. Set to 0 to disable the animation.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("slideTransitionAnimationDuration").toString()).onChange(async (value) => await this.settingsManager.setSetting({ slideTransitionAnimationDuration: parseFloat(value) }))
    );
    new import_obsidian3.Setting(containerEl).setName("Slide transition animation intensity").setDesc("The intensity of the slide transition animation. The higher the value, the more the canvas will zoom out before zooming in on the next slide.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("slideTransitionAnimationIntensity").toString()).onChange(async (value) => await this.settingsManager.setSetting({ slideTransitionAnimationIntensity: parseFloat(value) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Canvas encapsulation",
      "Encapsulate a selection of nodes and edges into a new canvas.",
      "canvasEncapsulationEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Portals",
      "Create portals to other canvases.",
      "portalsFeatureEnabled"
    );
    new import_obsidian3.Setting(containerEl).setName("Maintain closed portal size").setDesc("When enabled, closing a portal will change the size of the portal to the original, closed size.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("maintainClosedPortalSize")).onChange(async (value) => await this.settingsManager.setSetting({ maintainClosedPortalSize: value }))
    );
    new import_obsidian3.Setting(containerEl).setName("Show edges into disabled portals").setDesc("When enabled, edges into disabled portals will be shown by an edge to the portal node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("showEdgesIntoDisabledPortals")).onChange(async (value) => await this.settingsManager.setSetting({ showEdgesIntoDisabledPortals: value }))
    );
    const kofiButton = document.createElement("a");
    kofiButton.classList.add("kofi-button");
    kofiButton.href = "https://ko-fi.com/X8X27IA08";
    kofiButton.target = "_blank";
    const kofiImage = document.createElement("img");
    kofiImage.src = "data:image/webp;base64,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";
    kofiButton.appendChild(kofiImage);
    containerEl.appendChild(kofiButton);
  }
  createFeatureHeading(containerEl, label, description, settingsKey) {
    return new import_obsidian3.Setting(containerEl).setHeading().setClass("ac-settings-heading").setName(label).setDesc(description).addToggle(
      (toggle) => toggle.setTooltip("Requires a reload to take effect.").setValue(this.settingsManager.getSetting(settingsKey)).onChange(async (value) => {
        await this.settingsManager.setSetting({ [settingsKey]: value });
        new import_obsidian3.Notice("Reload obsidian to apply the changes.");
      })
    );
  }
  createDefaultStylesSection(containerEl, label, settingsKey, allStylableAttributes) {
    const defaultNodeStylesEl = document.createElement("details");
    defaultNodeStylesEl.classList.add("setting-item");
    const defaultNodeStylesSummaryEl = document.createElement("summary");
    defaultNodeStylesSummaryEl.textContent = label;
    defaultNodeStylesEl.appendChild(defaultNodeStylesSummaryEl);
    for (const stylableAttribute of allStylableAttributes) {
      new import_obsidian3.Setting(defaultNodeStylesEl).setName(stylableAttribute.label).addDropdown(
        (dropdown) => {
          var _a;
          return dropdown.addOptions(Object.fromEntries(stylableAttribute.options.map((option) => [option.value, option.label]))).setValue((_a = this.settingsManager.getSetting(settingsKey)[stylableAttribute.datasetKey]) != null ? _a : "null").onChange(async (value) => {
            const newValue = this.settingsManager.getSetting(settingsKey);
            if (value === "null")
              delete newValue[stylableAttribute.datasetKey];
            else
              newValue[stylableAttribute.datasetKey] = value;
            await this.settingsManager.setSetting({
              [settingsKey]: newValue
            });
          });
        }
      );
    }
    containerEl.appendChild(defaultNodeStylesEl);
  }
};

// src/windows-manager.ts
var WindowsManager = class {
  constructor(plugin) {
    this.windows = [window];
    this.plugin = plugin;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-open",
      (_win, window2) => this.windows.push(window2)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-close",
      (_win, window2) => this.windows = this.windows.filter((w) => w !== window2)
    ));
  }
};

// src/utils/canvas-helper.ts
var import_obsidian4 = require("obsidian");

// src/utils/bbox-helper.ts
var BBoxHelper = class {
  static combineBBoxes(bboxes) {
    let minX = Infinity;
    let minY = Infinity;
    let maxX = -Infinity;
    let maxY = -Infinity;
    for (let bbox of bboxes) {
      minX = Math.min(minX, bbox.minX);
      minY = Math.min(minY, bbox.minY);
      maxX = Math.max(maxX, bbox.maxX);
      maxY = Math.max(maxY, bbox.maxY);
    }
    return { minX, minY, maxX, maxY };
  }
  static scaleBBox(bbox, scale) {
    let diffX = (scale - 1) * (bbox.maxX - bbox.minX);
    let diffY = (scale - 1) * (bbox.maxY - bbox.minY);
    return {
      minX: bbox.minX - diffX / 2,
      maxX: bbox.maxX + diffX / 2,
      minY: bbox.minY - diffY / 2,
      maxY: bbox.maxY + diffY / 2
    };
  }
  static insideBBox(position, bbox, canTouchEdge) {
    var _a, _b, _c, _d;
    const providedBBox = {
      minX: (_a = position.minX) != null ? _a : position.x,
      minY: (_b = position.minY) != null ? _b : position.y,
      maxX: (_c = position.maxX) != null ? _c : position.x,
      maxY: (_d = position.maxY) != null ? _d : position.y
    };
    return canTouchEdge ? providedBBox.minX >= bbox.minX && providedBBox.maxX <= bbox.maxX && providedBBox.minY >= bbox.minY && providedBBox.maxY <= bbox.maxY : providedBBox.minX > bbox.minX && providedBBox.maxX < bbox.maxX && providedBBox.minY > bbox.minY && providedBBox.maxY < bbox.maxY;
  }
  static enlargeBBox(bbox, padding) {
    return {
      minX: bbox.minX - padding,
      minY: bbox.minY - padding,
      maxX: bbox.maxX + padding,
      maxY: bbox.maxY + padding
    };
  }
  static moveInDirection(position, side, distance) {
    switch (side) {
      case "top":
        return { x: position.x, y: position.y - distance };
      case "right":
        return { x: position.x + distance, y: position.y };
      case "bottom":
        return { x: position.x, y: position.y + distance };
      case "left":
        return { x: position.x - distance, y: position.y };
    }
  }
  static getCenterOfBBoxSide(bbox, side) {
    switch (side) {
      case "top":
        return { x: (bbox.minX + bbox.maxX) / 2, y: bbox.minY };
      case "right":
        return { x: bbox.maxX, y: (bbox.minY + bbox.maxY) / 2 };
      case "bottom":
        return { x: (bbox.minX + bbox.maxX) / 2, y: bbox.maxY };
      case "left":
        return { x: bbox.minX, y: (bbox.minY + bbox.maxY) / 2 };
    }
  }
  static getSideVector(side) {
    switch (side) {
      case "top":
        return { x: 0, y: 1 };
      case "right":
        return { x: 1, y: 0 };
      case "bottom":
        return { x: 0, y: -1 };
      case "left":
        return { x: -1, y: 0 };
      default:
        return { x: 0, y: 0 };
    }
  }
  static isHorizontal(side) {
    return side === "left" || side === "right";
  }
  static direction(side) {
    return side === "right" || side === "bottom" ? 1 : -1;
  }
};

// src/utils/canvas-helper.ts
var _CanvasHelper = class _CanvasHelper {
  static canvasCommand(plugin, check, run) {
    return (checking) => {
      const canvas = plugin.getCurrentCanvas();
      if (checking)
        return canvas !== null && check(canvas);
      if (canvas)
        run(canvas);
      return true;
    };
  }
  static createControlMenuButton(menuOption) {
    const quickSetting = document.createElement("div");
    if (menuOption.id)
      quickSetting.id = menuOption.id;
    quickSetting.classList.add("canvas-control-item");
    (0, import_obsidian4.setIcon)(quickSetting, menuOption.icon);
    (0, import_obsidian4.setTooltip)(quickSetting, menuOption.label, { placement: "left" });
    quickSetting.addEventListener("click", () => {
      var _a;
      return (_a = menuOption.callback) == null ? void 0 : _a.call(menuOption);
    });
    return quickSetting;
  }
  static addControlMenuButton(controlGroup, element) {
    var _a;
    if (element.id)
      (_a = controlGroup.querySelector(`#${element.id}`)) == null ? void 0 : _a.remove();
    controlGroup.appendChild(element);
  }
  static createCardMenuOption(canvas, menuOption, previewNodeSize, onPlaced) {
    const menuOptionElement = document.createElement("div");
    if (menuOption.id)
      menuOptionElement.id = menuOption.id;
    menuOptionElement.classList.add("canvas-card-menu-button");
    menuOptionElement.classList.add("mod-draggable");
    (0, import_obsidian4.setIcon)(menuOptionElement, menuOption.icon);
    (0, import_obsidian4.setTooltip)(menuOptionElement, menuOption.label, { placement: "top" });
    menuOptionElement.addEventListener("click", (_e) => {
      onPlaced(canvas, this.getCenterCoordinates(canvas, previewNodeSize()));
    });
    menuOptionElement.addEventListener("pointerdown", (e) => {
      canvas.dragTempNode(e, previewNodeSize(), (pos) => {
        canvas.deselectAll();
        onPlaced(canvas, pos);
      });
    });
    return menuOptionElement;
  }
  static addCardMenuOption(canvas, element) {
    var _a;
    if (element.id)
      (_a = canvas == null ? void 0 : canvas.cardMenuEl.querySelector(`#${element.id}`)) == null ? void 0 : _a.remove();
    canvas == null ? void 0 : canvas.cardMenuEl.appendChild(element);
  }
  static createPopupMenuOption(menuOption) {
    const menuOptionElement = document.createElement("button");
    if (menuOption.id)
      menuOptionElement.id = menuOption.id;
    menuOptionElement.classList.add("clickable-icon");
    (0, import_obsidian4.setIcon)(menuOptionElement, menuOption.icon);
    (0, import_obsidian4.setTooltip)(menuOptionElement, menuOption.label, { placement: "top" });
    menuOptionElement.addEventListener("click", () => {
      var _a;
      return (_a = menuOption.callback) == null ? void 0 : _a.call(menuOption);
    });
    return menuOptionElement;
  }
  static createExpandablePopupMenuOption(menuOption, subMenuOptions) {
    const menuOptionElement = this.createPopupMenuOption({
      ...menuOption,
      callback: () => {
        var _a, _b, _c;
        const submenuId = `${menuOption.id}-submenu`;
        if (menuOptionElement.classList.contains("is-active")) {
          menuOptionElement.classList.remove("is-active");
          (_b = (_a = menuOptionElement.parentElement) == null ? void 0 : _a.querySelector(`#${submenuId}`)) == null ? void 0 : _b.remove();
          return;
        }
        menuOptionElement.classList.add("is-active");
        const submenu = document.createElement("div");
        submenu.id = submenuId;
        submenu.classList.add("canvas-submenu");
        for (const subMenuOption of subMenuOptions) {
          const subMenuOptionElement = this.createPopupMenuOption(subMenuOption);
          submenu.appendChild(subMenuOptionElement);
        }
        (_c = menuOptionElement.parentElement) == null ? void 0 : _c.appendChild(submenu);
      }
    });
    return menuOptionElement;
  }
  static addPopupMenuOption(canvas, element, index = -1) {
    var _a;
    const popupMenuEl = (_a = canvas == null ? void 0 : canvas.menu) == null ? void 0 : _a.menuEl;
    if (!popupMenuEl)
      return;
    if (element.id) {
      const optionToReplace = popupMenuEl.querySelector(`#${element.id}`);
      if (optionToReplace && index === -1)
        index = Array.from(popupMenuEl.children).indexOf(optionToReplace) - 1;
      optionToReplace == null ? void 0 : optionToReplace.remove();
    }
    const sisterElement = index >= 0 ? popupMenuEl.children[index] : popupMenuEl.children[popupMenuEl.children.length + index];
    popupMenuEl.insertAfter(element, sisterElement);
  }
  static getCenterCoordinates(canvas, nodeSize) {
    const viewBounds = canvas.getViewportBBox();
    return {
      x: (viewBounds.minX + viewBounds.maxX) / 2 - nodeSize.width / 2,
      y: (viewBounds.minY + viewBounds.maxY) / 2 - nodeSize.height / 2
    };
  }
  static getBBox(canvasNodes) {
    let minX = Infinity;
    let minY = Infinity;
    let maxX = -Infinity;
    let maxY = -Infinity;
    for (const node of canvasNodes) {
      const nodeData = node.getData ? node.getData() : node;
      minX = Math.min(minX, nodeData.x);
      minY = Math.min(minY, nodeData.y);
      maxX = Math.max(maxX, nodeData.x + nodeData.width);
      maxY = Math.max(maxY, nodeData.y + nodeData.height);
    }
    return { minX, minY, maxX, maxY };
  }
  static zoomToBBox(canvas, bbox) {
    const PADDING_CORRECTION_FACTOR = 1 / 1.1;
    const zoomedBBox = BBoxHelper.scaleBBox(bbox, PADDING_CORRECTION_FACTOR);
    canvas.zoomToBbox(zoomedBBox);
    const scaleFactor = Math.min(
      canvas.canvasRect.width / (bbox.maxX - bbox.minX),
      canvas.canvasRect.height / (bbox.maxY - bbox.minY)
    );
    canvas.tZoom = Math.log2(scaleFactor);
  }
  static addStyleAttributesToPopup(plugin, canvas, styleAttributes, currentStyleAttributes, setStyleAttribute) {
    if (!plugin.settings.getSetting("combineCustomStylesInDropdown"))
      this.addStyleAttributesButtons(canvas, styleAttributes, currentStyleAttributes, setStyleAttribute);
    else
      this.addStyleAttributesDropdownMenu(canvas, styleAttributes, currentStyleAttributes, setStyleAttribute);
  }
  static addStyleAttributesButtons(canvas, stylableAttributes, currentStyleAttributes, setStyleAttribute) {
    var _a;
    for (const stylableAttribute of stylableAttributes) {
      const selectedStyle = (_a = stylableAttribute.options.find((option) => currentStyleAttributes[stylableAttribute.datasetKey] === option.value)) != null ? _a : stylableAttribute.options.find((value) => value.value === null);
      const menuOption = _CanvasHelper.createExpandablePopupMenuOption({
        id: `menu-option-${stylableAttribute.datasetKey}`,
        label: stylableAttribute.label,
        icon: selectedStyle.icon
      }, stylableAttribute.options.map((styleOption) => ({
        label: styleOption.label,
        icon: styleOption.icon,
        callback: () => {
          setStyleAttribute(stylableAttribute, styleOption.value);
          currentStyleAttributes[stylableAttribute.datasetKey] = styleOption.value;
          (0, import_obsidian4.setIcon)(menuOption, styleOption.icon);
          menuOption.dispatchEvent(new Event("click"));
        }
      })));
      _CanvasHelper.addPopupMenuOption(canvas, menuOption);
    }
  }
  static addStyleAttributesDropdownMenu(canvas, stylableAttributes, currentStyleAttributes, setStyleAttribute) {
    var _a, _b;
    const STYLE_MENU_ID = "style-menu";
    const STYLE_MENU_DROPDOWN_ID = "style-menu-dropdown";
    const STYLE_MENU_DROPDOWN_SUBMENU_ID = "style-menu-dropdown-submenu";
    const popupMenuElement = (_a = canvas == null ? void 0 : canvas.menu) == null ? void 0 : _a.menuEl;
    if (!popupMenuElement)
      return;
    (_b = popupMenuElement.querySelector(`#${STYLE_MENU_ID}`)) == null ? void 0 : _b.remove();
    const styleMenuButtonElement = document.createElement("button");
    styleMenuButtonElement.id = STYLE_MENU_ID;
    styleMenuButtonElement.classList.add("clickable-icon");
    (0, import_obsidian4.setIcon)(styleMenuButtonElement, "paintbrush");
    (0, import_obsidian4.setTooltip)(styleMenuButtonElement, "Style", { placement: "top" });
    popupMenuElement.appendChild(styleMenuButtonElement);
    styleMenuButtonElement.addEventListener("click", () => {
      var _a2, _b2, _c;
      const isOpen = styleMenuButtonElement.classList.toggle("has-active-menu");
      if (!isOpen) {
        (_a2 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_ID}`)) == null ? void 0 : _a2.remove();
        (_b2 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_SUBMENU_ID}`)) == null ? void 0 : _b2.remove();
        return;
      }
      const styleMenuDropdownElement = document.createElement("div");
      styleMenuDropdownElement.id = STYLE_MENU_DROPDOWN_ID;
      styleMenuDropdownElement.classList.add("menu");
      styleMenuDropdownElement.style.position = "absolute";
      styleMenuDropdownElement.style.maxHeight = "initial";
      styleMenuDropdownElement.style.top = `${popupMenuElement.getBoundingClientRect().height}px`;
      const canvasWrapperCenterX = canvas.wrapperEl.getBoundingClientRect().left + canvas.wrapperEl.getBoundingClientRect().width / 2;
      const leftPosition = styleMenuButtonElement.getBoundingClientRect().left - popupMenuElement.getBoundingClientRect().left;
      const rightPosition = popupMenuElement.getBoundingClientRect().right - styleMenuButtonElement.getBoundingClientRect().right;
      if (popupMenuElement.getBoundingClientRect().left + leftPosition < canvasWrapperCenterX)
        styleMenuDropdownElement.style.left = `${leftPosition}px`;
      else
        styleMenuDropdownElement.style.right = `${rightPosition}px`;
      for (const stylableAttribute of stylableAttributes) {
        const stylableAttributeElement = document.createElement("div");
        stylableAttributeElement.classList.add("menu-item");
        stylableAttributeElement.classList.add("tappable");
        const iconElement = document.createElement("div");
        iconElement.classList.add("menu-item-icon");
        let selectedStyle = (_c = stylableAttribute.options.find((option) => currentStyleAttributes[stylableAttribute.datasetKey] === option.value)) != null ? _c : stylableAttribute.options.find((value) => value.value === null);
        (0, import_obsidian4.setIcon)(iconElement, selectedStyle.icon);
        stylableAttributeElement.appendChild(iconElement);
        const labelElement = document.createElement("div");
        labelElement.classList.add("menu-item-title");
        labelElement.textContent = stylableAttribute.label;
        stylableAttributeElement.appendChild(labelElement);
        const expandIconElement = document.createElement("div");
        expandIconElement.classList.add("menu-item-icon");
        (0, import_obsidian4.setIcon)(expandIconElement, "chevron-right");
        stylableAttributeElement.appendChild(expandIconElement);
        styleMenuDropdownElement.appendChild(stylableAttributeElement);
        stylableAttributeElement.addEventListener("pointerenter", () => {
          stylableAttributeElement.classList.add("selected");
        });
        stylableAttributeElement.addEventListener("pointerleave", () => {
          stylableAttributeElement.classList.remove("selected");
        });
        stylableAttributeElement.addEventListener("click", () => {
          var _a3;
          (_a3 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_SUBMENU_ID}`)) == null ? void 0 : _a3.remove();
          const styleMenuDropdownSubmenuElement = document.createElement("div");
          styleMenuDropdownSubmenuElement.id = STYLE_MENU_DROPDOWN_SUBMENU_ID;
          styleMenuDropdownSubmenuElement.classList.add("menu");
          styleMenuDropdownSubmenuElement.style.position = "absolute";
          styleMenuDropdownSubmenuElement.style.maxHeight = "initial";
          const topOffset = parseFloat(window.getComputedStyle(styleMenuDropdownElement).getPropertyValue("padding-top")) + (styleMenuDropdownElement.offsetHeight - styleMenuDropdownElement.clientHeight) / 2;
          styleMenuDropdownSubmenuElement.style.top = `${stylableAttributeElement.getBoundingClientRect().top - topOffset - popupMenuElement.getBoundingClientRect().top}px`;
          const leftPosition2 = styleMenuDropdownElement.getBoundingClientRect().right - popupMenuElement.getBoundingClientRect().left;
          const rightPosition2 = popupMenuElement.getBoundingClientRect().right - styleMenuDropdownElement.getBoundingClientRect().left;
          if (popupMenuElement.getBoundingClientRect().left + leftPosition2 < canvasWrapperCenterX)
            styleMenuDropdownSubmenuElement.style.left = `${leftPosition2}px`;
          else
            styleMenuDropdownSubmenuElement.style.right = `${rightPosition2}px`;
          for (const styleOption of stylableAttribute.options) {
            const styleMenuDropdownSubmenuOptionElement = document.createElement("div");
            styleMenuDropdownSubmenuOptionElement.classList.add("menu-item");
            styleMenuDropdownSubmenuOptionElement.classList.add("tappable");
            const submenuIconElement = document.createElement("div");
            submenuIconElement.classList.add("menu-item-icon");
            (0, import_obsidian4.setIcon)(submenuIconElement, styleOption.icon);
            styleMenuDropdownSubmenuOptionElement.appendChild(submenuIconElement);
            const submenuLabelElement = document.createElement("div");
            submenuLabelElement.classList.add("menu-item-title");
            submenuLabelElement.textContent = styleOption.label;
            styleMenuDropdownSubmenuOptionElement.appendChild(submenuLabelElement);
            if (selectedStyle === styleOption) {
              styleMenuDropdownSubmenuOptionElement.classList.add("mod-selected");
              const selectedIconElement = document.createElement("div");
              selectedIconElement.classList.add("menu-item-icon");
              selectedIconElement.classList.add("mod-selected");
              (0, import_obsidian4.setIcon)(selectedIconElement, "check");
              styleMenuDropdownSubmenuOptionElement.appendChild(selectedIconElement);
            }
            styleMenuDropdownSubmenuElement.appendChild(styleMenuDropdownSubmenuOptionElement);
            styleMenuDropdownSubmenuOptionElement.addEventListener("pointerenter", () => {
              styleMenuDropdownSubmenuOptionElement.classList.add("selected");
            });
            styleMenuDropdownSubmenuOptionElement.addEventListener("pointerleave", () => {
              styleMenuDropdownSubmenuOptionElement.classList.remove("selected");
            });
            styleMenuDropdownSubmenuOptionElement.addEventListener("click", () => {
              setStyleAttribute(stylableAttribute, styleOption.value);
              currentStyleAttributes[stylableAttribute.datasetKey] = styleOption.value;
              selectedStyle = styleOption;
              (0, import_obsidian4.setIcon)(iconElement, styleOption.icon);
              styleMenuDropdownSubmenuElement.remove();
            });
          }
          popupMenuElement.appendChild(styleMenuDropdownSubmenuElement);
        });
      }
      popupMenuElement.appendChild(styleMenuDropdownElement);
    });
  }
};
_CanvasHelper.GRID_SIZE = 20;
var CanvasHelper = _CanvasHelper;

// src/core/canvas-extension.ts
var CanvasExtension = class {
  constructor(plugin) {
    this.plugin = plugin;
    const isEnabled = this.isEnabled();
    if (!(isEnabled === true || this.plugin.settings.getSetting(isEnabled)))
      return;
    this.init();
  }
};

// src/canvas-extensions/group-canvas-extension.ts
var GROUP_NODE_SIZE = { width: 300, height: 300 };
var GroupCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => {
        CanvasHelper.addCardMenuOption(
          canvas,
          CanvasHelper.createCardMenuOption(
            canvas,
            {
              id: "create-group",
              label: "Drag to add group",
              icon: "group"
            },
            () => GROUP_NODE_SIZE,
            (canvas2, pos) => {
              canvas2.createGroupNode({
                pos,
                size: GROUP_NODE_SIZE
              });
            }
          )
        );
      }
    ));
  }
};

// src/canvas-extensions/presentation-canvas-extension.ts
var import_obsidian5 = require("obsidian");
var START_SLIDE_NAME = "Start Slide";
var DEFAULT_SLIDE_NAME = "New Slide";
var PresentationCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.savedViewport = null;
    this.isPresentationMode = false;
    this.visitedNodes = [];
    this.fullscreenModalObserver = null;
  }
  isEnabled() {
    return "presentationFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.SelectionContextMenu,
      (menu, canvas) => {
        menu.addItem(
          (item) => item.setTitle("Wrap in slide").setIcon("gallery-vertical").onClick(() => this.addSlide(
            canvas,
            void 0,
            BBoxHelper.enlargeBBox(BBoxHelper.combineBBoxes(
              [...canvas.selection.values()].map((element) => element.getBBox())
            ), this.plugin.settings.getSetting("wrapInSlidePadding"))
          ))
        );
      }
    ));
    this.plugin.addCommand({
      id: "create-new-slide",
      name: "Create new slide",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && !this.isPresentationMode,
        (canvas) => this.addSlide(canvas)
      )
    });
    this.plugin.addCommand({
      id: "set-start-node",
      name: "Set start node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && !this.isPresentationMode && canvas.getSelectionData().nodes.length === 1,
        (canvas) => this.setStartNode(canvas, canvas.nodes.get(canvas.getSelectionData().nodes[0].id))
      )
    });
    this.plugin.addCommand({
      id: "start-presentation",
      name: "Start presentation",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => !this.isPresentationMode,
        (canvas) => this.startPresentation(canvas)
      )
    });
    this.plugin.addCommand({
      id: "continue-presentation",
      name: "Continue presentation",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => !this.isPresentationMode,
        (canvas) => this.startPresentation(canvas, true)
      )
    });
    this.plugin.addCommand({
      id: "end-presentation",
      name: "End presentation",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.endPresentation(canvas)
      )
    });
    this.plugin.addCommand({
      id: "previous-node",
      name: "Previous node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.previousNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "next-node",
      name: "Next node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.nextNode(canvas)
      )
    });
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.onCanvasChanged(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, node) => this.onNodeMoved(canvas, node)
    ));
  }
  onCanvasChanged(canvas) {
    CanvasHelper.addCardMenuOption(
      canvas,
      CanvasHelper.createCardMenuOption(
        canvas,
        {
          id: "new-slide",
          label: "Drag to add slide",
          icon: "gallery-vertical"
        },
        () => this.getDefaultSlideSize(),
        (canvas2, pos) => this.addSlide(canvas2, pos)
      )
    );
  }
  onPopupMenuCreated(canvas) {
    if (!this.plugin.settings.getSetting("showSetStartNodeInPopup"))
      return;
    const selectedNodesData = canvas.getSelectionData().nodes;
    if (canvas.readonly || selectedNodesData.length !== 1 || canvas.selection.size > 1)
      return;
    const selectedNode = canvas.nodes.get(selectedNodesData[0].id);
    if (!selectedNode)
      return;
    CanvasHelper.addPopupMenuOption(
      canvas,
      CanvasHelper.createPopupMenuOption({
        id: "start-node",
        label: "Set as start slide",
        icon: "play",
        callback: () => this.setStartNode(canvas, selectedNode)
      })
    );
  }
  onNodeMoved(_canvas, node) {
    const nodeData = node.getData();
    if (!nodeData.sideRatio)
      return;
    const nodeBBox = node.getBBox();
    const nodeSize = {
      width: nodeBBox.maxX - nodeBBox.minX,
      height: nodeBBox.maxY - nodeBBox.minY
    };
    const nodeAspectRatio = nodeSize.width / nodeSize.height;
    if (nodeAspectRatio < nodeData.sideRatio)
      nodeSize.width = nodeSize.height * nodeData.sideRatio;
    else
      nodeSize.height = nodeSize.width / nodeData.sideRatio;
    node.setData({
      ...nodeData,
      width: nodeSize.width,
      height: nodeSize.height
    });
  }
  getStartNode(canvas) {
    for (const [_, node] of canvas.nodes) {
      if (node.getData().isStartNode)
        return node;
    }
    return void 0;
  }
  setStartNode(canvas, node) {
    if (!node)
      return;
    const startNode = this.getStartNode(canvas);
    if (startNode)
      startNode.setData({ ...startNode.getData(), isStartNode: false });
    if (node !== startNode)
      node.setData({ ...node.getData(), isStartNode: true }, true);
  }
  getDefaultSlideSize() {
    const slideSizeString = this.plugin.settings.getSetting("defaultSlideSize");
    const slideSizeArray = slideSizeString.split("x").map((value) => parseInt(value));
    return { width: slideSizeArray[0], height: slideSizeArray[1] };
  }
  getSlideAspectRatio() {
    const slideSize = this.getDefaultSlideSize();
    return slideSize.width / slideSize.height;
  }
  addSlide(canvas, pos, bbox) {
    const isStartNode = this.getStartNode(canvas) == null;
    const slideSize = this.getDefaultSlideSize();
    const slideAspectRatio = this.getSlideAspectRatio();
    if (bbox) {
      const bboxWidth = bbox.maxX - bbox.minX;
      const bboxHeight = bbox.maxY - bbox.minY;
      if (bboxWidth / bboxHeight > slideAspectRatio) {
        slideSize.width = bboxWidth;
        slideSize.height = bboxWidth / slideAspectRatio;
      } else {
        slideSize.height = bboxHeight;
        slideSize.width = bboxHeight * slideAspectRatio;
      }
      pos = {
        x: bbox.minX,
        y: bbox.minY
      };
    }
    if (!pos)
      pos = CanvasHelper.getCenterCoordinates(canvas, this.getDefaultSlideSize());
    const groupNode = canvas.createGroupNode({
      pos,
      size: slideSize,
      label: isStartNode ? START_SLIDE_NAME : DEFAULT_SLIDE_NAME,
      focus: false
    });
    groupNode.setData({
      ...groupNode.getData(),
      sideRatio: slideAspectRatio,
      isStartNode: isStartNode ? true : void 0
    });
  }
  async animateNodeTransition(canvas, fromNode, toNode) {
    const useCustomZoomFunction = this.plugin.settings.getSetting("zoomToSlideWithoutPadding");
    const animationDurationMs = this.plugin.settings.getSetting("slideTransitionAnimationDuration") * 1e3;
    if (animationDurationMs > 0 && fromNode) {
      const animationIntensity = this.plugin.settings.getSetting("slideTransitionAnimationIntensity");
      const currentNodeBBoxEnlarged = BBoxHelper.scaleBBox(fromNode.getBBox(), animationIntensity);
      if (useCustomZoomFunction)
        CanvasHelper.zoomToBBox(canvas, currentNodeBBoxEnlarged);
      else
        canvas.zoomToBbox(currentNodeBBoxEnlarged);
      await sleep(animationDurationMs / 2);
      const nextNodeBBoxEnlarged = BBoxHelper.scaleBBox(toNode.getBBox(), animationIntensity);
      if (useCustomZoomFunction)
        CanvasHelper.zoomToBBox(canvas, nextNodeBBoxEnlarged);
      else
        canvas.zoomToBbox(nextNodeBBoxEnlarged);
      await sleep(animationDurationMs / 2);
    }
    let nodeBBox = toNode.getBBox();
    if (useCustomZoomFunction)
      CanvasHelper.zoomToBBox(canvas, nodeBBox);
    else
      canvas.zoomToBbox(nodeBBox);
  }
  async startPresentation(canvas, tryContinue = false) {
    if (!tryContinue || this.visitedNodes.length === 0) {
      const startNode = this.getStartNode(canvas);
      if (!startNode) {
        new import_obsidian5.Notice("No start node found. Please mark a node as a start node trough the popup menu.");
        return;
      }
      this.visitedNodes = [startNode];
    }
    this.savedViewport = {
      x: canvas.tx,
      y: canvas.ty,
      zoom: canvas.tZoom
    };
    canvas.wrapperEl.focus();
    canvas.wrapperEl.requestFullscreen();
    canvas.wrapperEl.classList.add("presentation-mode");
    canvas.setReadonly(true);
    canvas.wrapperEl.onkeydown = (e) => {
      if (this.plugin.settings.getSetting("useArrowKeysToChangeSlides")) {
        if (e.key === "ArrowRight")
          this.nextNode(canvas);
        else if (e.key === "ArrowLeft")
          this.previousNode(canvas);
      }
      if (this.plugin.settings.getSetting("usePgUpPgDownKeysToChangeSlides")) {
        if (e.key === "PageDown")
          this.nextNode(canvas);
        else if (e.key === "PageUp")
          this.previousNode(canvas);
      }
    };
    this.fullscreenModalObserver = new MutationObserver((mutationRecords) => {
      mutationRecords.forEach((mutationRecord) => {
        mutationRecord.addedNodes.forEach((node) => {
          var _a;
          document.body.removeChild(node);
          (_a = document.fullscreenElement) == null ? void 0 : _a.appendChild(node);
        });
      });
      const inputField = document.querySelector(".prompt-input");
      if (inputField)
        inputField.focus();
    });
    this.fullscreenModalObserver.observe(document.body, { childList: true });
    canvas.wrapperEl.onfullscreenchange = (_e) => {
      if (document.fullscreenElement)
        return;
      this.endPresentation(canvas);
    };
    this.isPresentationMode = true;
    await sleep(500);
    this.animateNodeTransition(canvas, void 0, this.visitedNodes.last());
  }
  endPresentation(canvas) {
    var _a;
    (_a = this.fullscreenModalObserver) == null ? void 0 : _a.disconnect();
    this.fullscreenModalObserver = null;
    canvas.wrapperEl.onkeydown = null;
    canvas.wrapperEl.onfullscreenchange = null;
    canvas.setReadonly(false);
    canvas.wrapperEl.classList.remove("presentation-mode");
    if (document.fullscreenElement)
      document.exitFullscreen();
    if (this.plugin.settings.getSetting("resetViewportOnPresentationEnd"))
      canvas.setViewport(this.savedViewport.x, this.savedViewport.y, this.savedViewport.zoom);
    this.isPresentationMode = false;
  }
  nextNode(canvas) {
    var _a;
    const fromNode = this.visitedNodes.last();
    if (!fromNode)
      return;
    const outgoingEdges = canvas.getEdgesForNode(fromNode).filter((edge) => edge.from.node === fromNode);
    let toNode = (_a = outgoingEdges.first()) == null ? void 0 : _a.to.node;
    if (outgoingEdges.length > 1) {
      const sortedEdges = outgoingEdges.sort((a, b) => {
        if (!a.label)
          return 1;
        if (!b.label)
          return -1;
        return a.label.localeCompare(b.label);
      });
      const traversedEdgesCount = this.visitedNodes.filter((visitedNode) => visitedNode == fromNode).length - 1;
      const nextEdge = sortedEdges[traversedEdgesCount];
      toNode = nextEdge.to.node;
    }
    if (toNode) {
      this.visitedNodes.push(toNode);
      this.animateNodeTransition(canvas, fromNode, toNode);
    } else {
      this.animateNodeTransition(canvas, fromNode, fromNode);
    }
  }
  previousNode(canvas) {
    const fromNode = this.visitedNodes.pop();
    if (!fromNode)
      return;
    let toNode = this.visitedNodes.last();
    if (!toNode) {
      toNode = fromNode;
      this.visitedNodes.push(fromNode);
    }
    this.animateNodeTransition(canvas, fromNode, toNode);
  }
};

// src/canvas-extensions/better-readonly-canvas-extension.ts
var BetterReadonlyCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "betterReadonlyEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas, _node) => this.updatePopupMenu(canvas)
    ));
    let movingToBBox = false;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ViewportChanged.Before,
      (canvas) => {
        var _a, _b, _c, _d, _e, _f;
        if (movingToBBox) {
          movingToBBox = false;
          this.updateLockedZoom(canvas);
          this.updateLockedPan(canvas);
          return;
        }
        if (!canvas.readonly)
          return;
        if (this.plugin.settings.getSetting("disableZoom")) {
          canvas.zoom = (_a = canvas.lockedZoom) != null ? _a : canvas.zoom;
          canvas.tZoom = (_b = canvas.lockedZoom) != null ? _b : canvas.tZoom;
        }
        if (this.plugin.settings.getSetting("disablePan")) {
          canvas.x = (_c = canvas.lockedX) != null ? _c : canvas.x;
          canvas.tx = (_d = canvas.lockedX) != null ? _d : canvas.tx;
          canvas.y = (_e = canvas.lockedY) != null ? _e : canvas.y;
          canvas.ty = (_f = canvas.lockedY) != null ? _f : canvas.ty;
        }
      }
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ZoomToBbox.Before,
      () => movingToBBox = true
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ReadonlyChanged,
      (canvas, _readonly) => {
        this.updatePopupMenu(canvas);
        this.updateLockedZoom(canvas);
        this.updateLockedPan(canvas);
      }
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.addQuickSettings(canvas)
    ));
  }
  addQuickSettings(canvas) {
    var _a;
    const settingsContainer = (_a = canvas.quickSettingsButton) == null ? void 0 : _a.parentElement;
    if (!settingsContainer)
      return;
    CanvasHelper.addControlMenuButton(
      settingsContainer,
      this.createToggle({
        id: "disable-node-popup",
        label: "Disable node popup",
        icon: "arrow-up-right-from-circle",
        callback: () => this.updatePopupMenu(canvas)
      }, "disableNodePopup")
    );
    CanvasHelper.addControlMenuButton(
      settingsContainer,
      this.createToggle({
        id: "disable-zoom",
        label: "Disable zoom",
        icon: "zoom-in",
        callback: () => this.updateLockedZoom(canvas)
      }, "disableZoom")
    );
    CanvasHelper.addControlMenuButton(
      settingsContainer,
      this.createToggle({
        id: "disable-pan",
        label: "Disable pan",
        icon: "move",
        callback: () => this.updateLockedPan(canvas)
      }, "disablePan")
    );
  }
  createToggle(menuOption, settingKey) {
    const toggle = CanvasHelper.createControlMenuButton({
      ...menuOption,
      callback: () => (async () => {
        var _a;
        const newValue = !this.plugin.settings.getSetting(settingKey);
        await this.plugin.settings.setSetting({ [settingKey]: newValue });
        toggle.dataset.toggled = this.plugin.settings.getSetting(settingKey).toString();
        (_a = menuOption.callback) == null ? void 0 : _a.call(this);
      })()
    });
    toggle.classList.add("show-while-readonly");
    toggle.dataset.toggled = this.plugin.settings.getSetting(settingKey).toString();
    return toggle;
  }
  updatePopupMenu(canvas) {
    const hidden = canvas.readonly && this.plugin.settings.getSetting("disableNodePopup");
    canvas.menu.menuEl.style.visibility = hidden ? "hidden" : "visible";
  }
  updateLockedZoom(canvas) {
    canvas.lockedZoom = canvas.tZoom;
  }
  updateLockedPan(canvas) {
    canvas.lockedX = canvas.tx;
    canvas.lockedY = canvas.ty;
  }
};

// src/utils/modal-helper.ts
var import_obsidian6 = require("obsidian");

// src/utils/path-helper.ts
var PathHelper = class {
  static extension(path) {
    return path.includes(".") ? path.split(".").pop() : void 0;
  }
};

// src/utils/modal-helper.ts
var FileNameModal = class extends import_obsidian6.SuggestModal {
  constructor(app, parentPath, fileExtension) {
    super(app);
    this.parentPath = parentPath;
    this.fileExtension = fileExtension;
  }
  getSuggestions(query) {
    const queryWithoutExtension = query.replace(new RegExp(`\\.${this.fileExtension}$`), "");
    if (queryWithoutExtension === "")
      return [];
    const queryWithExtension = queryWithoutExtension + "." + this.fileExtension;
    const suggestions = [`${this.parentPath}/${queryWithExtension}`, queryWithExtension].filter((s) => this.app.vault.getAbstractFileByPath(s) === null);
    return suggestions;
  }
  renderSuggestion(text, el) {
    el.setText(text);
  }
  onChooseSuggestion(_text, _evt) {
  }
  awaitInput() {
    return new Promise((resolve, _reject) => {
      this.onChooseSuggestion = (text) => {
        resolve(text);
      };
      this.open();
    });
  }
};
var FileSelectModal = class extends import_obsidian6.SuggestModal {
  constructor(app, extensionsRegex, suggestNewFile = false) {
    super(app);
    this.files = this.app.vault.getFiles().map((file) => file.path).filter((path) => {
      var _a;
      return (_a = PathHelper.extension(path)) == null ? void 0 : _a.match(extensionsRegex != null ? extensionsRegex : /.*/);
    });
    this.suggestNewFile = suggestNewFile;
    this.setPlaceholder("Type to search...");
    this.setInstructions([{
      command: "\u2191\u2193",
      purpose: "to navigate"
    }, {
      command: "\u21B5",
      purpose: "to open"
    }, {
      command: "shift \u21B5",
      purpose: "to create"
    }, {
      command: "esc",
      purpose: "to dismiss"
    }]);
    this.scope.register(["Shift"], "Enter", (e) => {
      this.onChooseSuggestion(this.inputEl.value, e);
      this.close();
    });
  }
  getSuggestions(query) {
    const suggestions = this.files.filter((path) => path.toLowerCase().includes(query.toLowerCase()));
    if (suggestions.length === 0 && this.suggestNewFile)
      suggestions.push(query);
    return suggestions;
  }
  renderSuggestion(path, el) {
    const simplifiedPath = path.replace(/\.md$/, "");
    el.setText(simplifiedPath);
  }
  onChooseSuggestion(_path, _evt) {
  }
  awaitInput() {
    return new Promise((resolve, _reject) => {
      this.onChooseSuggestion = (path, _evt) => {
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof import_obsidian6.TFile)
          return resolve(file);
        if (!this.suggestNewFile)
          return;
        if (PathHelper.extension(path) === void 0)
          path += ".md";
        const newFile = this.app.vault.create(path, "");
        resolve(newFile);
      };
      this.open();
    });
  }
};

// src/canvas-extensions/encapsulate-canvas-extension.ts
var ENCAPSULATED_FILE_NODE_SIZE = { width: 300, height: 300 };
var EncapsulateCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "canvasEncapsulationEnabled";
  }
  init() {
    this.plugin.addCommand({
      id: "encapsulate-selection",
      name: "Encapsulate selection",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && canvas.selection.size > 0,
        (canvas) => this.encapsulateSelection(canvas)
      )
    });
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.SelectionContextMenu,
      (menu, canvas) => {
        menu.addItem(
          (item) => item.setTitle("Encapsulate").setIcon("file-plus").onClick(() => this.encapsulateSelection(canvas))
        );
      }
    ));
  }
  async encapsulateSelection(canvas) {
    var _a;
    const selection = canvas.getSelectionData();
    const sourceFileFolder = (_a = canvas.view.file.parent) == null ? void 0 : _a.path;
    if (!sourceFileFolder)
      return;
    const targetFilePath = await new FileNameModal(
      this.plugin.app,
      sourceFileFolder,
      "canvas"
    ).awaitInput();
    const newFileData = { nodes: selection.nodes, edges: selection.edges };
    const file = await this.plugin.app.vault.create(targetFilePath, JSON.stringify(newFileData, null, 2));
    for (const nodeData of selection.nodes) {
      const node = canvas.nodes.get(nodeData.id);
      if (node)
        canvas.removeNode(node);
    }
    canvas.createFileNode({
      pos: {
        x: selection.center.x - ENCAPSULATED_FILE_NODE_SIZE.width / 2,
        y: selection.center.y - ENCAPSULATED_FILE_NODE_SIZE.height / 2
      },
      size: ENCAPSULATED_FILE_NODE_SIZE,
      file
    });
  }
};

// src/canvas-extensions/commands-canvas-extension.ts
var DIRECTIONS = ["up", "down", "left", "right"];
var CommandsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "commandsFeatureEnabled";
  }
  init() {
    this.plugin.addCommand({
      id: "create-text-node",
      name: "Create text node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly,
        (canvas) => this.createTextNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "create-file-node",
      name: "Create file node",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly,
        (canvas) => this.createFileNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "select-all-edges",
      name: "Select all edges",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => true,
        (canvas) => canvas.updateSelection(
          () => canvas.selection = new Set(canvas.edges.values())
        )
      )
    });
    this.plugin.addCommand({
      id: "zoom-to-selection",
      name: "Zoom to selection",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (canvas) => canvas.selection.size > 0,
        (canvas) => canvas.zoomToSelection()
      )
    });
    for (const direction of DIRECTIONS) {
      this.plugin.addCommand({
        id: `clone-node-${direction}`,
        name: `Clone node ${direction}`,
        checkCallback: CanvasHelper.canvasCommand(
          this.plugin,
          (canvas) => {
            var _a;
            return !canvas.readonly && canvas.selection.size === 1 && ((_a = canvas.selection.values().next().value) == null ? void 0 : _a.getData().type) === "text";
          },
          (canvas) => this.cloneNode(canvas, direction)
        )
      });
      this.plugin.addCommand({
        id: `expand-node-${direction}`,
        name: `Expand node ${direction}`,
        checkCallback: CanvasHelper.canvasCommand(
          this.plugin,
          (canvas) => !canvas.readonly && canvas.selection.size === 1,
          (canvas) => this.expandNode(canvas, direction)
        )
      });
    }
  }
  createTextNode(canvas) {
    const size = canvas.config.defaultTextNodeDimensions;
    const pos = CanvasHelper.getCenterCoordinates(canvas, size);
    canvas.createTextNode({ pos, size });
  }
  async createFileNode(canvas) {
    const size = canvas.config.defaultFileNodeDimensions;
    const pos = CanvasHelper.getCenterCoordinates(canvas, size);
    const file = await new FileSelectModal(this.plugin.app, void 0, true).awaitInput();
    canvas.createFileNode({ pos, size, file });
  }
  cloneNode(canvas, cloneDirection) {
    const sourceNode = canvas.selection.values().next().value;
    if (!sourceNode)
      return;
    const sourceNodeData = sourceNode.getData();
    const nodeMargin = this.plugin.settings.getSetting("cloneNodeMargin");
    const offset = {
      x: (sourceNode.width + nodeMargin) * (cloneDirection === "left" ? -1 : cloneDirection === "right" ? 1 : 0),
      y: (sourceNode.height + nodeMargin) * (cloneDirection === "up" ? -1 : cloneDirection === "down" ? 1 : 0)
    };
    const clonedNode = canvas.createTextNode({
      pos: {
        x: sourceNode.x + offset.x,
        y: sourceNode.y + offset.y
      },
      size: {
        width: sourceNode.width,
        height: sourceNode.height
      }
    });
    clonedNode.setData({
      ...clonedNode.getData(),
      color: sourceNodeData.color,
      styleAttributes: sourceNodeData.styleAttributes
    });
    if (this.plugin.settings.getSetting("zoomToClonedNode"))
      canvas.zoomToBbox(clonedNode.getBBox());
  }
  expandNode(canvas, expandDirection) {
    const node = canvas.selection.values().next().value;
    if (!node)
      return;
    const expandNodeStepSize = this.plugin.settings.getSetting("expandNodeStepSize");
    const expand = {
      x: expandDirection === "left" ? -1 : expandDirection === "right" ? 1 : 0,
      y: expandDirection === "up" ? -1 : expandDirection === "down" ? 1 : 0
    };
    node.setData({
      ...node.getData(),
      width: node.width + expand.x * expandNodeStepSize,
      height: node.height + expand.y * expandNodeStepSize
    });
  }
};

// src/canvas-extensions/auto-resize-node-canvas-extension.ts
var AutoResizeNodeCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return this.plugin.settings.getSetting("autoResizeNodeFeatureEnabled");
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeTextContentChanged,
      (canvas, node, viewUpdate) => this.onNodeTextContentChanged(canvas, node, viewUpdate)
    ));
  }
  onPopupMenuCreated(canvas) {
    if (canvas.readonly)
      return;
    const selectedNodes = [...canvas.selection].filter((element) => {
      const elementData = element.getData();
      return elementData.type === "text";
    });
    if (selectedNodes.length === 0)
      return;
    const hasLockedHeight = selectedNodes.some((node) => node.getData().lockedHeight);
    CanvasHelper.addPopupMenuOption(
      canvas,
      CanvasHelper.createPopupMenuOption({
        id: "lock-height",
        label: "Toggle locked height",
        icon: hasLockedHeight ? "ruler" : "pencil-ruler",
        callback: () => this.setLockedHeight(canvas, selectedNodes, hasLockedHeight)
      })
    );
  }
  setLockedHeight(canvas, nodes, lockedHeight) {
    const newLockedHeight = lockedHeight ? void 0 : true;
    nodes.forEach((node) => node.setData({
      ...node.getData(),
      lockedHeight: newLockedHeight
    }));
    this.onPopupMenuCreated(canvas);
  }
  async onNodeTextContentChanged(canvas, node, viewUpdate) {
    const nodeData = node.getData();
    if (nodeData.lockedHeight)
      return;
    let textPadding = 0;
    const cmScroller = viewUpdate.view.dom.querySelector(".cm-scroller");
    if (cmScroller) {
      for (const pseudo of ["before", "after"]) {
        const style = window.getComputedStyle(cmScroller, pseudo);
        const height = parseFloat(style.getPropertyValue("height"));
        textPadding += height;
      }
    }
    let newHeight = viewUpdate.view.contentHeight + textPadding + 10;
    if (this.plugin.settings.getSetting("autoResizeNodeSnapToGrid"))
      newHeight = Math.round(newHeight / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE;
    node.setData({
      ...nodeData,
      height: newHeight
    });
  }
};

// src/canvas-extensions/portals-canvas-extension.ts
var import_obsidian7 = require("obsidian");
var PORTAL_PADDING = 50;
var MIN_OPEN_PORTAL_SIZE = { width: 200, height: 200 };
var PortalsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "portalsFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.vault.on("modify", (file) => {
      const canvases = this.plugin.app.workspace.getLeavesOfType("canvas").map((leaf) => leaf.view.canvas);
      for (const canvas of canvases) {
        if (canvas === void 0)
          continue;
        const hasPortalsToFile = canvas.getData().nodes.filter(
          (nodeData) => nodeData.type === "file" && nodeData.portalToFile === file.path
        ).length > 0;
        if (hasPortalsToFile) {
          canvas.setData(canvas.getData());
          canvas.history.current--;
          canvas.history.data.pop();
        }
      }
    }));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.updatePopupMenu(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeRemoved,
      (canvas, node) => this.onNodeRemoved(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, node) => this.onNodeMoved(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, startedDragging) => this.onDraggingStateChanged(canvas, startedDragging)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ContainingNodesRequested,
      (canvas, bbox, nodes) => this.onContainingNodesRequested(canvas, bbox, nodes)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.SelectionChanged,
      (canvas, oldSelection, updateSelection) => this.onSelectionChanged(canvas, oldSelection, updateSelection)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DataRequested,
      (canvas, data) => this.removePortalCanvasData(canvas, data)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.LoadData,
      (canvas, data, setData) => {
        this.getCanvasDataWithPortals(canvas, data).then((newData) => {
          if (newData.nodes.length === data.nodes.length && newData.edges.length === data.edges.length)
            return;
          setData(newData);
        });
      }
    ));
  }
  updatePopupMenu(canvas) {
    if (canvas.readonly)
      return;
    const selectedFileNodes = canvas.getSelectionData().nodes.map((nodeData) => {
      var _a;
      const node = canvas.nodes.get(nodeData.id);
      if (!node)
        return null;
      if (nodeData.type !== "file")
        return null;
      if (((_a = node.file) == null ? void 0 : _a.extension) === "canvas")
        return node;
      if (nodeData.portalToFile)
        this.setPortalOpen(canvas, node, false);
      return null;
    }).filter((node) => node !== null);
    if (selectedFileNodes.length !== 1)
      return;
    const portalNode = selectedFileNodes[0];
    const portalNodeData = portalNode.getData();
    if (portalNodeData.portalToFile && portalNodeData.file !== portalNodeData.portalToFile) {
      this.setPortalOpen(canvas, portalNode, true);
    }
    CanvasHelper.addPopupMenuOption(
      canvas,
      CanvasHelper.createPopupMenuOption({
        id: "toggle-portal",
        label: portalNodeData.portalToFile ? "Close portal" : "Open portal",
        icon: portalNodeData.portalToFile ? "door-open" : "door-closed",
        callback: () => {
          this.setPortalOpen(canvas, portalNode, portalNodeData.portalToFile === void 0);
          this.updatePopupMenu(canvas);
        }
      })
    );
  }
  setPortalOpen(canvas, portalNode, open) {
    const portalNodeData = portalNode.getData();
    portalNode.setData({
      ...portalNodeData,
      portalToFile: open ? portalNodeData.file : void 0
    });
    canvas.setData(canvas.getData());
  }
  onNodeRemoved(canvas, node) {
    var _a, _b, _c, _d;
    const nodeData = node.getData();
    if (nodeData.type !== "file" || !nodeData.portalToFile)
      return;
    Object.keys((_b = (_a = nodeData.portalIdMaps) == null ? void 0 : _a.nodeIdMap) != null ? _b : {}).map((refNodeId) => canvas.nodes.get(refNodeId)).filter((node2) => node2 !== void 0).forEach((node2) => canvas.removeNode(node2));
    Object.keys((_d = (_c = nodeData.portalIdMaps) == null ? void 0 : _c.edgeIdMap) != null ? _d : {}).map((refEdgeId) => canvas.edges.get(refEdgeId)).filter((edge) => edge !== void 0).forEach((edge) => canvas.removeEdge(edge));
  }
  onContainingNodesRequested(_canvas, _bbox, nodes) {
    nodes.splice(0, nodes.length, ...nodes.filter((node) => node.getData().portalId === void 0));
  }
  onSelectionChanged(canvas, oldSelection, updateSelection) {
    updateSelection(() => {
      const updatedSelection = Array.from(canvas.selection).filter((node) => node.getData().portalId === void 0);
      canvas.selection = new Set(updatedSelection);
    });
    const previouslySelectedPortalNodesIds = Array.from(oldSelection).filter((node) => node.getData().portalToFile !== void 0).flatMap((node) => {
      const portalNodeData = node.getData();
      const nestedPortalsIds = this.getNestedPortalsIds(canvas, portalNodeData.id);
      return [portalNodeData.id, ...nestedPortalsIds];
    });
    for (const node of canvas.nodes.values()) {
      const nodeData = node.getData();
      if (nodeData.portalId === void 0 || !previouslySelectedPortalNodesIds.includes(nodeData.portalId))
        continue;
      node.updateZIndex();
    }
  }
  getNestedPortalsIds(canvas, portalId) {
    const nestedPortalsIds = [];
    for (const node of canvas.nodes.values()) {
      const nodeData = node.getData();
      if (nodeData.portalId === portalId) {
        nestedPortalsIds.push(nodeData.id);
        nestedPortalsIds.push(...this.getNestedPortalsIds(canvas, nodeData.id));
      }
    }
    return nestedPortalsIds;
  }
  onDraggingStateChanged(canvas, startedDragging) {
    var _a;
    if (!canvas.getSelectionData().nodes.some((node) => node.type === "file" && node.portalToFile))
      return;
    if (startedDragging) {
      const objectSnappingEnabled = canvas.options.snapToObjects;
      this.restoreObjectSnappingState = () => canvas.toggleObjectSnapping(objectSnappingEnabled);
      if (objectSnappingEnabled)
        canvas.toggleObjectSnapping(false);
    } else
      (_a = this.restoreObjectSnappingState) == null ? void 0 : _a.call(this);
  }
  onNodeMoved(canvas, node) {
    const nodeData = node.getData();
    if (nodeData.type !== "file" || !nodeData.portalToFile)
      return;
    this.onOpenPortalMoved(canvas, node);
  }
  onOpenPortalMoved(canvas, portalNode) {
    var _a;
    let portalNodeData = portalNode.getData();
    const nestedNodesIdMap = (_a = portalNode.getData().portalIdMaps) == null ? void 0 : _a.nodeIdMap;
    if (!nestedNodesIdMap)
      return;
    const nestedNodes = Object.keys(nestedNodesIdMap).map((refNodeId) => canvas.nodes.get(refNodeId)).filter((node) => node !== void 0);
    const sourceBBox = CanvasHelper.getBBox(nestedNodes);
    const targetSize = this.getPortalSize(sourceBBox);
    if (portalNodeData.width !== targetSize.width || portalNodeData.height !== targetSize.height) {
      portalNode.setData({
        ...portalNodeData,
        width: targetSize.width,
        height: targetSize.height
      });
      return;
    }
    const portalOffset = {
      x: portalNodeData.x - sourceBBox.minX + PORTAL_PADDING,
      y: portalNodeData.y - sourceBBox.minY + PORTAL_PADDING
    };
    for (const nestedNode of nestedNodes) {
      const nestedNodeData = nestedNode.getData();
      nestedNode.setData({
        ...nestedNodeData,
        x: nestedNodeData.x + portalOffset.x,
        y: nestedNodeData.y + portalOffset.y
      });
    }
  }
  removePortalCanvasData(_canvas, data) {
    var _a, _b;
    data.edges = data.edges.filter((edgeData) => {
      var _a2, _b2;
      if (edgeData.portalId !== void 0)
        return false;
      const fromNodeData = data.nodes.find((nodeData) => nodeData.id === edgeData.fromNode);
      const toNodeData = data.nodes.find((nodeData) => nodeData.id === edgeData.toNode);
      if (!fromNodeData || !toNodeData)
        return true;
      if (fromNodeData.portalId === void 0 && toNodeData.portalId === void 0) {
        return true;
      } else if (fromNodeData.portalId !== void 0 && toNodeData.portalId !== void 0) {
        return false;
      } else {
        const fromPortalNodeData = fromNodeData.portalId !== void 0 ? fromNodeData : toNodeData;
        const notFromPortalNodeData = fromNodeData.portalId !== void 0 ? toNodeData : fromNodeData;
        notFromPortalNodeData.edgesToNodeFromPortal = (_a2 = notFromPortalNodeData.edgesToNodeFromPortal) != null ? _a2 : {};
        notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId] = (_b2 = notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId]) != null ? _b2 : [];
        notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId].push(edgeData);
        return false;
      }
    });
    data.nodes = data.nodes.filter((nodeData) => nodeData.portalId === void 0);
    for (const portalNodeData of data.nodes) {
      if (portalNodeData.type !== "file")
        continue;
      if (this.plugin.settings.getSetting("maintainClosedPortalSize")) {
        portalNodeData.width = (_a = portalNodeData.closedPortalWidth) != null ? _a : portalNodeData.width;
        portalNodeData.height = (_b = portalNodeData.closedPortalHeight) != null ? _b : portalNodeData.height;
      }
      delete portalNodeData.closedPortalWidth;
      delete portalNodeData.closedPortalHeight;
      delete portalNodeData.portalIdMaps;
    }
  }
  async getCanvasDataWithPortals(canvas, dataRef) {
    const data = JSON.parse(JSON.stringify(dataRef));
    const addedData = await Promise.all(data.nodes.map((nodeData) => this.tryOpenPortal(canvas, nodeData)));
    for (const newData of addedData) {
      data.nodes.push(...newData.nodes);
      data.edges.push(...newData.edges);
    }
    for (const originNodeData of data.nodes) {
      if (originNodeData.edgesToNodeFromPortal === void 0)
        continue;
      for (const [relativePortalId, edges] of Object.entries(originNodeData.edgesToNodeFromPortal)) {
        const idPrefix = originNodeData.portalId ? `${originNodeData.portalId}-` : "";
        const portalId = `${idPrefix}${relativePortalId}`;
        const targetPortalData = data.nodes.find((nodeData) => nodeData.id === portalId);
        if (!targetPortalData) {
          delete originNodeData.edgesToNodeFromPortal[portalId];
          continue;
        }
        if (targetPortalData.portalToFile) {
          data.edges.push(...edges.map((edge) => ({
            ...edge,
            portalId: originNodeData.portalId,
            fromNode: `${idPrefix}${edge.fromNode}`,
            toNode: `${idPrefix}${edge.toNode}`
          })));
          delete originNodeData.edgesToNodeFromPortal[portalId];
        } else if (this.plugin.settings.getSetting("showEdgesIntoDisabledPortals")) {
          data.edges.push(...edges.map((edge) => {
            const fromNodeId = `${idPrefix}${edge.fromNode}`;
            const fromNode = data.nodes.find((nodeData) => nodeData.id === fromNodeId);
            const toNodeId = `${idPrefix}${edge.toNode}`;
            return {
              ...edge,
              fromNode: fromNode ? fromNodeId : portalId,
              toNode: fromNode ? portalId : toNodeId,
              portalId
              // Mark it as temporary
            };
          }));
        }
      }
      if (Object.keys(originNodeData.edgesToNodeFromPortal).length === 0)
        delete originNodeData.edgesToNodeFromPortal;
    }
    return data;
  }
  async tryOpenPortal(canvas, portalNodeData) {
    var _a, _b;
    const addedData = { nodes: [], edges: [] };
    if (portalNodeData.type !== "file" || !portalNodeData.portalToFile)
      return addedData;
    portalNodeData.portalToFile = portalNodeData.file;
    if (portalNodeData.portalToFile === canvas.view.file.path) {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    const portalFile = this.plugin.app.vault.getAbstractFileByPath(portalNodeData.file);
    if (!(portalFile instanceof import_obsidian7.TFile) || portalFile.extension !== "canvas") {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    const portalFileDataString = await this.plugin.app.vault.cachedRead(portalFile);
    if (portalFileDataString === "")
      return addedData;
    const portalFileData = JSON.parse(portalFileDataString);
    if (!portalFileData) {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    portalNodeData.portalIdMaps = {
      nodeIdMap: {},
      edgeIdMap: {}
    };
    const sourceMinCoordinates = CanvasHelper.getBBox(portalFileData.nodes);
    const portalOffset = {
      x: portalNodeData.x - sourceMinCoordinates.minX + PORTAL_PADDING,
      y: portalNodeData.y - sourceMinCoordinates.minY + PORTAL_PADDING
    };
    for (const nodeDataFromPortal of portalFileData.nodes) {
      const refNodeId = `${portalNodeData.id}-${nodeDataFromPortal.id}`;
      portalNodeData.portalIdMaps.nodeIdMap[refNodeId] = nodeDataFromPortal.id;
      const addedNode = {
        ...nodeDataFromPortal,
        id: refNodeId,
        x: nodeDataFromPortal.x + portalOffset.x,
        y: nodeDataFromPortal.y + portalOffset.y,
        portalId: portalNodeData.id
      };
      addedData.nodes.push(addedNode);
      const nestedNodes = await this.tryOpenPortal(canvas, addedNode);
      addedData.nodes.push(...nestedNodes.nodes);
      addedData.edges.push(...nestedNodes.edges);
    }
    for (const edgeDataFromPortal of portalFileData.edges) {
      const refEdgeId = `${portalNodeData.id}-${edgeDataFromPortal.id}`;
      portalNodeData.portalIdMaps.edgeIdMap[refEdgeId] = edgeDataFromPortal.id;
      const fromRefNode = (_a = Object.entries(portalNodeData.portalIdMaps.nodeIdMap).find(([_refNodeId, nodeId]) => nodeId === edgeDataFromPortal.fromNode)) == null ? void 0 : _a[0];
      const toRefNode = (_b = Object.entries(portalNodeData.portalIdMaps.nodeIdMap).find(([_refNodeId, nodeId]) => nodeId === edgeDataFromPortal.toNode)) == null ? void 0 : _b[0];
      if (!fromRefNode || !toRefNode)
        continue;
      addedData.edges.push({
        ...edgeDataFromPortal,
        id: refEdgeId,
        fromNode: fromRefNode,
        toNode: toRefNode,
        portalId: portalNodeData.id
      });
    }
    const nestedNodesBBox = CanvasHelper.getBBox(addedData.nodes);
    const targetSize = this.getPortalSize(nestedNodesBBox);
    portalNodeData.closedPortalWidth = portalNodeData.width;
    portalNodeData.closedPortalHeight = portalNodeData.height;
    portalNodeData.width = targetSize.width;
    portalNodeData.height = targetSize.height;
    return addedData;
  }
  getPortalSize(sourceBBox) {
    const sourceSize = {
      width: sourceBBox.maxX - sourceBBox.minX,
      height: sourceBBox.maxY - sourceBBox.minY
    };
    const targetSize = {
      width: Math.max(sourceSize.width + PORTAL_PADDING * 2, MIN_OPEN_PORTAL_SIZE.width),
      height: Math.max(sourceSize.height + PORTAL_PADDING * 2, MIN_OPEN_PORTAL_SIZE.height)
    };
    if (!Number.isFinite(targetSize.width))
      targetSize.width = MIN_OPEN_PORTAL_SIZE.width;
    if (!Number.isFinite(targetSize.height))
      targetSize.height = MIN_OPEN_PORTAL_SIZE.height;
    return targetSize;
  }
};

// src/canvas-extensions/better-default-settings-canvas-extension.ts
var BetterDefaultSettingsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.modifyCanvasSettings(this.plugin.getCurrentCanvas());
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.modifyCanvasSettings(this.plugin.getCurrentCanvas())
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.modifyCanvasSettings(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DoubleClick,
      (canvas, event, preventDefault) => this.onDoubleClick(canvas, event, preventDefault)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeCreated,
      (canvas, node) => {
        this.enforceNodeGridAlignment(canvas, node);
        this.applyDefaultNodeStyles(canvas, node);
      }
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeCreated,
      (canvas, edge) => this.applyDefaultEdgeStyles(canvas, edge)
    ));
  }
  modifyCanvasSettings(canvas) {
    if (!canvas)
      return;
    canvas.config.defaultTextNodeDimensions = {
      width: this.plugin.settings.getSetting("defaultTextNodeWidth"),
      height: this.plugin.settings.getSetting("defaultTextNodeHeight")
    };
    canvas.config.defaultFileNodeDimensions = {
      width: this.plugin.settings.getSetting("defaultFileNodeWidth"),
      height: this.plugin.settings.getSetting("defaultFileNodeHeight")
    };
    canvas.config.minContainerDimension = this.plugin.settings.getSetting("minNodeSize");
  }
  async onDoubleClick(canvas, event, preventDefault) {
    if (event.defaultPrevented || event.target !== canvas.wrapperEl || canvas.isDragging || canvas.readonly)
      return;
    preventDefault.value = true;
    let pos = canvas.posFromEvt(event);
    switch (this.plugin.settings.getSetting("nodeTypeOnDoubleClick")) {
      case "file":
        const file = await new FileSelectModal(this.plugin.app, void 0, true).awaitInput();
        canvas.createFileNode({
          pos,
          position: "center",
          file
        });
        break;
      default:
        canvas.createTextNode({
          pos,
          position: "center"
        });
        break;
    }
  }
  enforceNodeGridAlignment(canvas, node) {
    if (!this.plugin.settings.getSetting("alignNewNodesToGrid"))
      return;
    const nodeData = node.getData();
    node.setData({
      ...nodeData,
      x: Math.round(nodeData.x / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE,
      y: Math.round(nodeData.y / CanvasHelper.GRID_SIZE) * CanvasHelper.GRID_SIZE
    });
  }
  applyDefaultNodeStyles(_canvas, node) {
    const nodeData = node.getData();
    if (nodeData.type !== "text")
      return;
    node.setData({
      ...nodeData,
      styleAttributes: {
        ...nodeData.styleAttributes,
        ...this.plugin.settings.getSetting("defaultTextNodeStyleAttributes")
      }
    });
  }
  async applyDefaultEdgeStyles(canvas, edge) {
    const edgeData = edge.getData();
    edge.setData({
      ...edgeData,
      styleAttributes: {
        ...edgeData.styleAttributes,
        ...this.plugin.settings.getSetting("defaultEdgeStyleAttributes")
      }
    });
    if (canvas.canvasEl.hasClass("is-connecting")) {
      await new Promise((resolve) => {
        new MutationObserver(() => {
          if (!canvas.canvasEl.hasClass("is-connecting"))
            resolve();
        }).observe(canvas.canvasEl, { attributes: true, attributeFilter: ["class"] });
      });
    }
    const lineDirection = this.plugin.settings.getSetting("defaultEdgeLineDirection");
    edge.setData({
      ...edge.getData(),
      fromEnd: lineDirection === "bidirectional" ? "arrow" : "none",
      toEnd: lineDirection === "nondirectional" ? "none" : "arrow"
    });
  }
};

// src/canvas-extensions/color-palette-canvas-extension.ts
var DEFAULT_COLORS_COUNT = 6;
var CUSTOM_COLORS_MOD_STYLES_ID = "mod-custom-colors";
var ColorPaletteCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.observer = null;
  }
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-open",
      (_win, _window) => this.updateCustomColorModStyleClasses()
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "css-change",
      () => this.updateCustomColorModStyleClasses()
    ));
    this.updateCustomColorModStyleClasses();
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.patchColorSelection(canvas)
    ));
    this.plugin.register(() => {
      var _a;
      return (_a = this.observer) == null ? void 0 : _a.disconnect();
    });
  }
  updateCustomColorModStyleClasses() {
    var _a;
    const customCss = this.getCustomColors().map((colorId) => `
      .mod-canvas-color-${colorId} {
        --canvas-color: var(--canvas-color-${colorId});
      }
    `).join("");
    for (const win of this.plugin.windowsManager.windows) {
      const doc = win.document;
      (_a = doc.getElementById(CUSTOM_COLORS_MOD_STYLES_ID)) == null ? void 0 : _a.remove();
      const customColorModStyle = doc.createElement("style");
      customColorModStyle.id = CUSTOM_COLORS_MOD_STYLES_ID;
      doc.head.appendChild(customColorModStyle);
      customColorModStyle.textContent = customCss;
    }
  }
  patchColorSelection(canvas) {
    if (this.observer)
      this.observer.disconnect();
    this.observer = new MutationObserver((mutations) => {
      const colorMenuOpened = mutations.some(
        (mutation) => Object.values(mutation.addedNodes).some(
          (node) => node instanceof HTMLElement && node.classList.contains("canvas-submenu") && Object.values(node.childNodes).some(
            (node2) => node2 instanceof HTMLElement && node2.classList.contains("canvas-color-picker-item")
          )
        )
      );
      if (!colorMenuOpened)
        return;
      const submenu = canvas.menu.menuEl.querySelector(".canvas-submenu");
      if (!submenu)
        return;
      const currentNodeColor = canvas.getSelectionData().nodes.map((node) => node.color).last();
      for (const colorId of this.getCustomColors()) {
        const customColorMenuItem = this.createColorMenuItem(canvas, colorId);
        if (currentNodeColor === colorId)
          customColorMenuItem.classList.add("is-active");
        submenu.insertBefore(customColorMenuItem, submenu.lastChild);
      }
    });
    this.observer.observe(canvas.menu.menuEl, { childList: true });
  }
  createColorMenuItem(canvas, colorId) {
    const menuItem = document.createElement("div");
    menuItem.classList.add("canvas-color-picker-item");
    menuItem.classList.add(`mod-canvas-color-${colorId}`);
    menuItem.addEventListener("click", () => {
      menuItem.classList.add("is-active");
      for (const item of canvas.selection) {
        item.setColor(colorId);
      }
      canvas.requestSave();
    });
    return menuItem;
  }
  getCustomColors() {
    const colors = [];
    while (true) {
      const colorId = (DEFAULT_COLORS_COUNT + colors.length + 1).toString();
      if (!getComputedStyle(document.body).getPropertyValue(`--canvas-color-${colorId}`))
        break;
      colors.push(colorId);
    }
    return colors;
  }
};

// src/canvas-extensions/collapsible-groups-canvas-extension.ts
var import_obsidian8 = require("obsidian");
var COLLAPSE_BUTTON_ID = "group-collapse-button";
var CollapsibleGroupsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "collapsibleGroupsFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (canvas, node) => this.onNodeChanged(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeBBoxRequested,
      (canvas, node, bbox) => this.onNodeBBoxRequested(canvas, node, bbox)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.OnCopy,
      (canvas, selectionData) => this.onCopy(canvas, selectionData)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DataRequested,
      (_canvas, data) => this.expandCollapsedNodes(data)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.LoadData,
      (_canvas, data, _setData) => this.collapseNodes(data)
    ));
  }
  onNodeChanged(canvas, groupNode) {
    var _a, _b;
    const groupNodeData = groupNode.getData();
    if (groupNodeData.type !== "group")
      return;
    (_a = groupNode.nodeEl) == null ? void 0 : _a.querySelectorAll(`#${COLLAPSE_BUTTON_ID}`).forEach((el) => el.remove());
    const collapseButton = document.createElement("span");
    collapseButton.id = COLLAPSE_BUTTON_ID;
    (0, import_obsidian8.setIcon)(collapseButton, groupNodeData.isCollapsed ? "plus-circle" : "minus-circle");
    collapseButton.onclick = () => {
      this.setCollapsed(canvas, groupNode, groupNode.getData().isCollapsed ? void 0 : true);
    };
    (_b = groupNode.labelEl) == null ? void 0 : _b.insertAdjacentElement("afterend", collapseButton);
  }
  onCopy(canvas, selectionData) {
    for (const collapsedGroupData of selectionData.nodes) {
      if (collapsedGroupData.type !== "group" || !collapsedGroupData.isCollapsed || !collapsedGroupData.collapsedData)
        continue;
      selectionData.nodes.push(...collapsedGroupData.collapsedData.nodes.map((nodeData) => ({
        ...nodeData,
        // Restore the relative position of the node to the group
        x: nodeData.x + collapsedGroupData.x,
        y: nodeData.y + collapsedGroupData.y
      })));
      selectionData.edges.push(...collapsedGroupData.collapsedData.edges);
    }
  }
  setCollapsed(canvas, groupNode, collapsed) {
    groupNode.setData({ ...groupNode.getData(), isCollapsed: collapsed });
    canvas.setData(canvas.getData());
    canvas.history.current--;
    canvas.pushHistory(canvas.getData());
  }
  onNodeBBoxRequested(_canvas, node, bbox) {
    var _a, _b;
    const nodeData = node.getData();
    if (nodeData.type !== "group" || !nodeData.isCollapsed)
      return;
    bbox.maxX = bbox.minX + ((_b = (_a = node.nodeEl) == null ? void 0 : _a.getBoundingClientRect().width) != null ? _b : 0);
    bbox.maxY = bbox.minY;
  }
  expandCollapsedNodes(data) {
    data.nodes = data.nodes.flatMap((groupNodeData) => {
      const collapsedData = groupNodeData.collapsedData;
      if (collapsedData === void 0)
        return [groupNodeData];
      groupNodeData.collapsedData = void 0;
      data.edges.push(...collapsedData.edges);
      return [groupNodeData, ...collapsedData.nodes.map((nodeData) => ({
        ...nodeData,
        // Restore the relative position of the node to the group
        x: nodeData.x + groupNodeData.x,
        y: nodeData.y + groupNodeData.y
      }))];
    });
  }
  collapseNodes(data) {
    data.nodes.forEach((groupNodeData) => {
      if (!groupNodeData.isCollapsed)
        return;
      const groupNodeBBox = CanvasHelper.getBBox([groupNodeData]);
      const containedNodesData = data.nodes.filter(
        (nodeData) => nodeData.id !== groupNodeData.id && BBoxHelper.insideBBox(CanvasHelper.getBBox([nodeData]), groupNodeBBox, false)
      );
      const containedEdgesData = data.edges.filter((edgeData) => {
        return containedNodesData.some((nodeData) => nodeData.id === edgeData.fromNode) || containedNodesData.some((nodeData) => nodeData.id === edgeData.toNode);
      });
      data.nodes = data.nodes.filter((nodeData) => !containedNodesData.includes(nodeData));
      data.edges = data.edges.filter((edgeData) => !containedEdgesData.includes(edgeData));
      groupNodeData.collapsedData = {
        nodes: containedNodesData.map((nodeData) => ({
          ...nodeData,
          // Store the relative position of the node to the group
          x: nodeData.x - groupNodeData.x,
          y: nodeData.y - groupNodeData.y
        })),
        edges: containedEdgesData
      };
    });
  }
};

// src/canvas-extensions/properties-canvas-extension.ts
var import_obsidian9 = require("obsidian");
var PropertiesCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.previousCssclasses = [];
  }
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.onCanvasChanged(canvas)
    ));
  }
  onCanvasChanged(canvas) {
    var _a;
    this.updateCssClasses(canvas);
    const settingsContainer = (_a = canvas.quickSettingsButton) == null ? void 0 : _a.parentElement;
    if (!settingsContainer)
      return;
    CanvasHelper.addControlMenuButton(
      settingsContainer,
      CanvasHelper.createControlMenuButton({
        id: "properties",
        label: "Properties",
        icon: "settings-2",
        callback: () => this.openPropertiesDialog(canvas)
      })
    );
  }
  updateCssClasses(canvas) {
    var _a, _b;
    this.previousCssclasses.forEach((cssclass) => {
      canvas.wrapperEl.classList.remove(cssclass);
    });
    this.previousCssclasses = ((_b = (_a = canvas.metadata) == null ? void 0 : _a.properties) == null ? void 0 : _b.cssclasses) || [];
    this.previousCssclasses.forEach((cssclass) => {
      canvas.wrapperEl.classList.add(cssclass);
    });
  }
  async openPropertiesDialog(canvas) {
    await new PropertiesModal(this.plugin.app, canvas).awaitDialog();
    this.updateCssClasses(canvas);
  }
};
var PropertiesModal = class extends import_obsidian9.Modal {
  constructor(app, canvas) {
    super(app);
    this.canvas = canvas;
  }
  onOpen() {
    new import_obsidian9.Setting(this.contentEl).setHeading().setName("Properties");
    new import_obsidian9.Setting(this.contentEl).setClass("properties-field").setName("cssclasses").setTooltip("Add classes to the canvas wrapper element. Separate multiple classes with spaces.").addText(
      (text) => {
        var _a, _b;
        return text.setValue((_b = (_a = this.canvas.metadata.properties) == null ? void 0 : _a.cssclasses) == null ? void 0 : _b.join(" ")).onChange((value) => {
          var _a2, _b2;
          this.canvas.metadata.properties = (_b2 = (_a2 = this.canvas.metadata) == null ? void 0 : _a2.properties) != null ? _b2 : {};
          this.canvas.metadata.properties.cssclasses = value.split(" ");
        });
      }
    );
  }
  onClose() {
  }
  awaitDialog() {
    return new Promise((resolve) => {
      this.onClose = () => {
        this.contentEl.empty();
        resolve();
      };
      this.open();
    });
  }
};

// src/canvas-extensions/focus-mode-canvas-extension.ts
var CONTROL_MENU_FOCUS_TOGGLE_ID = "focus-mode-toggle";
var FocusModeCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "focusModeFeatureEnabled";
  }
  init() {
    this.plugin.addCommand({
      id: "toggle-focus-mode",
      name: "Toggle Focus Mode",
      checkCallback: CanvasHelper.canvasCommand(
        this.plugin,
        (_canvas) => true,
        (canvas) => this.toggleFocusMode(canvas)
      )
    });
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.addControlMenuToggle(canvas)
    ));
  }
  addControlMenuToggle(canvas) {
    var _a;
    const settingsContainer = (_a = canvas.quickSettingsButton) == null ? void 0 : _a.parentElement;
    if (!settingsContainer)
      return;
    const controlMenuFocusToggle = CanvasHelper.createControlMenuButton({
      id: CONTROL_MENU_FOCUS_TOGGLE_ID,
      label: "Focus Mode",
      icon: "focus",
      callback: () => this.toggleFocusMode(canvas)
    });
    CanvasHelper.addControlMenuButton(settingsContainer, controlMenuFocusToggle);
  }
  toggleFocusMode(canvas) {
    var _a, _b;
    const controlMenuFocusToggle = (_b = (_a = canvas.quickSettingsButton) == null ? void 0 : _a.parentElement) == null ? void 0 : _b.querySelector(`#${CONTROL_MENU_FOCUS_TOGGLE_ID}`);
    if (!controlMenuFocusToggle)
      return;
    const newValue = controlMenuFocusToggle.dataset.toggled !== "true";
    canvas.wrapperEl.dataset.focusModeEnabled = newValue.toString();
    controlMenuFocusToggle.dataset.toggled = newValue.toString();
  }
};

// src/canvas-extensions/advanced-styles/node-styles.ts
var NodeStylesExtension = class extends CanvasExtension {
  isEnabled() {
    return "nodeStylingFeatureEnabled";
  }
  init() {
    this.allNodeStyles = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customNodeStyleAttributes")];
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.allNodeStyles = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customNodeStyleAttributes")]
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
  }
  onPopupMenuCreated(canvas) {
    var _a;
    const selectionNodeData = canvas.getSelectionData().nodes;
    if (canvas.readonly || selectionNodeData.length === 0 || selectionNodeData.length !== canvas.selection.size)
      return;
    const selectedNodeTypes = new Set(selectionNodeData.map((node) => node.type));
    const availableNodeStyles = this.allNodeStyles.filter((style) => !style.nodeTypes || style.nodeTypes.some((type) => selectedNodeTypes.has(type)));
    CanvasHelper.addStyleAttributesToPopup(
      this.plugin,
      canvas,
      availableNodeStyles,
      (_a = selectionNodeData[0].styleAttributes) != null ? _a : {},
      (attribute, value) => this.setStyleAttributeForSelection(canvas, attribute, value)
    );
  }
  setStyleAttributeForSelection(canvas, attribute, value) {
    const selectionNodeData = canvas.getSelectionData().nodes;
    for (const nodeData of selectionNodeData) {
      const node = canvas.nodes.get(nodeData.id);
      if (!node)
        continue;
      if (attribute.nodeTypes && !attribute.nodeTypes.includes(nodeData.type))
        continue;
      node.setData({
        ...nodeData,
        styleAttributes: {
          ...nodeData.styleAttributes,
          [attribute.datasetKey]: value
        }
      });
    }
    canvas.pushHistory(canvas.getData());
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/edge-pathfinding-method.ts
var EdgePathfindingMethod = class {
};

// src/utils/svg-path-helper.ts
var SvgPathHelper = class {
  static pathArrayToSvgPath(positions, rounded = false) {
    const tension = 0.2;
    let newPositions = [...positions];
    if (rounded && positions.length > 2) {
      newPositions = [positions[0]];
      for (let i = 1; i < positions.length - 2; i++) {
        const p1 = positions[i];
        const p2 = positions[i + 1];
        const p3 = positions[i + 2];
        const t1 = (1 - tension) / 2;
        const t2 = 1 - t1;
        const x = t2 * t2 * t2 * p1.x + 3 * t2 * t2 * t1 * p2.x + 3 * t2 * t1 * t1 * p3.x + t1 * t1 * t1 * p2.x;
        const y = t2 * t2 * t2 * p1.y + 3 * t2 * t2 * t1 * p2.y + 3 * t2 * t1 * t1 * p3.y + t1 * t1 * t1 * p2.y;
        newPositions.push({ x, y });
      }
      const lastPoint = positions[positions.length - 1];
      newPositions.push(lastPoint);
    }
    for (let i = 0; i < newPositions.length - 2; i++) {
      const p1 = newPositions[i];
      const p2 = newPositions[i + 1];
      const p3 = newPositions[i + 2];
      const currentDirection = {
        x: p2.x - p1.x,
        y: p2.y - p1.y
      };
      const nextDirection = {
        x: p3.x - p2.x,
        y: p3.y - p2.y
      };
      if (currentDirection.x !== nextDirection.x && currentDirection.y !== nextDirection.y)
        continue;
      newPositions.splice(i + 1, 1);
      i--;
    }
    return newPositions.map(
      (position, index) => `${index === 0 ? "M" : "L"} ${position.x} ${position.y}`
    ).join(" ");
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/pathfinding-direct.ts
var EdgePathfindingDirect = class extends EdgePathfindingMethod {
  getPath(_plugin, _canvas, fromPos, _fromBBoxSidePos, _fromSide, toPos, _toBBoxSidePos, _toSide, _isDragging) {
    return {
      svgPath: SvgPathHelper.pathArrayToSvgPath([fromPos, toPos], false),
      center: {
        x: (fromPos.x + toPos.x) / 2,
        y: (fromPos.y + toPos.y) / 2
      },
      rotateArrows: true
    };
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/pathfinding-square.ts
var EdgePathfindingSquare = class extends EdgePathfindingMethod {
  getPath(_plugin, _canvas, fromPos, fromBBoxSidePos, fromSide, toPos, toBBoxSidePos, toSide, _isDragging) {
    let pathArray = [];
    let center = { x: 0, y: 0 };
    if (fromSide === toSide) {
      const direction = BBoxHelper.direction(fromSide);
      if (BBoxHelper.isHorizontal(fromSide)) {
        pathArray = [
          fromPos,
          { x: Math.max(fromBBoxSidePos.x, toBBoxSidePos.x) + direction * CanvasHelper.GRID_SIZE, y: fromBBoxSidePos.y },
          { x: Math.max(fromBBoxSidePos.x, toBBoxSidePos.x) + direction * CanvasHelper.GRID_SIZE, y: toBBoxSidePos.y },
          toPos
        ];
      } else {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x, y: Math.max(fromBBoxSidePos.y, toBBoxSidePos.y) + direction * CanvasHelper.GRID_SIZE },
          { x: toBBoxSidePos.x, y: Math.max(fromBBoxSidePos.y, toBBoxSidePos.y) + direction * CanvasHelper.GRID_SIZE },
          toPos
        ];
      }
      center = {
        x: (pathArray[1].x + pathArray[2].x) / 2,
        y: (pathArray[1].y + pathArray[2].y) / 2
      };
    } else if (BBoxHelper.isHorizontal(fromSide) === BBoxHelper.isHorizontal(toSide)) {
      if (BBoxHelper.isHorizontal(fromSide)) {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x + (toBBoxSidePos.x - fromBBoxSidePos.x) / 2, y: fromBBoxSidePos.y },
          { x: fromBBoxSidePos.x + (toBBoxSidePos.x - fromBBoxSidePos.x) / 2, y: toBBoxSidePos.y },
          toPos
        ];
      } else {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x, y: fromBBoxSidePos.y + (toBBoxSidePos.y - fromBBoxSidePos.y) / 2 },
          { x: toBBoxSidePos.x, y: fromBBoxSidePos.y + (toBBoxSidePos.y - fromBBoxSidePos.y) / 2 },
          toPos
        ];
      }
      center = {
        x: (fromBBoxSidePos.x + toBBoxSidePos.x) / 2,
        y: (fromBBoxSidePos.y + toBBoxSidePos.y) / 2
      };
    } else {
      if (BBoxHelper.isHorizontal(fromSide)) {
        pathArray = [
          fromPos,
          { x: toBBoxSidePos.x, y: fromBBoxSidePos.y },
          toPos
        ];
      } else {
        pathArray = [
          fromPos,
          { x: fromBBoxSidePos.x, y: toBBoxSidePos.y },
          toPos
        ];
      }
      center = {
        x: pathArray[1].x,
        y: pathArray[1].y
      };
    }
    return {
      svgPath: SvgPathHelper.pathArrayToSvgPath(pathArray, false),
      center,
      rotateArrows: false
    };
  }
};

// src/canvas-extensions/advanced-styles/edge-pathfinding-methods/pathfinding-a-star.ts
var DIRECTIONS2 = [
  { dx: 1, dy: 0 },
  { dx: -1, dy: 0 },
  { dx: 0, dy: 1 },
  { dx: 0, dy: -1 },
  { dx: 1, dy: 1 },
  { dx: -1, dy: 1 },
  { dx: 1, dy: -1 },
  { dx: -1, dy: -1 }
];
var DIAGONAL_COST = Math.sqrt(2);
var Node = class {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.gCost = 0;
    this.hCost = 0;
    this.fCost = 0;
    this.parent = null;
  }
  // Only check for x and y, not gCost, hCost, fCost, or parent
  inList(nodes) {
    return nodes.some((n) => n.x === this.x && n.y === this.y);
  }
};
var EdgePathfindingAStar = class extends EdgePathfindingMethod {
  getPath(plugin, canvas, fromPos, _fromBBoxSidePos, fromSide, toPos, _toBBoxSidePos, toSide, isDragging) {
    if (isDragging && !plugin.settings.getSetting("edgeStylePathfinderPathLiveUpdate"))
      return null;
    const nodeBBoxes = [...canvas.nodes.values()].filter((node) => {
      const nodeData = node.getData();
      const isGroup = nodeData.type === "group";
      const isOpenPortal = nodeData.portalToFile !== void 0;
      return !isGroup && !isOpenPortal;
    }).map((node) => node.getBBox());
    const fromPosWithMargin = BBoxHelper.moveInDirection(fromPos, fromSide, 10);
    const toPosWithMargin = BBoxHelper.moveInDirection(toPos, toSide, 10);
    const gridResolution = plugin.settings.getSetting("edgeStylePathfinderGridResolution");
    const pathArray = this.aStarAlgorithm(fromPosWithMargin, fromSide, toPosWithMargin, toSide, nodeBBoxes, gridResolution);
    if (!pathArray)
      return null;
    pathArray.splice(0, 0, fromPos);
    pathArray.splice(pathArray.length, 0, toPos);
    const roundedPath = plugin.settings.getSetting("edgeStylePathfinderPathRounded");
    const svgPath = SvgPathHelper.pathArrayToSvgPath(pathArray, roundedPath);
    return {
      svgPath,
      center: pathArray[Math.floor(pathArray.length / 2)],
      rotateArrows: false
    };
  }
  aStarAlgorithm(fromPos, fromSide, toPos, toSide, obstacles, gridResolution) {
    const start = new Node(
      Math.floor(fromPos.x / gridResolution) * gridResolution,
      Math.floor(fromPos.y / gridResolution) * gridResolution
    );
    if (fromSide === "right" && fromPos.x !== start.x)
      start.x += gridResolution;
    if (fromSide === "bottom" && fromPos.y !== start.y)
      start.y += gridResolution;
    const end = new Node(
      Math.floor(toPos.x / gridResolution) * gridResolution,
      Math.floor(toPos.y / gridResolution) * gridResolution
    );
    if (toSide === "right" && toPos.x !== end.x)
      end.x += gridResolution;
    if (toSide === "bottom" && toPos.y !== end.y)
      end.y += gridResolution;
    if (this.isInsideObstacle(start, obstacles) || this.isInsideObstacle(end, obstacles))
      return null;
    const openSet = [start];
    const closedSet = [];
    while (openSet.length > 0) {
      let current = null;
      let lowestFCost = Infinity;
      for (const node of openSet) {
        if (node.fCost < lowestFCost) {
          current = node;
          lowestFCost = node.fCost;
        }
      }
      if (!current)
        return null;
      openSet.splice(openSet.indexOf(current), 1);
      closedSet.push(current);
      if (current.x === end.x && current.y === end.y) {
        return [fromPos, ...this.reconstructPath(current), toPos].map((node) => ({ x: node.x, y: node.y }));
      }
      if (!(current.x === start.x && current.y === start.y) && this.isTouchingObstacle(current, obstacles))
        continue;
      for (const neighbor of this.getPossibleNeighbors(current, obstacles, gridResolution)) {
        if (neighbor.inList(closedSet))
          continue;
        const tentativeGCost = current.gCost + this.getMovementCost({
          dx: neighbor.x - current.x,
          dy: neighbor.y - current.y
        });
        if (!neighbor.inList(openSet) || tentativeGCost < neighbor.gCost) {
          neighbor.parent = current;
          neighbor.gCost = tentativeGCost;
          neighbor.hCost = this.heuristic(neighbor, end);
          neighbor.fCost = neighbor.gCost + neighbor.hCost;
          openSet.push(neighbor);
        }
      }
    }
    return null;
  }
  // Manhattan distance
  heuristic(node, end) {
    return Math.abs(node.x - end.x) + Math.abs(node.y - end.y);
  }
  // Define a function to check if a position isn't inside any obstacle
  isTouchingObstacle(node, obstacles) {
    return obstacles.some((obstacle) => BBoxHelper.insideBBox(node, obstacle, true));
  }
  isInsideObstacle(node, obstacles) {
    return obstacles.some((obstacle) => BBoxHelper.insideBBox(node, obstacle, false));
  }
  // Define a function to calculate movement cost based on direction
  getMovementCost(direction) {
    return direction.dx !== 0 && direction.dy !== 0 ? DIAGONAL_COST : 1;
  }
  getPossibleNeighbors(node, obstacles, gridResolution) {
    const neighbors = [];
    for (const direction of DIRECTIONS2) {
      const neighbor = new Node(
        node.x + direction.dx * gridResolution,
        node.y + direction.dy * gridResolution
      );
      neighbor.gCost = node.gCost + this.getMovementCost(direction);
      if (this.isInsideObstacle(neighbor, obstacles))
        continue;
      neighbors.push(neighbor);
    }
    return neighbors;
  }
  reconstructPath(node) {
    const path = [];
    while (node) {
      path.push(node);
      node = node.parent;
    }
    return path.reverse();
  }
};

// src/canvas-extensions/advanced-styles/edge-styles.ts
var EDGE_PATHFINDING_METHODS = {
  "direct": EdgePathfindingDirect,
  "square": EdgePathfindingSquare,
  "a-star": EdgePathfindingAStar
};
var EdgeStylesExtension = class extends CanvasExtension {
  isEnabled() {
    return "edgesStylingFeatureEnabled";
  }
  init() {
    this.allEdgeStyleAttributes = [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customEdgeStyleAttributes")];
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.allEdgeStyleAttributes = [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customEdgeStyleAttributes")]
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (canvas, edge) => this.onEdgeChanged(canvas, edge)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeCenterRequested,
      (canvas, edge, center) => this.onEdgeCenterRequested(canvas, edge, center)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeAdded,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeRemoved,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, isDragging) => {
        if (isDragging)
          return;
        this.updateAllEdges(canvas);
      }
    ));
  }
  onPopupMenuCreated(canvas) {
    var _a;
    const selectedEdges = [...canvas.selection].filter((item) => item.path !== void 0);
    if (canvas.readonly || selectedEdges.length === 0 || selectedEdges.length !== canvas.selection.size)
      return;
    CanvasHelper.addStyleAttributesToPopup(
      this.plugin,
      canvas,
      this.allEdgeStyleAttributes,
      (_a = selectedEdges[0].getData().styleAttributes) != null ? _a : {},
      (attribute, value) => this.setStyleAttributeForSelection(canvas, attribute, value)
    );
  }
  setStyleAttributeForSelection(canvas, attribute, value) {
    const selectedEdges = [...canvas.selection].filter((item) => item.path !== void 0);
    for (const edge of selectedEdges) {
      const edgeData = edge.getData();
      edge.setData({
        ...edgeData,
        styleAttributes: {
          ...edgeData.styleAttributes,
          [attribute.datasetKey]: value
        }
      });
    }
    canvas.pushHistory(canvas.getData());
  }
  updateAllEdges(canvas) {
    for (const edge of canvas.edges.values()) {
      this.onEdgeChanged(canvas, edge);
    }
  }
  onEdgeChanged(canvas, edge) {
    var _a, _b, _c, _d, _e, _f, _g;
    const edgeData = edge.getData();
    if (!edge.bezier)
      return;
    edge.center = void 0;
    edge.updatePath();
    const pathfindingMethod = (_a = edgeData.styleAttributes) == null ? void 0 : _a.pathfindingMethod;
    if (pathfindingMethod) {
      const fromBBoxSidePos = BBoxHelper.getCenterOfBBoxSide(edge.from.node.getBBox(), edge.from.side);
      const fromPos = edge.from.end === "none" ? fromBBoxSidePos : edge.bezier.from;
      const toBBoxSidePos = BBoxHelper.getCenterOfBBoxSide(edge.to.node.getBBox(), edge.to.side);
      const toPos = edge.to.end === "none" ? toBBoxSidePos : edge.bezier.to;
      const path = new EDGE_PATHFINDING_METHODS[pathfindingMethod]().getPath(this.plugin, canvas, fromPos, fromBBoxSidePos, edge.from.side, toPos, toBBoxSidePos, edge.to.side, canvas.isDragging);
      if (!path)
        return;
      edge.center = path.center;
      edge.path.interaction.setAttr("d", path == null ? void 0 : path.svgPath);
      edge.path.display.setAttr("d", path == null ? void 0 : path.svgPath);
    }
    (_b = edge.labelElement) == null ? void 0 : _b.render();
    const arrowPolygonPoints = this.getArrowPolygonPoints((_c = edgeData.styleAttributes) == null ? void 0 : _c.arrow);
    if ((_d = edge.fromLineEnd) == null ? void 0 : _d.el)
      (_e = edge.fromLineEnd.el.querySelector("polygon")) == null ? void 0 : _e.setAttribute("points", arrowPolygonPoints);
    if ((_f = edge.toLineEnd) == null ? void 0 : _f.el)
      (_g = edge.toLineEnd.el.querySelector("polygon")) == null ? void 0 : _g.setAttribute("points", arrowPolygonPoints);
    if (this.plugin.settings.getSetting("edgeStyleDirectRotateArrow")) {
      this.rotateArrows(edge, pathfindingMethod);
    }
  }
  onEdgeCenterRequested(_canvas, edge, center) {
    var _a, _b, _c, _d;
    center.x = (_b = (_a = edge.center) == null ? void 0 : _a.x) != null ? _b : center.x;
    center.y = (_d = (_c = edge.center) == null ? void 0 : _c.y) != null ? _d : center.y;
  }
  getArrowPolygonPoints(arrowStyle) {
    if (arrowStyle === "halved-triangle")
      return `-2,0 7.5,12 -2,12`;
    else if (arrowStyle === "thin-triangle")
      return `0,0 7,10 0,0 0,10 0,0 -7,10`;
    else if (arrowStyle === "diamond" || arrowStyle === "diamond-outline")
      return `0,0 5,10 0,20 -5,10`;
    else if (arrowStyle === "circle" || arrowStyle === "circle-outline")
      return `0 0, 4.95 1.8, 7.5 6.45, 6.6 11.7, 2.7 15, -2.7 15, -6.6 11.7, -7.5 6.45, -4.95 1.8`;
    else
      return `0,0 6.5,10.4 -6.5,10.4`;
  }
  rotateArrows(edge, pathRouteType) {
    var _a, _b, _c, _d;
    if (pathRouteType !== "direct") {
      if ((_a = edge.fromLineEnd) == null ? void 0 : _a.el)
        edge.fromLineEnd.el.style.translate = "";
      if ((_b = edge.toLineEnd) == null ? void 0 : _b.el)
        edge.toLineEnd.el.style.translate = "";
      return;
    }
    const setArrowRotation = (element, side, rotation) => {
      element.style.transform = element.style.transform.replace(/rotate\([-\d]+(deg|rad)\)/g, `rotate(${rotation}rad)`);
      const offset = BBoxHelper.getSideVector(side);
      element.style.translate = `${offset.x * 7}px ${offset.y * -7}px`;
    };
    const edgeRotation = Math.atan2(edge.bezier.to.y - edge.bezier.from.y, edge.bezier.to.x - edge.bezier.from.x) - Math.PI / 2;
    if ((_c = edge.fromLineEnd) == null ? void 0 : _c.el)
      setArrowRotation(edge.fromLineEnd.el, edge.from.side, edgeRotation);
    if ((_d = edge.toLineEnd) == null ? void 0 : _d.el)
      setArrowRotation(edge.toLineEnd.el, edge.to.side, edgeRotation - Math.PI);
  }
};

// src/canvas-extensions/dataset-exposers/node-exposer.ts
function getExposedNodeData(settings) {
  const exposedData = [];
  if (settings.getSetting("nodeStylingFeatureEnabled"))
    exposedData.push("styleAttributes");
  if (settings.getSetting("collapsibleGroupsFeatureEnabled"))
    exposedData.push("isCollapsed");
  if (settings.getSetting("presentationFeatureEnabled"))
    exposedData.push("isStartNode");
  if (settings.getSetting("portalsFeatureEnabled"))
    exposedData.push("portalToFile", "portalId");
  return exposedData;
}
var NodeExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (_canvas, node) => {
        const nodeData = node == null ? void 0 : node.getData();
        if (!nodeData)
          return;
        for (const exposedDataKey of getExposedNodeData(this.plugin.settings)) {
          const datasetPairs = nodeData[exposedDataKey] instanceof Object ? Object.entries(nodeData[exposedDataKey]) : [[exposedDataKey, nodeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            if (!value)
              delete node.nodeEl.dataset[key];
            else
              node.nodeEl.dataset[key] = value;
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/node-interaction-exposer.ts
var TARGET_NODE_DATASET_PREFIX = "target";
var NodeInteractionExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeInteraction,
      (canvas, node) => {
        const nodeData = node == null ? void 0 : node.getData();
        if (!nodeData)
          return;
        const interactionEl = canvas.nodeInteractionLayer.interactionEl;
        if (!interactionEl)
          return;
        for (const exposedDataKey of getExposedNodeData(this.plugin.settings)) {
          const datasetPairs = nodeData[exposedDataKey] instanceof Object ? Object.entries(nodeData[exposedDataKey]) : [[exposedDataKey, nodeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            const modifiedKey = TARGET_NODE_DATASET_PREFIX + key.toString().charAt(0).toUpperCase() + key.toString().slice(1);
            if (!value)
              delete interactionEl.dataset[modifiedKey];
            else
              interactionEl.dataset[modifiedKey] = value;
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/edge-exposer.ts
function getExposedEdgeData(settings) {
  const exposedData = [];
  if (settings.getSetting("edgesStylingFeatureEnabled"))
    exposedData.push("styleAttributes");
  return exposedData;
}
var EdgeExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (_canvas, edge) => {
        var _a, _b, _c, _d;
        const edgeData = edge == null ? void 0 : edge.getData();
        if (!edgeData)
          return;
        for (const exposedDataKey of getExposedEdgeData(this.plugin.settings)) {
          const datasetPairs = edgeData[exposedDataKey] instanceof Object ? Object.entries(edgeData[exposedDataKey]) : [[exposedDataKey, edgeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            if (!value) {
              delete edge.path.display.dataset[key];
              if ((_a = edge.fromLineEnd) == null ? void 0 : _a.el)
                delete edge.fromLineEnd.el.dataset[key];
              if ((_b = edge.toLineEnd) == null ? void 0 : _b.el)
                delete edge.toLineEnd.el.dataset[key];
            } else {
              edge.path.display.dataset[key] = value;
              if ((_c = edge.fromLineEnd) == null ? void 0 : _c.el)
                edge.fromLineEnd.el.dataset[key] = value;
              if ((_d = edge.toLineEnd) == null ? void 0 : _d.el)
                edge.toLineEnd.el.dataset[key] = value;
            }
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/canvas-wrapper-exposer.ts
var EXPOSED_SETTINGS = [
  "disableFontSizeRelativeToZoom",
  "collapsibleGroupsFeatureEnabled",
  "collapsedGroupPreviewOnDrag"
];
var CanvasWrapperExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.updateExposedSettings(this.plugin.getCurrentCanvas())
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.updateExposedSettings(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, dragging) => {
        if (dragging)
          canvas.wrapperEl.dataset.isDragging = "true";
        else
          delete canvas.wrapperEl.dataset.isDragging;
      }
    ));
  }
  updateExposedSettings(canvas) {
    if (!canvas)
      return;
    for (const setting of EXPOSED_SETTINGS) {
      canvas.wrapperEl.dataset[setting] = this.plugin.settings.getSetting(setting).toString();
    }
  }
};

// src/utils/migration-helper.ts
var MigrationHelper = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async migrate() {
    this.migrateNodeAndEdgeStyles();
  }
  migrateNodeAndEdgeStyles() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => {
        for (const node of canvas.nodes.values()) {
          const nodeData = node.getData();
          const newStyleAttributes = {};
          if (nodeData.isSticker)
            newStyleAttributes["border"] = "invisible";
          if (nodeData.borderStyle)
            newStyleAttributes["border"] = nodeData.borderStyle;
          if (nodeData.shape) {
            newStyleAttributes.textAlign = "center";
            newStyleAttributes.shape = nodeData.shape;
            if ((newStyleAttributes == null ? void 0 : newStyleAttributes.shape) === "centered-rectangle")
              delete newStyleAttributes.shape;
            if ((newStyleAttributes == null ? void 0 : newStyleAttributes.shape) === "oval")
              newStyleAttributes.shape = "pill";
          }
          delete nodeData.isSticker;
          delete nodeData.borderStyle;
          delete nodeData.shape;
          node.setData({
            ...nodeData,
            styleAttributes: {
              ...nodeData.styleAttributes,
              ...newStyleAttributes
            }
          });
        }
        for (const edge of canvas.edges.values()) {
          const edgeData = edge.getData();
          const newStyleAttributes = {};
          if (edgeData.edgeStyle)
            newStyleAttributes.edge = edgeData.edgeStyle;
          if (edgeData.edgePathRoute)
            newStyleAttributes.pathfindingMethod = edgeData.edgePathRoute;
          delete edgeData.edgeStyle;
          delete edgeData.edgePathRoute;
        }
      }
    ));
  }
};

// src/main.ts
var CANVAS_EXTENSIONS = [
  // Dataset Exposers
  CanvasWrapperExposerExtension,
  NodeExposerExtension,
  EdgeExposerExtension,
  NodeInteractionExposerExtension,
  // Advanced Styles
  NodeStylesExtension,
  EdgeStylesExtension,
  // Basic Extensions
  BetterDefaultSettingsCanvasExtension,
  CommandsCanvasExtension,
  BetterReadonlyCanvasExtension,
  AutoResizeNodeCanvasExtension,
  PropertiesCanvasExtension,
  GroupCanvasExtension,
  // More Advanced Extensions
  CollapsibleGroupsCanvasExtension,
  FocusModeCanvasExtension,
  EncapsulateCanvasExtension,
  ColorPaletteCanvasExtension,
  PresentationCanvasExtension,
  PortalsCanvasExtension
];
var AdvancedCanvasPlugin = class extends import_obsidian10.Plugin {
  async onload() {
    this.migrationHelper = new MigrationHelper(this);
    await this.migrationHelper.migrate();
    IconsHelper.addIcons();
    this.settings = new SettingsManager(this);
    await this.settings.loadSettings();
    this.settings.addSettingsTab();
    this.windowsManager = new WindowsManager(this);
    this.canvasPatcher = new CanvasPatcher(this);
    this.canvasExtensions = CANVAS_EXTENSIONS.map((Extension) => new Extension(this));
  }
  onunload() {
  }
  getCurrentCanvasView() {
    const canvasView = this.app.workspace.getActiveViewOfType(import_obsidian10.ItemView);
    if ((canvasView == null ? void 0 : canvasView.getViewType()) !== "canvas")
      return null;
    return canvasView;
  }
  getCurrentCanvas() {
    var _a;
    return ((_a = this.getCurrentCanvasView()) == null ? void 0 : _a.canvas) || null;
  }
  createFileSnapshot(path, content) {
    var _a;
    const fileRecoveryPlugin = (_a = this.app.internalPlugins.plugins["file-recovery"]) == null ? void 0 : _a.instance;
    if (!fileRecoveryPlugin)
      return;
    fileRecoveryPlugin.forceAdd(path, content);
  }
  // this.app.plugins.plugins["advanced-canvas"].enableDebugMode()
  enableDebugMode() {
    if (this.debugHelper)
      return;
    this.debugHelper = new DebugHelper(this);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAibm9kZV9tb2R1bGVzL21vbmtleS1hcm91bmQvbWpzL2luZGV4LmpzIiwgInNyYy91dGlscy9wYXRjaC1oZWxwZXIudHMiLCAic3JjL2NvcmUvZXZlbnRzLnRzIiwgInNyYy9jb3JlL2NhbnZhcy1wYXRjaGVyLnRzIiwgIm5vZGVfbW9kdWxlcy90aW55LWpzb25jL2Rpc3QvaW5kZXguanMiLCAic3JjL3V0aWxzL2ljb25zLWhlbHBlci50cyIsICJzcmMvdXRpbHMvZGVidWctaGVscGVyLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL3N0eWxlLWNvbmZpZy50cyIsICJzcmMvd2luZG93cy1tYW5hZ2VyLnRzIiwgInNyYy91dGlscy9jYW52YXMtaGVscGVyLnRzIiwgInNyYy91dGlscy9iYm94LWhlbHBlci50cyIsICJzcmMvY29yZS9jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9ncm91cC1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9wcmVzZW50YXRpb24tY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYmV0dGVyLXJlYWRvbmx5LWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL3V0aWxzL21vZGFsLWhlbHBlci50cyIsICJzcmMvdXRpbHMvcGF0aC1oZWxwZXIudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2VuY2Fwc3VsYXRlLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2NvbW1hbmRzLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2F1dG8tcmVzaXplLW5vZGUtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvcG9ydGFscy1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9iZXR0ZXItZGVmYXVsdC1zZXR0aW5ncy1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9jb2xvci1wYWxldHRlLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2NvbGxhcHNpYmxlLWdyb3Vwcy1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9wcm9wZXJ0aWVzLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2ZvY3VzLW1vZGUtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL25vZGUtc3R5bGVzLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9hZHZhbmNlZC1zdHlsZXMvZWRnZS1wYXRoZmluZGluZy1tZXRob2RzL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kLnRzIiwgInNyYy91dGlscy9zdmctcGF0aC1oZWxwZXIudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZHMvcGF0aGZpbmRpbmctZGlyZWN0LnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9hZHZhbmNlZC1zdHlsZXMvZWRnZS1wYXRoZmluZGluZy1tZXRob2RzL3BhdGhmaW5kaW5nLXNxdWFyZS50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kcy9wYXRoZmluZGluZy1hLXN0YXIudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9lZGdlLXN0eWxlcy50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvZGF0YXNldC1leHBvc2Vycy9ub2RlLWV4cG9zZXIudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvbm9kZS1pbnRlcmFjdGlvbi1leHBvc2VyLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL2VkZ2UtZXhwb3Nlci50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvZGF0YXNldC1leHBvc2Vycy9jYW52YXMtd3JhcHBlci1leHBvc2VyLnRzIiwgInNyYy91dGlscy9taWdyYXRpb24taGVscGVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBJdGVtVmlldywgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nXHJcbmltcG9ydCBDYW52YXNQYXRjaGVyIGZyb20gJy4vY29yZS9jYW52YXMtcGF0Y2hlcidcclxuaW1wb3J0IHsgQ2FudmFzLCBDYW52YXNWaWV3IH0gZnJvbSAnLi9AdHlwZXMvQ2FudmFzJ1xyXG5cclxuLy8gVXRpbHNcclxuaW1wb3J0IEljb25zSGVscGVyIGZyb20gJy4vdXRpbHMvaWNvbnMtaGVscGVyJ1xyXG5pbXBvcnQgRGVidWdIZWxwZXIgZnJvbSAnLi91dGlscy9kZWJ1Zy1oZWxwZXInXHJcblxyXG4vLyBNYW5hZ2Vyc1xyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyIGZyb20gJy4vc2V0dGluZ3MnXHJcbmltcG9ydCBXaW5kb3dzTWFuYWdlciBmcm9tICcuL3dpbmRvd3MtbWFuYWdlcidcclxuXHJcbi8vIENhbnZhcyBFeHRlbnNpb25zXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jb3JlL2NhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBHcm91cENhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2dyb3VwLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBQcmVzZW50YXRpb25DYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9wcmVzZW50YXRpb24tY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IEJldHRlclJlYWRvbmx5Q2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvYmV0dGVyLXJlYWRvbmx5LWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBFbmNhcHN1bGF0ZUNhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2VuY2Fwc3VsYXRlLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBDb21tYW5kc0NhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2NvbW1hbmRzLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBBdXRvUmVzaXplTm9kZUNhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2F1dG8tcmVzaXplLW5vZGUtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IFBvcnRhbHNDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9wb3J0YWxzLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBCZXR0ZXJEZWZhdWx0U2V0dGluZ3NDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9iZXR0ZXItZGVmYXVsdC1zZXR0aW5ncy1jYW52YXMtZXh0ZW5zaW9uJ1xyXG5pbXBvcnQgQ29sb3JQYWxldHRlQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvY29sb3ItcGFsZXR0ZS1jYW52YXMtZXh0ZW5zaW9uJ1xyXG5pbXBvcnQgQ29sbGFwc2libGVHcm91cHNDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9jb2xsYXBzaWJsZS1ncm91cHMtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IFByb3BlcnRpZXNDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9wcm9wZXJ0aWVzLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBGb2N1c01vZGVDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9mb2N1cy1tb2RlLWNhbnZhcy1leHRlbnNpb24nXHJcblxyXG4vLyBBZHZhbmNlZCBTdHlsZXNcclxuaW1wb3J0IE5vZGVTdHlsZXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9hZHZhbmNlZC1zdHlsZXMvbm9kZS1zdHlsZXMnXHJcbmltcG9ydCBFZGdlU3R5bGVzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL2VkZ2Utc3R5bGVzJ1xyXG5cclxuLy8gRGF0YXNldCBFeHBvc2Vyc1xyXG5pbXBvcnQgTm9kZUludGVyYWN0aW9uRXhwb3NlckV4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvbm9kZS1pbnRlcmFjdGlvbi1leHBvc2VyJ1xyXG5pbXBvcnQgTm9kZUV4cG9zZXJFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL25vZGUtZXhwb3NlcidcclxuaW1wb3J0IEVkZ2VFeHBvc2VyRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvZGF0YXNldC1leHBvc2Vycy9lZGdlLWV4cG9zZXInXHJcbmltcG9ydCBDYW52YXNXcmFwcGVyRXhwb3NlckV4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvY2FudmFzLXdyYXBwZXItZXhwb3NlcidcclxuaW1wb3J0IE1pZ3JhdGlvbkhlbHBlciBmcm9tICcuL3V0aWxzL21pZ3JhdGlvbi1oZWxwZXInXHJcblxyXG5jb25zdCBDQU5WQVNfRVhURU5TSU9OUzogdHlwZW9mIENhbnZhc0V4dGVuc2lvbltdID0gW1xyXG4gIC8vIERhdGFzZXQgRXhwb3NlcnNcclxuICBDYW52YXNXcmFwcGVyRXhwb3NlckV4dGVuc2lvbixcclxuICBOb2RlRXhwb3NlckV4dGVuc2lvbixcclxuICBFZGdlRXhwb3NlckV4dGVuc2lvbixcclxuICBOb2RlSW50ZXJhY3Rpb25FeHBvc2VyRXh0ZW5zaW9uLFxyXG5cclxuICAvLyBBZHZhbmNlZCBTdHlsZXNcclxuICBOb2RlU3R5bGVzRXh0ZW5zaW9uLFxyXG4gIEVkZ2VTdHlsZXNFeHRlbnNpb24sXHJcblxyXG4gIC8vIEJhc2ljIEV4dGVuc2lvbnNcclxuICBCZXR0ZXJEZWZhdWx0U2V0dGluZ3NDYW52YXNFeHRlbnNpb24sXHJcbiAgQ29tbWFuZHNDYW52YXNFeHRlbnNpb24sXHJcbiAgQmV0dGVyUmVhZG9ubHlDYW52YXNFeHRlbnNpb24sXHJcbiAgQXV0b1Jlc2l6ZU5vZGVDYW52YXNFeHRlbnNpb24sXHJcbiAgUHJvcGVydGllc0NhbnZhc0V4dGVuc2lvbixcclxuICBHcm91cENhbnZhc0V4dGVuc2lvbixcclxuXHJcbiAgLy8gTW9yZSBBZHZhbmNlZCBFeHRlbnNpb25zXHJcbiAgQ29sbGFwc2libGVHcm91cHNDYW52YXNFeHRlbnNpb24sXHJcbiAgRm9jdXNNb2RlQ2FudmFzRXh0ZW5zaW9uLFxyXG4gIEVuY2Fwc3VsYXRlQ2FudmFzRXh0ZW5zaW9uLFxyXG4gIENvbG9yUGFsZXR0ZUNhbnZhc0V4dGVuc2lvbixcclxuICBQcmVzZW50YXRpb25DYW52YXNFeHRlbnNpb24sXHJcbiAgUG9ydGFsc0NhbnZhc0V4dGVuc2lvblxyXG5dXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZHZhbmNlZENhbnZhc1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcbiAgbWlncmF0aW9uSGVscGVyOiBNaWdyYXRpb25IZWxwZXJcclxuICBkZWJ1Z0hlbHBlcjogRGVidWdIZWxwZXJcclxuXHJcbiAgc2V0dGluZ3M6IFNldHRpbmdzTWFuYWdlclxyXG4gIHdpbmRvd3NNYW5hZ2VyOiBXaW5kb3dzTWFuYWdlclxyXG5cclxuICBjYW52YXNQYXRjaGVyOiBDYW52YXNQYXRjaGVyXHJcbiAgY2FudmFzRXh0ZW5zaW9uczogQ2FudmFzRXh0ZW5zaW9uW11cclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG4gICAgdGhpcy5taWdyYXRpb25IZWxwZXIgPSBuZXcgTWlncmF0aW9uSGVscGVyKHRoaXMpXHJcbiAgICBhd2FpdCB0aGlzLm1pZ3JhdGlvbkhlbHBlci5taWdyYXRlKClcclxuXHJcbiAgICBJY29uc0hlbHBlci5hZGRJY29ucygpXHJcbiAgICBcclxuICAgIHRoaXMuc2V0dGluZ3MgPSBuZXcgU2V0dGluZ3NNYW5hZ2VyKHRoaXMpXHJcbiAgICBhd2FpdCB0aGlzLnNldHRpbmdzLmxvYWRTZXR0aW5ncygpXHJcbiAgICB0aGlzLnNldHRpbmdzLmFkZFNldHRpbmdzVGFiKClcclxuXHJcbiAgICB0aGlzLndpbmRvd3NNYW5hZ2VyID0gbmV3IFdpbmRvd3NNYW5hZ2VyKHRoaXMpXHJcblxyXG4gICAgdGhpcy5jYW52YXNQYXRjaGVyID0gbmV3IENhbnZhc1BhdGNoZXIodGhpcylcclxuICAgIHRoaXMuY2FudmFzRXh0ZW5zaW9ucyA9IENBTlZBU19FWFRFTlNJT05TLm1hcCgoRXh0ZW5zaW9uOiBhbnkpID0+IG5ldyBFeHRlbnNpb24odGhpcykpXHJcblx0fVxyXG5cclxuICBvbnVubG9hZCgpIHt9XHJcblxyXG4gIGdldEN1cnJlbnRDYW52YXNWaWV3KCk6IENhbnZhc1ZpZXcgfCBudWxsIHtcclxuICAgIGNvbnN0IGNhbnZhc1ZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldylcclxuICAgIGlmIChjYW52YXNWaWV3Py5nZXRWaWV3VHlwZSgpICE9PSAnY2FudmFzJykgcmV0dXJuIG51bGxcclxuICAgIHJldHVybiBjYW52YXNWaWV3IGFzIENhbnZhc1ZpZXdcclxuICB9XHJcblxyXG4gIGdldEN1cnJlbnRDYW52YXMoKTogQ2FudmFzIHwgbnVsbCB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50Q2FudmFzVmlldygpPy5jYW52YXMgfHwgbnVsbFxyXG4gIH1cclxuXHJcbiAgY3JlYXRlRmlsZVNuYXBzaG90KHBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBmaWxlUmVjb3ZlcnlQbHVnaW4gPSB0aGlzLmFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1snZmlsZS1yZWNvdmVyeSddPy5pbnN0YW5jZVxyXG4gICAgaWYgKCFmaWxlUmVjb3ZlcnlQbHVnaW4pIHJldHVyblxyXG5cclxuICAgIGZpbGVSZWNvdmVyeVBsdWdpbi5mb3JjZUFkZChwYXRoLCBjb250ZW50KVxyXG4gIH1cclxuXHJcbiAgLy8gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zW1wiYWR2YW5jZWQtY2FudmFzXCJdLmVuYWJsZURlYnVnTW9kZSgpXHJcbiAgZW5hYmxlRGVidWdNb2RlKCkge1xyXG4gICAgaWYgKHRoaXMuZGVidWdIZWxwZXIpIHJldHVyblxyXG4gICAgdGhpcy5kZWJ1Z0hlbHBlciA9IG5ldyBEZWJ1Z0hlbHBlcih0aGlzKVxyXG4gIH1cclxufSIsICJleHBvcnQgZnVuY3Rpb24gYXJvdW5kKG9iaiwgZmFjdG9yaWVzKSB7XHJcbiAgICBjb25zdCByZW1vdmVycyA9IE9iamVjdC5rZXlzKGZhY3RvcmllcykubWFwKGtleSA9PiBhcm91bmQxKG9iaiwga2V5LCBmYWN0b3JpZXNba2V5XSkpO1xyXG4gICAgcmV0dXJuIHJlbW92ZXJzLmxlbmd0aCA9PT0gMSA/IHJlbW92ZXJzWzBdIDogZnVuY3Rpb24gKCkgeyByZW1vdmVycy5mb3JFYWNoKHIgPT4gcigpKTsgfTtcclxufVxyXG5mdW5jdGlvbiBhcm91bmQxKG9iaiwgbWV0aG9kLCBjcmVhdGVXcmFwcGVyKSB7XHJcbiAgICBjb25zdCBvcmlnaW5hbCA9IG9ialttZXRob2RdLCBoYWRPd24gPSBvYmouaGFzT3duUHJvcGVydHkobWV0aG9kKTtcclxuICAgIGxldCBjdXJyZW50ID0gY3JlYXRlV3JhcHBlcihvcmlnaW5hbCk7XHJcbiAgICAvLyBMZXQgb3VyIHdyYXBwZXIgaW5oZXJpdCBzdGF0aWMgcHJvcHMgZnJvbSB0aGUgd3JhcHBpbmcgbWV0aG9kLFxyXG4gICAgLy8gYW5kIHRoZSB3cmFwcGluZyBtZXRob2QsIHByb3BzIGZyb20gdGhlIG9yaWdpbmFsIG1ldGhvZFxyXG4gICAgaWYgKG9yaWdpbmFsKVxyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihjdXJyZW50LCBvcmlnaW5hbCk7XHJcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yod3JhcHBlciwgY3VycmVudCk7XHJcbiAgICBvYmpbbWV0aG9kXSA9IHdyYXBwZXI7XHJcbiAgICAvLyBSZXR1cm4gYSBjYWxsYmFjayB0byBhbGxvdyBzYWZlIHJlbW92YWxcclxuICAgIHJldHVybiByZW1vdmU7XHJcbiAgICBmdW5jdGlvbiB3cmFwcGVyKC4uLmFyZ3MpIHtcclxuICAgICAgICAvLyBJZiB3ZSBoYXZlIGJlZW4gZGVhY3RpdmF0ZWQgYW5kIGFyZSBubyBsb25nZXIgd3JhcHBlZCwgcmVtb3ZlIG91cnNlbHZlc1xyXG4gICAgICAgIGlmIChjdXJyZW50ID09PSBvcmlnaW5hbCAmJiBvYmpbbWV0aG9kXSA9PT0gd3JhcHBlcilcclxuICAgICAgICAgICAgcmVtb3ZlKCk7XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZW1vdmUoKSB7XHJcbiAgICAgICAgLy8gSWYgbm8gb3RoZXIgcGF0Y2hlcywganVzdCBkbyBhIGRpcmVjdCByZW1vdmFsXHJcbiAgICAgICAgaWYgKG9ialttZXRob2RdID09PSB3cmFwcGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChoYWRPd24pXHJcbiAgICAgICAgICAgICAgICBvYmpbbWV0aG9kXSA9IG9yaWdpbmFsO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgb2JqW21ldGhvZF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXJyZW50ID09PSBvcmlnaW5hbClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIEVsc2UgcGFzcyBmdXR1cmUgY2FsbHMgdGhyb3VnaCwgYW5kIHJlbW92ZSB3cmFwcGVyIGZyb20gdGhlIHByb3RvdHlwZSBjaGFpblxyXG4gICAgICAgIGN1cnJlbnQgPSBvcmlnaW5hbDtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yod3JhcHBlciwgb3JpZ2luYWwgfHwgRnVuY3Rpb24pO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBkZWR1cGUoa2V5LCBvbGRGbiwgbmV3Rm4pIHtcclxuICAgIGNoZWNrW2tleV0gPSBrZXk7XHJcbiAgICByZXR1cm4gY2hlY2s7XHJcbiAgICBmdW5jdGlvbiBjaGVjayguLi5hcmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIChvbGRGbltrZXldID09PSBrZXkgPyBvbGRGbiA6IG5ld0ZuKS5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZnVuY3Rpb24gYWZ0ZXIocHJvbWlzZSwgY2IpIHtcclxuICAgIHJldHVybiBwcm9taXNlLnRoZW4oY2IsIGNiKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplKGFzeW5jRnVuY3Rpb24pIHtcclxuICAgIGxldCBsYXN0UnVuID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICBmdW5jdGlvbiB3cmFwcGVyKC4uLmFyZ3MpIHtcclxuICAgICAgICByZXR1cm4gbGFzdFJ1biA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xyXG4gICAgICAgICAgICBhZnRlcihsYXN0UnVuLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhc3luY0Z1bmN0aW9uLmFwcGx5KHRoaXMsIGFyZ3MpLnRoZW4ocmVzLCByZWopO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHdyYXBwZXIuYWZ0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGxhc3RSdW4gPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHsgYWZ0ZXIobGFzdFJ1biwgcmVzKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHdyYXBwZXI7XHJcbn1cclxuIiwgImltcG9ydCB7IGFyb3VuZCB9IGZyb20gXCJtb25rZXktYXJvdW5kXCJcclxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhdGNoSGVscGVyIHtcclxuICBzdGF0aWMgdHJ5UGF0Y2hXb3Jrc3BhY2VQcm90b3R5cGU8VD4ocGx1Z2luOiBQbHVnaW4sIGdldFRhcmdldDogKCkgPT4gVHx1bmRlZmluZWQsIGZ1bmN0aW9uczogeyBba2V5OiBzdHJpbmddOiAobmV4dDogYW55KSA9PiAoLi4uYXJnczogYW55KSA9PiBhbnkgfSk6IFByb21pc2U8VD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRyeVBhdGNoID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGdldFRhcmdldCgpXHJcbiAgICAgICAgaWYgKCF0YXJnZXQpIHJldHVybiBudWxsXHJcblxyXG4gICAgICAgIGNvbnN0IHVuaW5zdGFsbGVyID0gYXJvdW5kKHRhcmdldC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGZ1bmN0aW9ucylcclxuICAgICAgICBwbHVnaW4ucmVnaXN0ZXIodW5pbnN0YWxsZXIpXHJcblxyXG4gICAgICAgIHJldHVybiB0YXJnZXRcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gdHJ5UGF0Y2goKVxyXG4gICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gcGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdHJ5UGF0Y2goKVxyXG5cclxuICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICBwbHVnaW4uYXBwLndvcmtzcGFjZS5vZmZyZWYobGlzdGVuZXIpXHJcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdClcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBwbHVnaW4ucmVnaXN0ZXJFdmVudChsaXN0ZW5lcilcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcGF0Y2hPYmplY3RQcm90b3R5cGU8VD4ocGx1Z2luOiBQbHVnaW4sIHRhcmdldDogVCwgZnVuY3Rpb25zOiB7IFtrZXk6IHN0cmluZ106IChuZXh0OiBhbnkpID0+ICguLi5hcmdzOiBhbnkpID0+IGFueSB9KTogdm9pZCB7XHJcbiAgICBjb25zdCB1bmluc3RhbGxlciA9IGFyb3VuZCgodGFyZ2V0IGFzIGFueSkuY29uc3RydWN0b3IucHJvdG90eXBlLCBmdW5jdGlvbnMpXHJcbiAgICBwbHVnaW4ucmVnaXN0ZXIodW5pbnN0YWxsZXIpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcGF0Y2hPYmplY3RJbnN0YW5jZTxUPihwbHVnaW46IFBsdWdpbiwgdGFyZ2V0OiBULCBmdW5jdGlvbnM6IHsgW2tleTogc3RyaW5nXTogKG5leHQ6IGFueSkgPT4gKC4uLmFyZ3M6IGFueSkgPT4gYW55IH0pOiB2b2lkIHtcclxuICAgIGNvbnN0IHVuaW5zdGFsbGVyID0gYXJvdW5kKHRhcmdldCBhcyBhbnksIGZ1bmN0aW9ucylcclxuICAgIHBsdWdpbi5yZWdpc3Rlcih1bmluc3RhbGxlcilcclxuICB9XHJcbn0iLCAiY29uc3QgQ0FOVkFTX0VWRU5UX1BSRUZJWCA9ICdjYW52YXMnXHJcbmNvbnN0IFBMVUdJTl9FVkVOVF9QUkVGSVggPSAnYWR2YW5jZWQtY2FudmFzJ1xyXG5cclxuZXhwb3J0IGNvbnN0IENhbnZhc0V2ZW50ID0ge1xyXG4gIC8vIEJ1aWx0LWluIGV2ZW50c1xyXG4gIFNlbGVjdGlvbkNvbnRleHRNZW51OiBgJHtDQU5WQVNfRVZFTlRfUFJFRklYfTpzZWxlY3Rpb24tbWVudWAsXHJcbiAgTm9kZUNvbnRleHRNZW51OiBgJHtDQU5WQVNfRVZFTlRfUFJFRklYfTpub2RlLW1lbnVgLFxyXG4gIEVkZ2VDb250ZXh0TWVudTogYCR7Q0FOVkFTX0VWRU5UX1BSRUZJWH06ZWRnZS1tZW51YCxcclxuICBOb2RlQ29ubmVjdGlvbkRyb3BDb250ZXh0TWVudTogYCR7Q0FOVkFTX0VWRU5UX1BSRUZJWH06bm9kZS1jb25uZWN0aW9uLWRyb3AtbWVudWAsXHJcblxyXG4gIC8vIEN1c3RvbSBldmVudHNcclxuICBDYW52YXNDaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpjYW52YXMtY2hhbmdlZGAsXHJcbiAgVmlld3BvcnRDaGFuZ2VkOiB7XHJcbiAgICBCZWZvcmU6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnZpZXdwb3J0LWNoYW5nZWQ6YmVmb3JlYCxcclxuICAgIEFmdGVyOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTp2aWV3cG9ydC1jaGFuZ2VkOmFmdGVyYFxyXG4gIH0sXHJcbiAgTm9kZU1vdmVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLW1vdmVkYCxcclxuICBEb3VibGVDbGljazogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06ZG91YmxlLWNsaWNrYCxcclxuICBEcmFnZ2luZ1N0YXRlQ2hhbmdlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06ZHJhZ2dpbmctc3RhdGUtY2hhbmdlZGAsXHJcbiAgTm9kZUNyZWF0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9Om5vZGUtY3JlYXRlZGAsXHJcbiAgRWRnZUNyZWF0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmVkZ2UtY3JlYXRlZGAsXHJcbiAgTm9kZUFkZGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWFkZGVkYCxcclxuICBFZGdlQWRkZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmVkZ2UtYWRkZWRgLFxyXG4gIE5vZGVDaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWNoYW5nZWRgLFxyXG4gIEVkZ2VDaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTplZGdlLWNoYW5nZWRgLFxyXG4gIE5vZGVUZXh0Q29udGVudENoYW5nZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9Om5vZGUtdGV4dC1jb250ZW50LWNoYW5nZWRgLFxyXG4gIE5vZGVSZW1vdmVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLXJlbW92ZWRgLFxyXG4gIEVkZ2VSZW1vdmVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTplZGdlLXJlbW92ZWRgLFxyXG4gIE9uQ29weTogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06Y29weWAsXHJcbiAgTm9kZUJCb3hSZXF1ZXN0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9Om5vZGUtYmJveC1yZXF1ZXN0ZWRgLFxyXG4gIEVkZ2VDZW50ZXJSZXF1ZXN0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmVkZ2UtY2VudGVyLXJlcXVlc3RlZGAsXHJcbiAgQ29udGFpbmluZ05vZGVzUmVxdWVzdGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpjb250YWluaW5nLW5vZGVzLXJlcXVlc3RlZGAsXHJcbiAgU2VsZWN0aW9uQ2hhbmdlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06c2VsZWN0aW9uLWNoYW5nZWRgLFxyXG4gIFpvb21Ub0Jib3g6IHtcclxuICAgIEJlZm9yZTogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06em9vbS10by1iYm94OmJlZm9yZWAsXHJcbiAgICBBZnRlcjogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06em9vbS10by1iYm94OmFmdGVyYFxyXG4gIH0sXHJcbiAgUG9wdXBNZW51Q3JlYXRlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06cG9wdXAtbWVudS1jcmVhdGVkYCxcclxuICBOb2RlSW50ZXJhY3Rpb246IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9Om5vZGUtaW50ZXJhY3Rpb25gLFxyXG4gIFVuZG86IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnVuZG9gLFxyXG4gIFJlZG86IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OnJlZG9gLFxyXG4gIFJlYWRvbmx5Q2hhbmdlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06cmVhZG9ubHktY2hhbmdlZGAsXHJcbiAgRGF0YVJlcXVlc3RlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06ZGF0YS1yZXF1ZXN0ZWRgLFxyXG4gIExvYWREYXRhOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpsb2FkLWRhdGFgLFxyXG4gIENhbnZhc1NhdmVkOiB7XHJcbiAgICBCZWZvcmU6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmNhbnZhcy1zYXZlZDpiZWZvcmVgLFxyXG4gICAgQWZ0ZXI6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmNhbnZhcy1zYXZlZDphZnRlcmBcclxuICB9XHJcbn0iLCAiaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcbmltcG9ydCB7IEJCb3gsIENhbnZhcywgQ2FudmFzRGF0YSwgQ2FudmFzRWRnZSwgQ2FudmFzRWRnZURhdGEsIENhbnZhc0VsZW1lbnQsIENhbnZhc05vZGUsIENhbnZhc05vZGVEYXRhLCBDYW52YXNWaWV3IH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IFBhdGNoSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvcGF0Y2gtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwiLi9ldmVudHNcIlxyXG5pbXBvcnQgeyByZXF1aXJlQXBpVmVyc2lvbiwgV29ya3NwYWNlTGVhZiwgZWRpdG9ySW5mb0ZpZWxkIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgRWRpdG9yVmlldywgVmlld1VwZGF0ZSB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCJcclxuaW1wb3J0IHsgYXJvdW5kIH0gZnJvbSBcIm1vbmtleS1hcm91bmRcIlxyXG5pbXBvcnQgSlNPTkMgZnJvbSBcInRpbnktanNvbmNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzUGF0Y2hlciB7XHJcbiAgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG4gICAgdGhpcy5hcHBseVBhdGNoZXMoKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBhcHBseVBhdGNoZXMoKSB7XHJcbiAgICBjb25zdCB0aGF0ID0gdGhpc1xyXG5cclxuICAgIC8vIFdhaXQgZm9yIGxheW91dCByZWFkeSAtPiBTdXBwb3J0IGRlZmVycmVkIHZpZXcgaW5pdGlhbGl6YXRpb25cclxuICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHJlc29sdmUoKSkpXHJcblxyXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IGNhbnZhcyB2aWV3IGZ1bGx5IGxvYWRlZFxyXG4gICAgY29uc3QgZ2V0Q2FudmFzVmlldyA9IGFzeW5jICgpOiBQcm9taXNlPENhbnZhc1ZpZXcgfCBudWxsPiA9PiB7XHJcbiAgICAgIGNvbnN0IGNhbnZhc0xlYWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnY2FudmFzJyk/LmZpcnN0KClcclxuICAgICAgaWYgKCFjYW52YXNMZWFmKSByZXR1cm4gbnVsbFxyXG5cclxuICAgICAgaWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjcuMicpKSBhd2FpdCBjYW52YXNMZWFmLmxvYWRJZkRlZmVycmVkKCkgLy8gTG9hZCB0aGUgY2FudmFzIGlmIHRoZSB2aWV3IGlzIGRlZmVycmVkXHJcbiAgICAgIHJldHVybiBjYW52YXNMZWFmLnZpZXcgYXMgQ2FudmFzVmlld1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB0aGUgY3VycmVudCBjYW52YXMgdmlldyBvciB3YWl0IGZvciBpdCB0byBiZSBjcmVhdGVkXHJcbiAgICBsZXQgY2FudmFzVmlldyA9IGF3YWl0IGdldENhbnZhc1ZpZXcoKVxyXG4gICAgY2FudmFzVmlldyA/Pz0gYXdhaXQgbmV3IFByb21pc2U8Q2FudmFzVmlldz4ocmVzb2x2ZSA9PiB7XHJcbiAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBuZXdDYW52YXNWaWV3ID0gYXdhaXQgZ2V0Q2FudmFzVmlldygpXHJcbiAgICAgICAgaWYgKCFuZXdDYW52YXNWaWV3KSByZXR1cm5cclxuXHJcbiAgICAgICAgcmVzb2x2ZShuZXdDYW52YXNWaWV3KVxyXG4gICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub2ZmcmVmKGV2ZW50KVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChldmVudClcclxuICAgIH0pXHJcblxyXG4gICAgY29uc29sZS5sb2coJ1BhdGNoaW5nIGNhbnZhcyB2aWV3OicsIGNhbnZhc1ZpZXcpXHJcbiAgICBcclxuICAgIC8vIFBhdGNoIGNhbnZhcyB2aWV3XHJcbiAgICBQYXRjaEhlbHBlci5wYXRjaE9iamVjdFByb3RvdHlwZSh0aGlzLnBsdWdpbiwgY2FudmFzVmlldywge1xyXG4gICAgICBnZXRWaWV3RGF0YTogKF9uZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5fYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgY2FudmFzRGF0YSA9IHRoaXMuY2FudmFzLmdldERhdGEoKVxyXG4gICAgICAgIGNhbnZhc0RhdGEubWV0YWRhdGEgPSB0aGlzLmNhbnZhcy5tZXRhZGF0YSA/PyB7fVxyXG5cclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY2FudmFzRGF0YSwgbnVsbCwgMilcclxuICAgICAgfSxcclxuICAgICAgc2V0Vmlld0RhdGE6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChqc29uOiBzdHJpbmcsIC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGxldCB2YWxpZEpzb24gPSBqc29uICE9PSAnJyA/IGpzb24gOiAne30nXHJcbiAgICAgICAgbGV0IHBhcnNlZEpzb25cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIFN5bnRheEVycm9yXHJcbiAgICAgICAgdHJ5IHsgcGFyc2VkSnNvbiA9IEpTT04ucGFyc2UodmFsaWRKc29uKSB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIC8vIEludmFsaWQgSlNPTlxyXG4gICAgICAgICAgdGhhdC5wbHVnaW4uY3JlYXRlRmlsZVNuYXBzaG90KHRoaXMuZmlsZS5wYXRoLCBqc29uKVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBUcnkgdG8gcGFyc2UgaXQgd2l0aCB0cmFpbGluZyBjb21tYXNcclxuICAgICAgICAgIHBhcnNlZEpzb24gPSBKU09OQy5wYXJzZSh2YWxpZEpzb24pXHJcbiAgICAgICAgICB2YWxpZEpzb24gPSBKU09OLnN0cmluZ2lmeShwYXJzZWRKc29uLCBudWxsLCAyKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIHZhbGlkSnNvbiwgLi4uYXJncylcclxuXHJcbiAgICAgICAgdHJ5IHsgdGhpcy5jYW52YXMubWV0YWRhdGEgPSBwYXJzZWRKc29uLm1ldGFkYXRhIH1cclxuICAgICAgICBjYXRjaCAoX2UpIHsgdGhpcy5jYW52YXMubWV0YWRhdGEgPSB7fSB9XHJcblxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsIHRoaXMuY2FudmFzKVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gUGF0Y2ggY2FudmFzXHJcbiAgICBQYXRjaEhlbHBlci5wYXRjaE9iamVjdFByb3RvdHlwZSh0aGlzLnBsdWdpbiwgY2FudmFzVmlldy5jYW52YXMsIHtcclxuICAgICAgbWFya1ZpZXdwb3J0Q2hhbmdlZDogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LlZpZXdwb3J0Q2hhbmdlZC5CZWZvcmUsIHRoaXMpXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuVmlld3BvcnRDaGFuZ2VkLkFmdGVyLCB0aGlzKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgbWFya01vdmVkOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAobm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBub2RlKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVNb3ZlZCwgdGhpcywgbm9kZSlcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIG9uRG91YmxlQ2xpY2s6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByZXZlbnREZWZhdWx0ID0geyB2YWx1ZTogZmFsc2UgfVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkRvdWJsZUNsaWNrLCB0aGlzLCBldmVudCwgcHJldmVudERlZmF1bHQpXHJcbiAgICAgICAgaWYgKCFwcmV2ZW50RGVmYXVsdC52YWx1ZSkgbmV4dC5jYWxsKHRoaXMsIGV2ZW50KVxyXG4gICAgICB9LFxyXG4gICAgICBzZXREcmFnZ2luZzogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGRyYWdnaW5nOiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGRyYWdnaW5nKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkRyYWdnaW5nU3RhdGVDaGFuZ2VkLCB0aGlzLCBkcmFnZ2luZylcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldENvbnRhaW5pbmdOb2RlczogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGJib3g6IEJCb3gpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgYmJveClcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Db250YWluaW5nTm9kZXNSZXF1ZXN0ZWQsIHRoaXMsIGJib3gsIHJlc3VsdClcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHVwZGF0ZVNlbGVjdGlvbjogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKHVwZGF0ZTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGNvbnN0IG9sZFNlbGVjdGlvbiA9IG5ldyBTZXQodGhpcy5zZWxlY3Rpb24pXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIHVwZGF0ZSlcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5TZWxlY3Rpb25DaGFuZ2VkLCB0aGlzLCBvbGRTZWxlY3Rpb24sICgodXBkYXRlOiAoKSA9PiB2b2lkKSA9PiBuZXh0LmNhbGwodGhpcywgdXBkYXRlKSkpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVUZXh0Tm9kZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlQ3JlYXRlZCwgdGhpcywgbm9kZSlcclxuICAgICAgICByZXR1cm4gbm9kZVxyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVGaWxlTm9kZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlQ3JlYXRlZCwgdGhpcywgbm9kZSlcclxuICAgICAgICByZXR1cm4gbm9kZVxyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVGaWxlTm9kZXM6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBub2RlcyA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIG5vZGVzLmZvckVhY2goKG5vZGU6IENhbnZhc05vZGUpID0+IHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDcmVhdGVkLCB0aGlzLCBub2RlKSlcclxuICAgICAgICByZXR1cm4gbm9kZXNcclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlR3JvdXBOb2RlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDcmVhdGVkLCB0aGlzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiBub2RlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZUxpbmtOb2RlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDcmVhdGVkLCB0aGlzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiBub2RlXHJcbiAgICAgIH0sXHJcbiAgICAgIGFkZE5vZGU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICAgICAgdGhhdC5wYXRjaE5vZGUobm9kZSlcclxuICAgICAgICByZXR1cm4gbmV4dC5jYWxsKHRoaXMsIG5vZGUpXHJcbiAgICAgIH0sXHJcbiAgICAgIGFkZEVkZ2U6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChlZGdlOiBDYW52YXNFZGdlKSB7XHJcbiAgICAgICAgdGhhdC5wYXRjaEVkZ2UoZWRnZSlcclxuICAgICAgICBpZiAoIXRoaXMudmlld3BvcnRDaGFuZ2VkKSB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5FZGdlQ3JlYXRlZCwgdGhpcywgZWRnZSlcclxuICAgICAgICByZXR1cm4gbmV4dC5jYWxsKHRoaXMsIGVkZ2UpXHJcbiAgICAgIH0sXHJcbiAgICAgIHJlbW92ZU5vZGU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIG5vZGUpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZVJlbW92ZWQsIHRoaXMsIG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICByZW1vdmVFZGdlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZWRnZTogQ2FudmFzRWRnZSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBlZGdlKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkVkZ2VSZW1vdmVkLCB0aGlzLCBlZGdlKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlQ29weTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIHRoaXMuaXNDb3B5aW5nID0gdHJ1ZVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoaXMuaXNDb3B5aW5nID0gZmFsc2VcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBnZXRTZWxlY3Rpb25EYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb3B5aW5nKSB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5PbkNvcHksIHRoaXMsIHJlc3VsdClcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHpvb21Ub0Jib3g6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChiYm94OiBCQm94KSB7XHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuWm9vbVRvQmJveC5CZWZvcmUsIHRoaXMsIGJib3gpXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGJib3gpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuWm9vbVRvQmJveC5BZnRlciwgdGhpcywgYmJveClcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldFJlYWRvbmx5OiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAocmVhZG9ubHk6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgcmVhZG9ubHkpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuUmVhZG9ubHlDaGFuZ2VkLCB0aGlzLCByZWFkb25seSlcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHVuZG86IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGlzLmltcG9ydERhdGEodGhpcy5nZXREYXRhKCksIHRydWUpIC8vIEZvcmNlIHVwZGF0ZSB0aGUgY2FudmFzIGRhdGFcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5VbmRvLCB0aGlzKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgcmVkbzogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoaXMuaW1wb3J0RGF0YSh0aGlzLmdldERhdGEoKSwgdHJ1ZSkgLy8gRm9yY2UgdXBkYXRlIHRoZSBjYW52YXMgZGF0YVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LlJlZG8sIHRoaXMpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICAvKnNldERhdGE6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICAvL1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LCovXHJcbiAgICAgIGdldERhdGE6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5EYXRhUmVxdWVzdGVkLCB0aGlzLCByZXN1bHQpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBpbXBvcnREYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZGF0YTogQ2FudmFzRGF0YSwgY2xlYXJDYW52YXM/OiBib29sZWFuLCBzaWxlbnQ/OiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0RmlsZVBhdGggPSB0aGlzLnZpZXcuZmlsZS5wYXRoXHJcbiAgICAgICAgY29uc3Qgc2V0RGF0YSA9IChkYXRhOiBDYW52YXNEYXRhKSA9PiB7XHJcbiAgICAgICAgICAvLyBTa2lwIGlmIHRoZSBjYW52YXMgZ290IHVubG9hZGVkIG9yIHRoZSBmaWxlIGNoYW5nZWRcclxuICAgICAgICAgIGlmICghdGhpcy52aWV3LmZpbGUgfHwgdGhpcy52aWV3LmZpbGUucGF0aCAhPT0gdGFyZ2V0RmlsZVBhdGgpIHJldHVyblxyXG5cclxuICAgICAgICAgIHRoaXMuaW1wb3J0RGF0YShkYXRhLCB0cnVlLCB0cnVlKVxyXG4gICAgICAgICAgdGhhdC5lbWl0RXZlbnRzRm9yVW5rbm93bkRhdGFDaGFuZ2VzKHRoaXMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNpbGVudCkgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTG9hZERhdGEsIHRoaXMsIGRhdGEsIHNldERhdGEpXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGRhdGEsIGNsZWFyQ2FudmFzKVxyXG4gICAgICAgIHRoYXQuZW1pdEV2ZW50c0ZvclVua25vd25EYXRhQ2hhbmdlcyh0aGlzKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgcmVxdWVzdFNhdmU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5DYW52YXNTYXZlZC5CZWZvcmUsIHRoaXMpXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuQ2FudmFzU2F2ZWQuQWZ0ZXIsIHRoaXMpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIFBhdGNoIGNhbnZhcyBwb3B1cCBtZW51XHJcbiAgICBQYXRjaEhlbHBlci5wYXRjaE9iamVjdFByb3RvdHlwZSh0aGlzLnBsdWdpbiwgY2FudmFzVmlldy5jYW52YXMubWVudSwge1xyXG4gICAgICByZW5kZXI6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Qb3B1cE1lbnVDcmVhdGVkLCB0aGlzLmNhbnZhcylcclxuICAgICAgICBuZXh0LmNhbGwodGhpcykgLy8gUmUtQ2VudGVyIHRoZSBwb3B1cCBtZW51XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIFBhdGNoIGludGVyYWN0aW9uIGxheWVyXHJcbiAgICBQYXRjaEhlbHBlci5wYXRjaE9iamVjdFByb3RvdHlwZSh0aGlzLnBsdWdpbiwgY2FudmFzVmlldy5jYW52YXMubm9kZUludGVyYWN0aW9uTGF5ZXIsIHtcclxuICAgICAgc2V0VGFyZ2V0OiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAobm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBub2RlKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVJbnRlcmFjdGlvbiwgdGhpcy5jYW52YXMsIG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIEFkZCBlZGl0b3IgZXh0ZW5zaW9uIGZvciBub2RlIHRleHQgY29udGVudCBjaGFuZ2UgbGlzdGVuZXJcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRWRpdG9yRXh0ZW5zaW9uKFtFZGl0b3JWaWV3LnVwZGF0ZUxpc3RlbmVyLm9mKCh1cGRhdGU6IFZpZXdVcGRhdGUpID0+IHtcclxuICAgICAgaWYgKCF1cGRhdGUuZG9jQ2hhbmdlZCkgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBlZGl0b3IgPSB1cGRhdGUuc3RhdGUuZmllbGQoZWRpdG9ySW5mb0ZpZWxkKSBhcyBhbnlcclxuICAgICAgY29uc3Qgbm9kZSA9IGVkaXRvci5ub2RlIGFzIENhbnZhc05vZGUgfCB1bmRlZmluZWRcclxuICAgICAgaWYgKCFub2RlKSByZXR1cm5cclxuXHJcbiAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVUZXh0Q29udGVudENoYW5nZWQsIG5vZGUuY2FudmFzLCBub2RlLCB1cGRhdGUpXHJcbiAgICB9KV0pXHJcblxyXG4gICAgLy8gQ2FudmFzIGlzIG5vdyBwYXRjaGVkIC0gdXBkYXRlIGFsbCBvcGVuIGNhbnZhcyB2aWV3c1xyXG4gICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiB7XHJcbiAgICAgIGlmIChsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKSAhPT0gJ2NhbnZhcycpIHJldHVyblxyXG5cclxuICAgICAgY29uc3QgY2FudmFzVmlldyA9IGxlYWYudmlldyBhcyBDYW52YXNWaWV3XHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgY2FudmFzVmlldy5sZWFmLnJlYnVpbGRWaWV3KClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHBhdGNoTm9kZShub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCB0aGF0ID0gdGhpc1xyXG5cclxuICAgIFBhdGNoSGVscGVyLnBhdGNoT2JqZWN0SW5zdGFuY2UodGhpcy5wbHVnaW4sIG5vZGUsIHtcclxuICAgICAgc2V0RGF0YTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGRhdGE6IENhbnZhc05vZGVEYXRhLCBhZGRIaXN0b3J5PzogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBkYXRhKVxyXG5cclxuICAgICAgICBpZiAobm9kZS5pbml0aWFsaXplZCAmJiAhbm9kZS5pc0RpcnR5KSB7XHJcbiAgICAgICAgICBub2RlLmlzRGlydHkgPSB0cnVlXHJcbiAgICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlQ2hhbmdlZCwgdGhpcy5jYW52YXMsIG5vZGUpXHJcbiAgICAgICAgICBkZWxldGUgbm9kZS5pc0RpcnR5XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTYXZlIHRoZSBkYXRhIHRvIHRoZSBmaWxlXHJcbiAgICAgICAgdGhpcy5jYW52YXMuZGF0YSA9IHRoaXMuY2FudmFzLmdldERhdGEoKVxyXG4gICAgICAgIHRoaXMuY2FudmFzLnZpZXcucmVxdWVzdFNhdmUoKVxyXG5cclxuICAgICAgICAvLyBBZGQgdG8gdGhlIHVuZG8gc3RhY2tcclxuICAgICAgICBpZiAoYWRkSGlzdG9yeSkgdGhpcy5jYW52YXMucHVzaEhpc3RvcnkodGhpcy5jYW52YXMuZ2V0RGF0YSgpKVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldEJCb3g6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlQkJveFJlcXVlc3RlZCwgdGhpcy5jYW52YXMsIG5vZGUsIHJlc3VsdClcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIHRoaXMucnVuQWZ0ZXJJbml0aWFsaXplZChub2RlLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVBZGRlZCwgbm9kZS5jYW52YXMsIG5vZGUpXHJcbiAgICAgIHRoaXMudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDaGFuZ2VkLCBub2RlLmNhbnZhcywgbm9kZSlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHBhdGNoRWRnZShlZGdlOiBDYW52YXNFZGdlKSB7XHJcbiAgICBjb25zdCB0aGF0ID0gdGhpc1xyXG5cclxuICAgIFBhdGNoSGVscGVyLnBhdGNoT2JqZWN0SW5zdGFuY2UodGhpcy5wbHVnaW4sIGVkZ2UsIHtcclxuICAgICAgc2V0RGF0YTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGRhdGE6IENhbnZhc0VkZ2VEYXRhLCBhZGRIaXN0b3J5PzogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBkYXRhKVxyXG5cclxuICAgICAgICBpZiAoZWRnZS5pbml0aWFsaXplZCAmJiAhZWRnZS5pc0RpcnR5KSB7XHJcbiAgICAgICAgICBlZGdlLmlzRGlydHkgPSB0cnVlXHJcbiAgICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5FZGdlQ2hhbmdlZCwgdGhpcy5jYW52YXMsIGVkZ2UpXHJcbiAgICAgICAgICBkZWxldGUgZWRnZS5pc0RpcnR5XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTYXZlIHRoZSBkYXRhIHRvIHRoZSBmaWxlXHJcbiAgICAgICAgdGhpcy5jYW52YXMuZGF0YSA9IHRoaXMuY2FudmFzLmdldERhdGEoKVxyXG4gICAgICAgIHRoaXMuY2FudmFzLnZpZXcucmVxdWVzdFNhdmUoKVxyXG5cclxuICAgICAgICAvLyBBZGQgdG8gdGhlIHVuZG8gc3RhY2tcclxuICAgICAgICBpZiAoYWRkSGlzdG9yeSkgdGhpcy5jYW52YXMucHVzaEhpc3RvcnkodGhpcy5jYW52YXMuZ2V0RGF0YSgpKVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlbmRlcjogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkVkZ2VDaGFuZ2VkLCB0aGlzLmNhbnZhcywgZWRnZSlcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldENlbnRlcjogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkVkZ2VDZW50ZXJSZXF1ZXN0ZWQsIHRoaXMuY2FudmFzLCBlZGdlLCByZXN1bHQpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0aGlzLnJ1bkFmdGVySW5pdGlhbGl6ZWQoZWRnZSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5FZGdlQWRkZWQsIGVkZ2UuY2FudmFzLCBlZGdlKVxyXG4gICAgfSlcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBydW5BZnRlckluaXRpYWxpemVkKGNhbnZhc0VsZW1lbnQ6IENhbnZhc0VsZW1lbnQsIG9uUmVhZHk6ICgpID0+IHZvaWQpIHtcclxuICAgIGlmIChjYW52YXNFbGVtZW50LmluaXRpYWxpemVkKSB7XHJcbiAgICAgIG9uUmVhZHkoKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0aGF0ID0gdGhpc1xyXG5cclxuICAgIC8vIFBhdGNoIENhbnZhc0VsZW1lbnQgb2JqZWN0XHJcbiAgICBjb25zdCB1bmluc3RhbGwgPSBhcm91bmQoY2FudmFzRWxlbWVudCwge1xyXG4gICAgICBpbml0aWFsaXplOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcblxyXG4gICAgICAgIG9uUmVhZHkoKVxyXG4gICAgICAgIHVuaW5zdGFsbCgpIC8vIFVuaW5zdGFsbCB0aGUgcGF0Y2hcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHRoYXQucGx1Z2luLnJlZ2lzdGVyKHVuaW5zdGFsbClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZW1pdEV2ZW50c0ZvclVua25vd25EYXRhQ2hhbmdlcyhjYW52YXM6IENhbnZhcykge1xyXG4gICAgLy8gSWYgbm9kZSBkYXRhIGNoYW5nZWRcclxuICAgIGNhbnZhcy5ub2Rlcy5mb3JFYWNoKChub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLnJ1bkFmdGVySW5pdGlhbGl6ZWQobm9kZSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlQ2hhbmdlZCwgbm9kZS5jYW52YXMsIG5vZGUpXHJcbiAgICB9KSlcclxuXHJcbiAgICAvLyBJZiBlZGdlIGRhdGEgY2hhbmdlZFxyXG4gICAgY2FudmFzLmVkZ2VzLmZvckVhY2goKGVkZ2U6IENhbnZhc0VkZ2UpID0+IHRoaXMucnVuQWZ0ZXJJbml0aWFsaXplZChlZGdlLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkVkZ2VDaGFuZ2VkLCBlZGdlLmNhbnZhcywgZWRnZSlcclxuICAgIH0pKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB0cmlnZ2VyV29ya3NwYWNlRXZlbnQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogYW55KSB7XHJcbiAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLnRyaWdnZXIoZXZlbnQsIC4uLmFyZ3MpXHJcbiAgfVxyXG59IiwgIi8qIEhFTFBFUlMgKi9cclxuY29uc3Qgc3RyaW5nT3JDb21tZW50UmUgPSAvKFwiKD86XFxcXD9bXl0pKj9cIil8KFxcL1xcLy4qKXwoXFwvXFwqW15dKj9cXCpcXC8pL2c7XHJcbmNvbnN0IHN0cmluZ09yVHJhaWxpbmdDb21tYVJlID0gLyhcIig/OlxcXFw/W15dKSo/XCIpfCgsXFxzKikoPz1dfH0pL2c7XHJcbi8qIE1BSU4gKi9cclxuY29uc3QgSlNPTkMgPSB7XHJcbiAgICBwYXJzZTogKHRleHQpID0+IHtcclxuICAgICAgICB0ZXh0ID0gU3RyaW5nKHRleHQpOyAvLyBUbyBiZSBleHRyYSBzYWZlXHJcbiAgICAgICAgdHJ5IHsgLy8gRmFzdCBwYXRoIGZvciB2YWxpZCBKU09OXHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCB7IC8vIFNsb3cgcGF0aCBmb3IgSlNPTkMgYW5kIGludmFsaWQgaW5wdXRzXHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQucmVwbGFjZShzdHJpbmdPckNvbW1lbnRSZSwgJyQxJykucmVwbGFjZShzdHJpbmdPclRyYWlsaW5nQ29tbWFSZSwgJyQxJykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyogRVhQT1JUICovXHJcbmV4cG9ydCBkZWZhdWx0IEpTT05DO1xyXG4iLCAiaW1wb3J0IHsgYWRkSWNvbiB9IGZyb20gXCJvYnNpZGlhblwiXHJcblxyXG5jb25zdCBDVVNUT01fSUNPTlMgPSB7XHJcbiAgJ3NoYXBlLXBpbGwnOiBgPHJlY3Qgcng9XCIzMS4yNVwiIGhlaWdodD1cIjYyLjVcIiB3aWR0aD1cIjkzLjc1XCIgeT1cIjE4Ljc1XCIgeD1cIjMuMTI1XCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwidHJhbnNwYXJlbnRcIi8+YCxcclxuICAnc2hhcGUtcGFyYWxsZWxvZ3JhbSc6IGA8cmVjdCB0cmFuc2Zvcm09XCJza2V3WCgtMjApXCIgcng9XCI1XCIgaGVpZ2h0PVwiNTBcIiB3aWR0aD1cIjcwXCIgeT1cIjI1XCIgeD1cIjM1XCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwidHJhbnNwYXJlbnRcIi8+YCxcclxuICAnc2hhcGUtcHJlZGVmaW5lZC1wcm9jZXNzJzogYFxyXG4gICAgPGcgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgdHJhbnNmb3JtPVwibWF0cml4KDQuMTY2NjY3LDAsMCw0LjE2NjY2NywwLDApXCI+XHJcbiAgICAgIDxwYXRoIGQ9XCJNIDQuOTk5Njg3IDMgTCAxOS4wMDAzMTIgMyBDIDIwLjEwNDY4OCAzIDIxIDMuODk1MzEyIDIxIDQuOTk5Njg3IEwgMjEgMTkuMDAwMzEyIEMgMjEgMjAuMTA0Njg4IDIwLjEwNDY4OCAyMSAxOS4wMDAzMTIgMjEgTCA0Ljk5OTY4NyAyMSBDIDMuODk1MzEyIDIxIDMgMjAuMTA0Njg4IDMgMTkuMDAwMzEyIEwgMyA0Ljk5OTY4NyBDIDMgMy44OTUzMTIgMy44OTUzMTIgMyA0Ljk5OTY4NyAzIFogTSA0Ljk5OTY4NyAzIFwiLz5cclxuICAgICAgPHBhdGggZD1cIk0gNyAzIEwgNyAyMSBcIi8+XHJcbiAgICAgIDxwYXRoIGQ9XCJNIDE3IDMgTCAxNyAyMSBcIi8+XHJcbiAgICA8L2c+XHJcbiAgYCxcclxuICAnc2hhcGUtZG9jdW1lbnQnOiBgPHBhdGggdHJhbnNmb3JtPVwidHJhbnNsYXRlKDAsIDUpXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjMzM1wiIGQ9XCJNODMuNzUgMjVDODUuODIgMjUgODcuNSAyNi42OCA4Ny41IDI4Ljc1TDg3LjUgNjQuMzc1UTY4Ljc1IDU0LjI1IDUwIDY0LjM3NSAzMS4yNSA3NC41IDEyLjUgNjQuMzc1TDEyLjUgMzAuNjI1IDEyLjUgMjguNzVDMTIuNSAyNi42OCAxNC4xOCAyNSAxNi4yNSAyNVpcIi8+YCxcclxuICAnc2hhcGUtZGF0YWJhc2UnOiBgXHJcbiAgICA8ZyB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMjAsIDIwKVwiIHN0cm9rZS13aWR0aD1cIjguMzMzXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIj5cclxuICAgICAgPHBhdGggZD1cIk0gMSA1MSBMIDEgMTEgQyAxIDUuNDggMTQuNDMgMSAzMSAxIEMgNDcuNTcgMSA2MSA1LjQ4IDYxIDExIEwgNjEgNTEgQyA2MSA1Ni41MiA0Ny41NyA2MSAzMSA2MSBDIDE0LjQzIDYxIDEgNTYuNTIgMSA1MSBaXCIvPlxyXG4gICAgICA8cGF0aCBkPVwiTSAxIDExIEMgMSAxNi41MiAxNC40MyAyMSAzMSAyMSBDIDQ3LjU3IDIxIDYxIDE2LjUyIDYxIDExXCIvPlxyXG4gICAgPC9nPlxyXG4gIGAsXHJcbiAgXHJcbiAgJ2JvcmRlci1zb2xpZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguMzMzXCIgZD1cIk05MS42NjY3IDQ1LjgzMzN2NC4xNjY3YzAgMi4wODMzLTIuMDgzMyA0LjE2NjctNC4xNjY3IDQuMTY2N0gxMi41Yy0yLjA4MzMgMC00LjE2NjctMi4wODMzLTQuMTY2Ny00LjE2Njd2LTQuMTY2N1wiLz5gLFxyXG4gICdib3JkZXItZGFzaGVkJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2UtZGFzaGFycmF5PVwiMTMuN1wiIGQ9XCJNOTEuNjY2NyA0NS44MzMzdjQuMTY2N2MwIDIuMDgzMy0yLjA4MzMgNC4xNjY3LTQuMTY2NyA0LjE2NjdIMTIuNWMtMi4wODMzIDAtNC4xNjY3LTIuMDgzMy00LjE2NjctNC4xNjY3di00LjE2NjdcIi8+YCxcclxuICAnYm9yZGVyLWRvdHRlZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguMzMzXCIgc3Ryb2tlLWRhc2hhcnJheT1cIjguN1wiIGQ9XCJNOTEuNjY2NyA0NS44MzMzdjQuMTY2N2MwIDIuMDgzMy0yLjA4MzMgNC4xNjY3LTQuMTY2NyA0LjE2NjdIMTIuNWMtMi4wODMzIDAtNC4xNjY3LTIuMDgzMy00LjE2NjctNC4xNjY3di00LjE2NjdcIi8+YCxcclxuXHJcbiAgJ3BhdGgtc29saWQnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG4gICdwYXRoLWRvdHRlZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguNVwiIHN0cm9rZS1kYXNoYXJyYXk9XCI4LjhcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG4gICdwYXRoLXNob3J0LWRhc2hlZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguNVwiIHN0cm9rZS1kYXNoYXJyYXk9XCIxNVwiIGQ9XCJNMzcuNSA3OS4xNjY3aDM1LjQxNjdhMTQuNTgzMyAxNC41ODMzIDkwIDAwMC0yOS4xNjY3aC00NS44MzMzYTE0LjU4MzMgMTQuNTgzMyA5MCAwMTAtMjkuMTY2N0g2Mi41XCIvPmAsXHJcbiAgJ3BhdGgtbG9uZy1kYXNoZWQnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBzdHJva2UtZGFzaGFycmF5PVwiMjNcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG5cclxuICAnYXJyb3ctdHJpYW5nbGUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNIDE1IDEwIEwgODUgNTAgTCAxNSA5MCBaXCIvPmAsXHJcbiAgJ2Fycm93LXRyaWFuZ2xlLW91dGxpbmUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZmlsbD1cIm5vbmVcIiBkPVwiTSAxNSAxMCBMIDg1IDUwIEwgMTUgOTAgWlwiLz5gLFxyXG4gICdhcnJvdy10aGluLXRyaWFuZ2xlJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjguNVwiIGZpbGw9XCJub25lXCIgZD1cIk0gMTUgMTAgTCA4NSA1MCBMIDE1IDkwXCIvPmAsXHJcbiAgJ2Fycm93LWhhbHZlZC10cmlhbmdsZSc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0gMTUgNTAgTCA4NSA1MCBMIDE1IDkwIFpcIi8+YCxcclxuICAnYXJyb3ctZGlhbW9uZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0gNTAgMCBMIDEwMCA1MCBMIDUwIDEwMCBMIDAgNTAgWlwiLz5gLFxyXG4gICdhcnJvdy1kaWFtb25kLW91dGxpbmUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZmlsbD1cIm5vbmVcIiBkPVwiTSA1MCAwIEwgMTAwIDUwIEwgNTAgMTAwIEwgMCA1MCBaXCIvPmAsXHJcbiAgJ2Fycm93LWNpcmNsZSc6IGA8Y2lyY2xlIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBjeD1cIjUwXCIgY3k9XCI1MFwiIHI9XCI0NVwiLz5gLFxyXG4gICdhcnJvdy1jaXJjbGUtb3V0bGluZSc6IGA8Y2lyY2xlIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjguNVwiIGZpbGw9XCJub25lXCIgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiNDVcIi8+YCxcclxuXHJcbiAgJ3BhdGhmaW5kaW5nLW1ldGhvZC1iZXppZXInOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG4gICdwYXRoZmluZGluZy1tZXRob2Qtc3F1YXJlJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZD1cIk03Mi45MTY3IDc5LjE2NjcgNzIuOTE2NyA1MCAyNy4wODMzIDUwIDI3LjA4MzMgMjAuODMzM1wiLz5gLFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29uc0hlbHBlciB7XHJcbiAgc3RhdGljIGFkZEljb25zKCkge1xyXG4gICAgZm9yIChjb25zdCBbaWQsIHN2Z10gb2YgT2JqZWN0LmVudHJpZXMoQ1VTVE9NX0lDT05TKSkge1xyXG4gICAgICBhZGRJY29uKGlkLCBzdmcpXHJcbiAgICB9XHJcbiAgfVxyXG59IiwgImltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCIuLi9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCB7IENhbnZhcywgQ2FudmFzTm9kZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWJ1Z0hlbHBlciB7XHJcbiAgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUFkZGVkLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBfbm9kZTogQ2FudmFzTm9kZSkgPT4gY29uc29sZS5jb3VudCgnXHVEODNEXHVERkUyIE5vZGVBZGRlZCcpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUNoYW5nZWQsXHJcbiAgICAgIChfY2FudmFzOiBDYW52YXMsIF9ub2RlOiBDYW52YXNOb2RlKSA9PiBjb25zb2xlLmNvdW50KCdcdUQ4M0RcdURGRTEgTm9kZUNoYW5nZWQnKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VBZGRlZCxcclxuICAgICAgKF9jYW52YXM6IENhbnZhcywgX2VkZ2U6IENhbnZhc05vZGUpID0+IGNvbnNvbGUuY291bnQoJ1x1RDgzRFx1REZFMiBFZGdlQWRkZWQnKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VDaGFuZ2VkLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBfZWRnZTogQ2FudmFzTm9kZSkgPT4gY29uc29sZS5jb3VudCgnXHVEODNEXHVERkUxIEVkZ2VDaGFuZ2VkJylcclxuICAgICkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwiLi9tYWluXCJcclxuaW1wb3J0IHsgQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMsIEJVSUxUSU5fTk9ERV9TVFlMRV9BVFRSSUJVVEVTLCBTdHlsZUF0dHJpYnV0ZSB9IGZyb20gXCIuL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9zdHlsZS1jb25maWdcIlxyXG5cclxuY29uc3QgTk9ERV9UWVBFU19PTl9ET1VCTEVfQ0xJQ0sgPSB7XHJcbiAgJ3RleHQnOiAnVGV4dCcsXHJcbiAgJ2ZpbGUnOiAnRmlsZSdcclxufVxyXG5jb25zdCBFREdFX0xJTkVfRElSRUNUSU9OUyA9IHtcclxuICAnbm9uZGlyZWN0aW9uYWwnOiAnTm9uZGlyZWN0aW9uYWwnLFxyXG4gICd1bmlkaXJlY3Rpb25hbCc6ICdVbmlkaXJlY3Rpb25hbCcsXHJcbiAgJ2JpZGlyZWN0aW9uYWwnOiAnQmlkaXJlY3Rpb25hbCdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzIHtcclxuICBub2RlVHlwZU9uRG91YmxlQ2xpY2s6IGtleW9mIHR5cGVvZiBOT0RFX1RZUEVTX09OX0RPVUJMRV9DTElDS1xyXG4gIGFsaWduTmV3Tm9kZXNUb0dyaWQ6IGJvb2xlYW5cclxuICBkZWZhdWx0VGV4dE5vZGVXaWR0aDogbnVtYmVyXHJcbiAgZGVmYXVsdFRleHROb2RlSGVpZ2h0OiBudW1iZXJcclxuICBkZWZhdWx0RmlsZU5vZGVXaWR0aDogbnVtYmVyXHJcbiAgZGVmYXVsdEZpbGVOb2RlSGVpZ2h0OiBudW1iZXJcclxuICBtaW5Ob2RlU2l6ZTogbnVtYmVyXHJcbiAgZGlzYWJsZUZvbnRTaXplUmVsYXRpdmVUb1pvb206IGJvb2xlYW5cclxuXHJcbiAgY29tYmluZUN1c3RvbVN0eWxlc0luRHJvcGRvd246IGJvb2xlYW5cclxuXHJcbiAgbm9kZVN0eWxpbmdGZWF0dXJlRW5hYmxlZDogYm9vbGVhblxyXG4gIGN1c3RvbU5vZGVTdHlsZUF0dHJpYnV0ZXM6IFN0eWxlQXR0cmlidXRlW11cclxuICBkZWZhdWx0VGV4dE5vZGVTdHlsZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cclxuXHJcbiAgZWRnZXNTdHlsaW5nRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICBjdXN0b21FZGdlU3R5bGVBdHRyaWJ1dGVzOiBTdHlsZUF0dHJpYnV0ZVtdXHJcbiAgZGVmYXVsdEVkZ2VMaW5lRGlyZWN0aW9uOiBrZXlvZiB0eXBlb2YgRURHRV9MSU5FX0RJUkVDVElPTlNcclxuICBkZWZhdWx0RWRnZVN0eWxlQXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxyXG4gIGVkZ2VTdHlsZURpcmVjdFJvdGF0ZUFycm93OiBib29sZWFuXHJcbiAgZWRnZVN0eWxlUGF0aGZpbmRlckdyaWRSZXNvbHV0aW9uOiBudW1iZXJcclxuICBlZGdlU3R5bGVQYXRoZmluZGVyUGF0aExpdmVVcGRhdGU6IGJvb2xlYW5cclxuICBlZGdlU3R5bGVQYXRoZmluZGVyUGF0aFJvdW5kZWQ6IGJvb2xlYW5cclxuXHJcbiAgY29tbWFuZHNGZWF0dXJlRW5hYmxlZDogYm9vbGVhblxyXG4gIHpvb21Ub0Nsb25lZE5vZGU6IGJvb2xlYW5cclxuICBjbG9uZU5vZGVNYXJnaW46IG51bWJlclxyXG4gIGV4cGFuZE5vZGVTdGVwU2l6ZTogbnVtYmVyXHJcblxyXG4gIGJldHRlclJlYWRvbmx5RW5hYmxlZDogYm9vbGVhblxyXG4gIGRpc2FibGVOb2RlUG9wdXA6IGJvb2xlYW5cclxuICBkaXNhYmxlWm9vbTogYm9vbGVhblxyXG4gIGRpc2FibGVQYW46IGJvb2xlYW5cclxuXHJcbiAgYXV0b1Jlc2l6ZU5vZGVGZWF0dXJlRW5hYmxlZDogYm9vbGVhblxyXG4gIGF1dG9SZXNpemVOb2RlU25hcFRvR3JpZDogYm9vbGVhblxyXG5cclxuICBjb2xsYXBzaWJsZUdyb3Vwc0ZlYXR1cmVFbmFibGVkOiBib29sZWFuXHJcbiAgY29sbGFwc2VkR3JvdXBQcmV2aWV3T25EcmFnOiBib29sZWFuXHJcblxyXG4gIGZvY3VzTW9kZUZlYXR1cmVFbmFibGVkOiBib29sZWFuXHJcblxyXG4gIHByZXNlbnRhdGlvbkZlYXR1cmVFbmFibGVkOiBib29sZWFuXHJcbiAgc2hvd1NldFN0YXJ0Tm9kZUluUG9wdXA6IGJvb2xlYW5cclxuICBkZWZhdWx0U2xpZGVTaXplOiBzdHJpbmdcclxuICB3cmFwSW5TbGlkZVBhZGRpbmc6IG51bWJlclxyXG4gIHJlc2V0Vmlld3BvcnRPblByZXNlbnRhdGlvbkVuZDogYm9vbGVhblxyXG4gIHVzZUFycm93S2V5c1RvQ2hhbmdlU2xpZGVzOiBib29sZWFuXHJcbiAgdXNlUGdVcFBnRG93bktleXNUb0NoYW5nZVNsaWRlczogYm9vbGVhblxyXG4gIHpvb21Ub1NsaWRlV2l0aG91dFBhZGRpbmc6IGJvb2xlYW5cclxuICBzbGlkZVRyYW5zaXRpb25BbmltYXRpb25EdXJhdGlvbjogbnVtYmVyXHJcbiAgc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uSW50ZW5zaXR5OiBudW1iZXJcclxuXHJcbiAgY2FudmFzRW5jYXBzdWxhdGlvbkVuYWJsZWQ6IGJvb2xlYW5cclxuXHJcbiAgcG9ydGFsc0ZlYXR1cmVFbmFibGVkOiBib29sZWFuXHJcbiAgbWFpbnRhaW5DbG9zZWRQb3J0YWxTaXplOiBib29sZWFuXHJcbiAgc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFsczogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGFydGlhbDxBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzPiA9IHtcclxuICBub2RlVHlwZU9uRG91YmxlQ2xpY2s6ICd0ZXh0JyxcclxuICBhbGlnbk5ld05vZGVzVG9HcmlkOiB0cnVlLFxyXG4gIGRlZmF1bHRUZXh0Tm9kZVdpZHRoOiAyNjAsXHJcbiAgZGVmYXVsdFRleHROb2RlSGVpZ2h0OiA2MCxcclxuICBkZWZhdWx0RmlsZU5vZGVXaWR0aDogNDAwLFxyXG4gIGRlZmF1bHRGaWxlTm9kZUhlaWdodDogNDAwLFxyXG4gIG1pbk5vZGVTaXplOiA2MCxcclxuICBkaXNhYmxlRm9udFNpemVSZWxhdGl2ZVRvWm9vbTogZmFsc2UsXHJcblxyXG4gIGNvbWJpbmVDdXN0b21TdHlsZXNJbkRyb3Bkb3duOiBmYWxzZSxcclxuXHJcbiAgbm9kZVN0eWxpbmdGZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICBjdXN0b21Ob2RlU3R5bGVBdHRyaWJ1dGVzOiBbXSxcclxuICBkZWZhdWx0VGV4dE5vZGVTdHlsZUF0dHJpYnV0ZXM6IHt9LFxyXG5cclxuICBlZGdlc1N0eWxpbmdGZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICBjdXN0b21FZGdlU3R5bGVBdHRyaWJ1dGVzOiBbXSxcclxuICBkZWZhdWx0RWRnZUxpbmVEaXJlY3Rpb246ICd1bmlkaXJlY3Rpb25hbCcsXHJcbiAgZGVmYXVsdEVkZ2VTdHlsZUF0dHJpYnV0ZXM6IHt9LFxyXG4gIGVkZ2VTdHlsZURpcmVjdFJvdGF0ZUFycm93OiBmYWxzZSxcclxuICBlZGdlU3R5bGVQYXRoZmluZGVyR3JpZFJlc29sdXRpb246IDEwLFxyXG4gIGVkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoTGl2ZVVwZGF0ZTogdHJ1ZSxcclxuICBlZGdlU3R5bGVQYXRoZmluZGVyUGF0aFJvdW5kZWQ6IHRydWUsXHJcblxyXG4gIGNvbW1hbmRzRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcbiAgem9vbVRvQ2xvbmVkTm9kZTogdHJ1ZSxcclxuICBjbG9uZU5vZGVNYXJnaW46IDIwLFxyXG4gIGV4cGFuZE5vZGVTdGVwU2l6ZTogMjAsXHJcblxyXG4gIGJldHRlclJlYWRvbmx5RW5hYmxlZDogdHJ1ZSxcclxuICBkaXNhYmxlTm9kZVBvcHVwOiBmYWxzZSxcclxuICBkaXNhYmxlWm9vbTogZmFsc2UsXHJcbiAgZGlzYWJsZVBhbjogZmFsc2UsXHJcblxyXG4gIGF1dG9SZXNpemVOb2RlRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcbiAgYXV0b1Jlc2l6ZU5vZGVTbmFwVG9HcmlkOiB0cnVlLFxyXG5cclxuICBjb2xsYXBzaWJsZUdyb3Vwc0ZlYXR1cmVFbmFibGVkOiB0cnVlLFxyXG4gIGNvbGxhcHNlZEdyb3VwUHJldmlld09uRHJhZzogdHJ1ZSxcclxuXHJcbiAgZm9jdXNNb2RlRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcblxyXG4gIHByZXNlbnRhdGlvbkZlYXR1cmVFbmFibGVkOiB0cnVlLFxyXG4gIHNob3dTZXRTdGFydE5vZGVJblBvcHVwOiBmYWxzZSxcclxuICBkZWZhdWx0U2xpZGVTaXplOiAnMTIwMHg2NzUnLFxyXG4gIHdyYXBJblNsaWRlUGFkZGluZzogMjAsXHJcbiAgcmVzZXRWaWV3cG9ydE9uUHJlc2VudGF0aW9uRW5kOiB0cnVlLFxyXG4gIHVzZUFycm93S2V5c1RvQ2hhbmdlU2xpZGVzOiB0cnVlLFxyXG4gIHVzZVBnVXBQZ0Rvd25LZXlzVG9DaGFuZ2VTbGlkZXM6IHRydWUsXHJcbiAgem9vbVRvU2xpZGVXaXRob3V0UGFkZGluZzogdHJ1ZSxcclxuICBzbGlkZVRyYW5zaXRpb25BbmltYXRpb25EdXJhdGlvbjogMC41LFxyXG4gIHNsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkludGVuc2l0eTogMS4yNSxcclxuXHJcbiAgY2FudmFzRW5jYXBzdWxhdGlvbkVuYWJsZWQ6IHRydWUsXHJcblxyXG4gIHBvcnRhbHNGZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICBtYWludGFpbkNsb3NlZFBvcnRhbFNpemU6IHRydWUsXHJcbiAgc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFsczogdHJ1ZVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXR0aW5nc01hbmFnZXIge1xyXG4gIHN0YXRpYyBTRVRUSU5HU19DSEFOR0VEX0VWRU5UID0gJ2FkdmFuY2VkLWNhbnZhczpzZXR0aW5ncy1jaGFuZ2VkJ1xyXG5cclxuICBwcml2YXRlIHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW5cclxuICBwcml2YXRlIHNldHRpbmdzOiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzXHJcbiAgcHJpdmF0ZSBzZXR0aW5nc1RhYjogQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5nVGFiXHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4pIHtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKSlcclxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVClcclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpXHJcbiAgfVxyXG5cclxuICBnZXRTZXR0aW5nPFQgZXh0ZW5kcyBrZXlvZiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzPihrZXk6IFQpOiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzW1RdIHtcclxuICAgIHJldHVybiB0aGlzLnNldHRpbmdzW2tleV1cclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFNldHRpbmcoZGF0YTogUGFydGlhbDxBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzPikge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24odGhpcy5zZXR0aW5ncywgZGF0YSlcclxuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcclxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVClcclxuICB9XHJcblxyXG4gIGFkZFNldHRpbmdzVGFiKCkge1xyXG4gICAgdGhpcy5zZXR0aW5nc1RhYiA9IG5ldyBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdUYWIodGhpcy5wbHVnaW4sIHRoaXMpXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRTZXR0aW5nVGFiKHRoaXMuc2V0dGluZ3NUYWIpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXJcclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIpIHtcclxuICAgIHN1cGVyKHBsdWdpbi5hcHAsIHBsdWdpbilcclxuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gc2V0dGluZ3NNYW5hZ2VyXHJcbiAgfVxyXG5cclxuICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgbGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXNcclxuICAgIGNvbnRhaW5lckVsLmVtcHR5KClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldEhlYWRpbmcoKVxyXG4gICAgICAuc2V0Q2xhc3MoJ2FjLXNldHRpbmdzLWhlYWRpbmcnKVxyXG4gICAgICAuc2V0TmFtZShcIkdlbmVyYWxcIilcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJOb2RlIHR5cGUgb24gZG91YmxlIGNsaWNrXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIHR5cGUgb2Ygbm9kZSB0aGF0IHdpbGwgYmUgY3JlYXRlZCB3aGVuIGRvdWJsZSBjbGlja2luZyBvbiB0aGUgY2FudmFzLlwiKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxyXG4gICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAuYWRkT3B0aW9ucyhOT0RFX1RZUEVTX09OX0RPVUJMRV9DTElDSylcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdub2RlVHlwZU9uRG91YmxlQ2xpY2snKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBub2RlVHlwZU9uRG91YmxlQ2xpY2s6IHZhbHVlIGFzIGtleW9mIHR5cGVvZiBOT0RFX1RZUEVTX09OX0RPVUJMRV9DTElDSyB9KSlcclxuICAgICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQWx3YXlzIGFsaWduIG5ldyBub2RlcyB0byBncmlkXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCBuZXcgbm9kZXMgd2lsbCBiZSBhbGlnbmVkIHRvIHRoZSBncmlkLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnYWxpZ25OZXdOb2Rlc1RvR3JpZCcpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGFsaWduTmV3Tm9kZXNUb0dyaWQ6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcbiAgICBcclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkRlZmF1bHQgdGV4dCBub2RlIHdpZHRoXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGRlZmF1bHQgd2lkdGggb2YgYSB0ZXh0IG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdkZWZhdWx0VGV4dE5vZGVXaWR0aCcpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZGVmYXVsdFRleHROb2RlV2lkdGg6IE1hdGgubWF4KDEsIHBhcnNlSW50KHZhbHVlKSkgfSkpXHJcbiAgICAgIClcclxuICAgIFxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRGVmYXVsdCB0ZXh0IG5vZGUgaGVpZ2h0XCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGRlZmF1bHQgaGVpZ2h0IG9mIGEgdGV4dCBub2RlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZGVmYXVsdFRleHROb2RlSGVpZ2h0JykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBkZWZhdWx0VGV4dE5vZGVIZWlnaHQ6IE1hdGgubWF4KDEsIHBhcnNlSW50KHZhbHVlKSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJEZWZhdWx0IGZpbGUgbm9kZSB3aWR0aFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBkZWZhdWx0IHdpZHRoIG9mIGEgZmlsZSBub2RlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZGVmYXVsdEZpbGVOb2RlV2lkdGgnKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGRlZmF1bHRGaWxlTm9kZVdpZHRoOiBNYXRoLm1heCgxLCBwYXJzZUludCh2YWx1ZSkpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRGVmYXVsdCBmaWxlIG5vZGUgaGVpZ2h0XCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGRlZmF1bHQgaGVpZ2h0IG9mIGEgZmlsZSBub2RlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZGVmYXVsdEZpbGVOb2RlSGVpZ2h0JykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBkZWZhdWx0RmlsZU5vZGVIZWlnaHQ6IE1hdGgubWF4KDEsIHBhcnNlSW50KHZhbHVlKSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJNaW5pbXVtIG5vZGUgc2l6ZVwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBtaW5pbXVtIHNpemUgb2YgYSBub2RlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnbWluTm9kZVNpemUnKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IG1pbk5vZGVTaXplOiBNYXRoLm1heCgxLCBwYXJzZUludCh2YWx1ZSkpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRGlzYWJsZSBmb250IHNpemUgcmVsYXRpdmUgdG8gem9vbVwiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgdGhlIGZvbnQgc2l6ZSBvZiBlLmcuIGdyb3VwIG5vZGUgdGl0bGVzIGFuZCBlZGdlIGxhYmVscyB3aWxsIG5vdCBpbmNyZWFzZSB3aGVuIHpvb21pbmcgb3V0LlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZGlzYWJsZUZvbnRTaXplUmVsYXRpdmVUb1pvb20nKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBkaXNhYmxlRm9udFNpemVSZWxhdGl2ZVRvWm9vbTogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJDb21iaW5lIGN1c3RvbSBzdHlsZXNcIixcclxuICAgICAgXCJDb21iaW5lIGFsbCBzdHlsZSBhdHRyaWJ1dGVzIG9mIEFkdmFuY2VkIENhbnZhcyBpbiBhIHNpbmdsZSBkcm9wZG93bi5cIixcclxuICAgICAgJ2NvbWJpbmVDdXN0b21TdHlsZXNJbkRyb3Bkb3duJ1xyXG4gICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIk5vZGUgc3R5bGluZ1wiLFxyXG4gICAgICBcIlN0eWxlIHlvdXIgbm9kZXMgd2l0aCBkaWZmZXJlbnQgc2hhcGVzIGFuZCBib3JkZXJzLlwiLFxyXG4gICAgICAnbm9kZVN0eWxpbmdGZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJDdXN0b20gbm9kZSBzdHlsZSBzZXR0aW5nc1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIkFkZCBjdXN0b20gc3R5bGUgc2V0dGluZ3MgZm9yIG5vZGVzLiAoR28gdG8gR2l0SHViIGZvciBtb3JlIGluZm9ybWF0aW9uKVwiKVxyXG4gICAgICAuYWRkQnV0dG9uKChidXR0b24pID0+XHJcbiAgICAgICAgYnV0dG9uXHJcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIk9wZW4gVHV0b3JpYWxcIilcclxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly9naXRodWIuY29tL0RldmVsb3Blci1NaWtlL29ic2lkaWFuLWFkdmFuY2VkLWNhbnZhcy9ibG9iL21haW4vUkVBRE1FLm1kI2N1c3RvbS1zdHlsZXNcIikpXHJcbiAgICAgIClcclxuXHJcbiAgICBjb25zdCBhbGxOb2RlU3R5bGVBdHRyaWJ1dGVzID0gWyAuLi5CVUlMVElOX05PREVfU1RZTEVfQVRUUklCVVRFUywgLi4udGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnY3VzdG9tTm9kZVN0eWxlQXR0cmlidXRlcycpIF1cclxuICAgICAgLmZpbHRlcigoc2V0dGluZykgPT4gc2V0dGluZy5ub2RlVHlwZXMgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5nLm5vZGVUeXBlcz8uaW5jbHVkZXMoJ3RleHQnKSlcclxuICAgIHRoaXMuY3JlYXRlRGVmYXVsdFN0eWxlc1NlY3Rpb24oY29udGFpbmVyRWwsICdEZWZhdWx0IHRleHQgbm9kZSBzdHlsZSBhdHRyaWJ1dGVzJywgJ2RlZmF1bHRUZXh0Tm9kZVN0eWxlQXR0cmlidXRlcycsIGFsbE5vZGVTdHlsZUF0dHJpYnV0ZXMpXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiRWRnZXMgc3R5bGluZ1wiLFxyXG4gICAgICBcIlN0eWxlIHlvdXIgZWRnZXMgd2l0aCBkaWZmZXJlbnQgcGF0aCBzdHlsZXMuXCIsXHJcbiAgICAgICdlZGdlc1N0eWxpbmdGZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJDdXN0b20gZWRnZSBzdHlsZSBzZXR0aW5nc1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIkFkZCBjdXN0b20gc3R5bGUgc2V0dGluZ3MgZm9yIGVkZ2VzLiAoR28gdG8gR2l0SHViIGZvciBtb3JlIGluZm9ybWF0aW9uKVwiKVxyXG4gICAgICAuYWRkQnV0dG9uKChidXR0b24pID0+XHJcbiAgICAgICAgYnV0dG9uXHJcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIk9wZW4gVHV0b3JpYWxcIilcclxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly9naXRodWIuY29tL0RldmVsb3Blci1NaWtlL29ic2lkaWFuLWFkdmFuY2VkLWNhbnZhcy9ibG9iL21haW4vUkVBRE1FLm1kI2N1c3RvbS1zdHlsZXNcIikpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJEZWZhdWx0IGVkZ2UgbGluZSBkaXJlY3Rpb25cIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgZGVmYXVsdCBsaW5lIGRpcmVjdGlvbiBvZiBhbiBlZGdlLlwiKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxyXG4gICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAuYWRkT3B0aW9ucyhFREdFX0xJTkVfRElSRUNUSU9OUylcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdkZWZhdWx0RWRnZUxpbmVEaXJlY3Rpb24nKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBkZWZhdWx0RWRnZUxpbmVEaXJlY3Rpb246IHZhbHVlIGFzIGtleW9mIHR5cGVvZiBFREdFX0xJTkVfRElSRUNUSU9OUyB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRGVmYXVsdFN0eWxlc1NlY3Rpb24oY29udGFpbmVyRWwsICdEZWZhdWx0IGVkZ2Ugc3R5bGUgYXR0cmlidXRlcycsICdkZWZhdWx0RWRnZVN0eWxlQXR0cmlidXRlcycsIFsgLi4uQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMsIC4uLnRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2N1c3RvbUVkZ2VTdHlsZUF0dHJpYnV0ZXMnKSBdKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlJvdGF0ZSBhcnJvdyBpZiBwYXRoZmluZGluZyBtZXRob2QgaXMgXFxcIkRpcmVjdFxcXCJcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIHRoZSBhcnJvdyB3aWxsIGJlIHJvdGF0ZWQgdG8gdGhlIGRpcmVjdGlvbiBvZiB0aGUgZWRnZSBpZiB0aGUgcGF0aGZpbmRpbmcgbWV0aG9kIGlzIHNldCB0byBcXFwiRGlyZWN0XFxcIi5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2VkZ2VTdHlsZURpcmVjdFJvdGF0ZUFycm93JykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZWRnZVN0eWxlRGlyZWN0Um90YXRlQXJyb3c6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQSogZ3JpZCByZXNvbHV0aW9uXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIHJlc29sdXRpb24gb2YgdGhlIGdyaWQgd2hlbiB1c2luZyB0aGUgQSogcGF0aCBzdHlsZS4gVGhlIGxvd2VyIHRoZSB2YWx1ZSwgdGhlIG1vcmUgcHJlY2lzZSB0aGUgcGF0aCB3aWxsIGJlLiBCdXQgaXQgd2lsbCBhbHNvIHRha2UgbG9uZ2VyIHRvIGNhbGN1bGF0ZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2VkZ2VTdHlsZVBhdGhmaW5kZXJHcmlkUmVzb2x1dGlvbicpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZWRnZVN0eWxlUGF0aGZpbmRlckdyaWRSZXNvbHV0aW9uOiBNYXRoLm1heCg1LCBwYXJzZUludCh2YWx1ZSkpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiTGl2ZSB1cGRhdGUgQSogcGF0aFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgdGhlIEEqIHBhdGggc3R5bGUgd2lsbCBiZSB1cGRhdGVkIGxpdmUgd2hpbGUgZHJhZ2dpbmcgdGhlIGVkZ2UuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdlZGdlU3R5bGVQYXRoZmluZGVyUGF0aExpdmVVcGRhdGUnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBlZGdlU3R5bGVQYXRoZmluZGVyUGF0aExpdmVVcGRhdGU6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQSogcm91bmRlZCBwYXRoXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB0aGUgQSogcGF0aCBzdHlsZSB3aWxsIGJlIHJvdW5kZWQuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdlZGdlU3R5bGVQYXRoZmluZGVyUGF0aFJvdW5kZWQnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBlZGdlU3R5bGVQYXRoZmluZGVyUGF0aFJvdW5kZWQ6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiRXh0ZW5kZWQgY29tbWFuZHNcIixcclxuICAgICAgXCJBZGQgbW9yZSBjb21tYW5kcyB0byB0aGUgY2FudmFzLlwiLFxyXG4gICAgICAnY29tbWFuZHNGZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJab29tIHRvIGNsb25lZCBub2RlXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB0aGUgY2FudmFzIHdpbGwgem9vbSB0byB0aGUgY2xvbmVkIG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCd6b29tVG9DbG9uZWROb2RlJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgem9vbVRvQ2xvbmVkTm9kZTogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJDbG9uZSBub2RlIG1hcmdpblwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBtYXJnaW4gYmV0d2VlbiB0aGUgY2xvbmVkIG5vZGUgYW5kIHRoZSBzb3VyY2Ugbm9kZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2Nsb25lTm9kZU1hcmdpbicpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgY2xvbmVOb2RlTWFyZ2luOiBwYXJzZUludCh2YWx1ZSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJFeHBhbmQgbm9kZSBzdGVwIHNpemVcIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgc3RlcCBzaXplIGZvciBleHBhbmRpbmcgdGhlIG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdleHBhbmROb2RlU3RlcFNpemUnKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGV4cGFuZE5vZGVTdGVwU2l6ZTogcGFyc2VJbnQodmFsdWUpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiQmV0dGVyIHJlYWRvbmx5XCIsXHJcbiAgICAgIFwiSW1wcm92ZSB0aGUgcmVhZG9ubHkgbW9kZS5cIixcclxuICAgICAgJ2JldHRlclJlYWRvbmx5RW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJBdXRvIHJlc2l6ZSBub2RlXCIsXHJcbiAgICAgIFwiQXV0b21hdGljYWxseSByZXNpemUgdGhlIGhlaWdodCBvZiBhIG5vZGUgdG8gZml0IHRoZSBjb250ZW50LlwiLFxyXG4gICAgICAnYXV0b1Jlc2l6ZU5vZGVGZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJTbmFwIHRvIGdyaWRcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIHRoZSBoZWlnaHQgb2YgdGhlIG5vZGUgd2lsbCBzbmFwIHRvIHRoZSBncmlkLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnYXV0b1Jlc2l6ZU5vZGVTbmFwVG9HcmlkJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgYXV0b1Jlc2l6ZU5vZGVTbmFwVG9HcmlkOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIkNvbGxhcHNpYmxlIGdyb3Vwc1wiLFxyXG4gICAgICBcIkdyb3VwIG5vZGVzIGNhbiBiZSBjb2xsYXBzZWQgYW5kIGV4cGFuZGVkIHRvIGtlZXAgdGhlIGNhbnZhcyBvcmdhbml6ZWQuXCIsXHJcbiAgICAgICdjb2xsYXBzaWJsZUdyb3Vwc0ZlYXR1cmVFbmFibGVkJ1xyXG4gICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkNvbGxhcHNlZCBncm91cCBwcmV2aWV3IG9uIGRyYWdcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIGEgZ3JvdXAgdGhhdCBpcyBjb2xsYXBzZWQgc2hvdyBpdHMgYm9yZGVyIHdoaWxlIGRyYWdnaW5nIGEgbm9kZS5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2NvbGxhcHNlZEdyb3VwUHJldmlld09uRHJhZycpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGNvbGxhcHNlZEdyb3VwUHJldmlld09uRHJhZzogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJGb2N1cyBtb2RlXCIsXHJcbiAgICAgIFwiRm9jdXMgb24gYSBzaW5nbGUgbm9kZSBhbmQgYmx1ciBhbGwgb3RoZXIgbm9kZXMuXCIsXHJcbiAgICAgICdmb2N1c01vZGVGZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJQcmVzZW50YXRpb25zXCIsXHJcbiAgICAgIFwiQ3JlYXRlIGEgcHJlc2VudGF0aW9uIGZyb20geW91ciBjYW52YXMuXCIsXHJcbiAgICAgICdwcmVzZW50YXRpb25GZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgIC5zZXROYW1lKFwiU2hvdyBcXFwiU2V0IFN0YXJ0IE5vZGVcXFwiIGluIG5vZGUgcG9wdXBcIilcclxuICAgIC5zZXREZXNjKFwiSWYgdHVybmVkIG9mZiwgeW91IGNhbiBzdGlsbCBzZXQgdGhlIHN0YXJ0IG5vZGUgdXNpbmcgdGhlIGNvcnJlc3BvbmRpbmcgY29tbWFuZC5cIilcclxuICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgdG9nZ2xlXHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3Nob3dTZXRTdGFydE5vZGVJblBvcHVwJykpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHNob3dTZXRTdGFydE5vZGVJblBvcHVwOiB2YWx1ZSB9KSlcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJEZWZhdWx0IHNsaWRlIHJhdGlvXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGRlZmF1bHQgcmF0aW8gb2YgdGhlIHNsaWRlLiBGb3IgZXhhbXBsZSwgMTY6OSBpcyAxMjAweDY3NSBhbmQgMzoyIGlzIDEzNTB4OTAwLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZGVmYXVsdFNsaWRlU2l6ZScpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGRlZmF1bHRTbGlkZVNpemU6IHZhbHVlLnJlcGxhY2UoJyAnLCAnJykgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJXcmFwIGluIHNsaWRlIHBhZGRpbmdcIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgcGFkZGluZyBvZiB0aGUgc2xpZGUgd2hlbiB3cmFwcGluZyB0aGUgY2FudmFzIGluIGEgc2xpZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCd3cmFwSW5TbGlkZVBhZGRpbmcnKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHdyYXBJblNsaWRlUGFkZGluZzogcGFyc2VJbnQodmFsdWUpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiUmVzZXQgdmlld3BvcnQgb24gcHJlc2VudGF0aW9uIGVuZFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgdGhlIHZpZXdwb3J0IHdpbGwgYmUgcmVzZXQgdG8gdGhlIG9yaWdpbmFsIHBvc2l0aW9uIGFmdGVyIHRoZSBwcmVzZW50YXRpb24gZW5kcy5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3Jlc2V0Vmlld3BvcnRPblByZXNlbnRhdGlvbkVuZCcpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHJlc2V0Vmlld3BvcnRPblByZXNlbnRhdGlvbkVuZDogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJVc2UgYXJyb3cga2V5cyB0byBjaGFuZ2Ugc2xpZGVzXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB5b3UgY2FuIHVzZSB0aGUgYXJyb3cga2V5cyB0byBjaGFuZ2Ugc2xpZGVzIGluIHByZXNlbnRhdGlvbiBtb2RlLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygndXNlQXJyb3dLZXlzVG9DaGFuZ2VTbGlkZXMnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyB1c2VBcnJvd0tleXNUb0NoYW5nZVNsaWRlczogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJVc2UgUGdVcC9QZ0Rvd24ga2V5cyB0byBjaGFuZ2Ugc2xpZGVzXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB5b3UgY2FuIHVzZSB0aGUgUGdVcC9QZ0Rvd24ga2V5cyB0byBjaGFuZ2Ugc2xpZGVzIGluIHByZXNlbnRhdGlvbiBtb2RlIChNYWtlcyB0aGUgcHJlc2VudGF0aW9uIG1vZGUgY29tcGF0aWJsZSB3aXRoIG1vc3QgcHJlc2VudGF0aW9uIHJlbW90ZXMpLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygndXNlUGdVcFBnRG93bktleXNUb0NoYW5nZVNsaWRlcycpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHVzZVBnVXBQZ0Rvd25LZXlzVG9DaGFuZ2VTbGlkZXM6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiWm9vbSB0byBzbGlkZSB3aXRob3V0IHBhZGRpbmdcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIHRoZSBjYW52YXMgd2lsbCB6b29tIHRvIHRoZSBzbGlkZSB3aXRob3V0IHBhZGRpbmcuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCd6b29tVG9TbGlkZVdpdGhvdXRQYWRkaW5nJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgem9vbVRvU2xpZGVXaXRob3V0UGFkZGluZzogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJTbGlkZSB0cmFuc2l0aW9uIGFuaW1hdGlvbiBkdXJhdGlvblwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBkdXJhdGlvbiBvZiB0aGUgc2xpZGUgdHJhbnNpdGlvbiBhbmltYXRpb24gaW4gc2Vjb25kcy4gU2V0IHRvIDAgdG8gZGlzYWJsZSB0aGUgYW5pbWF0aW9uLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uRHVyYXRpb24nKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHNsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkR1cmF0aW9uOiBwYXJzZUZsb2F0KHZhbHVlKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlNsaWRlIHRyYW5zaXRpb24gYW5pbWF0aW9uIGludGVuc2l0eVwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBpbnRlbnNpdHkgb2YgdGhlIHNsaWRlIHRyYW5zaXRpb24gYW5pbWF0aW9uLiBUaGUgaGlnaGVyIHRoZSB2YWx1ZSwgdGhlIG1vcmUgdGhlIGNhbnZhcyB3aWxsIHpvb20gb3V0IGJlZm9yZSB6b29taW5nIGluIG9uIHRoZSBuZXh0IHNsaWRlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uSW50ZW5zaXR5JykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBzbGlkZVRyYW5zaXRpb25BbmltYXRpb25JbnRlbnNpdHk6IHBhcnNlRmxvYXQodmFsdWUpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiQ2FudmFzIGVuY2Fwc3VsYXRpb25cIixcclxuICAgICAgXCJFbmNhcHN1bGF0ZSBhIHNlbGVjdGlvbiBvZiBub2RlcyBhbmQgZWRnZXMgaW50byBhIG5ldyBjYW52YXMuXCIsXHJcbiAgICAgICdjYW52YXNFbmNhcHN1bGF0aW9uRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJQb3J0YWxzXCIsXHJcbiAgICAgIFwiQ3JlYXRlIHBvcnRhbHMgdG8gb3RoZXIgY2FudmFzZXMuXCIsXHJcbiAgICAgICdwb3J0YWxzRmVhdHVyZUVuYWJsZWQnXHJcbiAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiTWFpbnRhaW4gY2xvc2VkIHBvcnRhbCBzaXplXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCBjbG9zaW5nIGEgcG9ydGFsIHdpbGwgY2hhbmdlIHRoZSBzaXplIG9mIHRoZSBwb3J0YWwgdG8gdGhlIG9yaWdpbmFsLCBjbG9zZWQgc2l6ZS5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ21haW50YWluQ2xvc2VkUG9ydGFsU2l6ZScpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IG1haW50YWluQ2xvc2VkUG9ydGFsU2l6ZTogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJTaG93IGVkZ2VzIGludG8gZGlzYWJsZWQgcG9ydGFsc1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgZWRnZXMgaW50byBkaXNhYmxlZCBwb3J0YWxzIHdpbGwgYmUgc2hvd24gYnkgYW4gZWRnZSB0byB0aGUgcG9ydGFsIG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdzaG93RWRnZXNJbnRvRGlzYWJsZWRQb3J0YWxzJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFsczogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBjb25zdCBrb2ZpQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXHJcbiAgICBrb2ZpQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2tvZmktYnV0dG9uJylcclxuICAgIGtvZmlCdXR0b24uaHJlZiA9ICdodHRwczovL2tvLWZpLmNvbS9YOFgyN0lBMDgnXHJcbiAgICBrb2ZpQnV0dG9uLnRhcmdldCA9ICdfYmxhbmsnXHJcblxyXG4gICAgY29uc3Qga29maUltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICAgIGtvZmlJbWFnZS5zcmMgPSAnZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxVa2xHUnJvc0FBQlhSVUpRVmxBNFRLNHNBQUF2MXdOREVML0NvSkVrUlhVQ2J2d3Jla2ZNL0JZUXNwR2tIc0NOdy9uYnZjQXphaHRKa3VlN1IvR251YlVBeWtEYU52RnY5cjJDcVUzYmdISEtHSElIN0g5RGVPeW5FWVpIQ0tGT2oxbmVNZlhaMFNtbVV6dVlnczZQMmNIMGZqdVkxMUpCcTVoTzdlalZEcVpUbldKMjlPcCsxdHdsUllxNnJ6TEhaNmRJa1NKRkNuamIvbWxQNDFqYmpLekcySmpRS0FpUlVUcnovSkNuTmFzbkszTW1ubldtMDdhT1J0Z3l5SHBBMy8rcjJCaU9xdnBYaWZXMGJSSDloNFp0TzlEcWxVdVo3TFNSei9kOUpPdjhPZnMvaVNaWnpLUFpkSHI5eWt5bnN5aGVMRUd3ZkQ2azZXVHZjQ1o3aC9NL1pmSE5aOWVqY09CdGhxUEpMSmFNTG9rbXc4RHJhSzZtOGZKL3RNSkdrNUZYYnZmTC83TllnanlZWFFYRWc1bkUvelAxMnV3NkdQQ2FZQlFsckQ1dlJ6ekhjaFg5VndUTE9KcGNqNGJoaXhtT3JpYXplSUZJbWg0NHNuQTBta3puaTFNUjhTUWN5SmpoWk1GMVhDUEdRd212ay85cWxES2haMWt5aldGT1Z2Tm4wdFQ3eUU1QW4yQWdhY0lvWVFqUGZsd2pRNEl2a3lSWnhIRThqMTdNYkxwdkp0ZFNabnJBUkhzbWZqSFBSN2EwckpSQnArbGlLdkVZWHA5eUhzbHpacGMzMXpGMVRlWWtwZlRrc1lpamFQWnl1aGk5RUtQQlFKVjVJYTFITDZlY2FCN0hpaWdsOGZRU1hDL2dpN0h3QktrUGl0TGxXUGwvRnNnZGlaNlRTQnc5Vnlxdmh1SEFHQk0rbjEybXM3bmVVMHQ4aFU3VExkOE85NHFXRTI2Rm93VEhYb21Ia3RRSCt0c3RGOUhzK3VxWkZqRFFCS09yYVJRdkRTdG13Z2kreGhsR0o5a2E5c3J5TStramVZdkxWL1poUXRrWTNVUU5kem9aczM4a1Z3azhjWHFkbkpocjRsOTdESkJwd3dUeHRjbHdZS1pSeTUyV1NaRnY0YXVjWVhSYXJrbW5xeGxHL3BtQmZkeXpaMjJmUGpDajJRSVppeUg0bVQ4WnlkR01KeEVpcGx3bG5hNldWeWdIOGhtVXo2QkhUSGc5aHdKSUlUQmpLc2NrUCtxcjVjbUR4ZXQ4aGUyWkFGV2Nod20wd01IMnFnQ2t4M0lFZnVhZkI4SUo4TVJZSUhob0F0eWJZeFloQ296cWp0MUdsNzdJUWpxMURKY2NlNTJVaXo4UERUclVJZ0E3am9VNFc5bStOV2t0UXlETUErd3ovd3poMngrZE1QaE1DMmthd0IzSG9sL2oxaXQ4bW1HVGRNa0loTWx6c3VpcWFoSXQ0UzJTSXVCZU5DT01xTjlpMTlYbU1DWE03RFRCNTRIbFpHNGlXWi92eVpVSXh3TFV2Y0hKMHlBNVZZTDEwY0pUa3p5SkFyd0Y0dFlTeWRNVElJd1ZvcE8wMjdXdnpLNUx3ZkQ2aUxwVW5BbkxXSk04YmQ3dTgvM0RCNjE3eDY5TzZ5ZXBGNy9BSzkzVjIyTGw3bzRhdHk3S1ppZVB0SzBlRGg5U3R0N1dMQWZ6bVlqdjZiU3l3RHI2enozWmdFQmVKOFpiTFFMVzNGNjRPNXJKMXRzMkZmU3AxcG5md2JqSGxxR0V3UEh0TjJtYmFHR0RWUGNHcjNWK2RwTEZ2M3ZKN1V4bVhYVWlhTmVrUTNHUEhabFgwMnVjU2QxYWdVc1cyelZWdVMyS3NtdzR5cEtSVEswejNlMGYyYmFzeVVlV25CS1dLN052M1IydldkV2R3QnJaVUZkR25KekpYamR2QlRDbWx6SlB4MHFaRloybW03RVRJR205WFhHV1Z0ZW5sVTJmL0h3NDhqL3ZHc0NSekhSckI2VGRudG0xQjB4VHM1bjJpT24yalNFaWk3ZjBDcHNBVFJja3JEWjlXdnNtd05QbjVjOFo4enIwU3JwbE94QlhpM3N0eEN1cFhkZTJkVjJWWlZFVUQrdjF5am1YM2VHYTdQbW9WdXYxK29YdUxhdjZSZHdCVWJHT21BTlJNM3NtaytKR3I1aEp3aWwrNi8rM1RrOG1XKyt0Z2Evc1dLbVFoNDdpaFJwSDJyVjFWUmJGMnJrN0U4enpHZWJocFhyYmRqcDRXaUVKRmUxTW1sV1VQemcrWU1sbksrTG43LzI1QnlkQ0F4T0dOWUE4OU1TQWlybWtkVHRLT21WUXJtWVhJNWJGd3pNWllKakpWdXR0MWU1RVFrSDRkZlJ5WnQwUmp2dTVIT05hazFuaWswQmVUajVadHl1TWdxMmpvdVEva0lyZzRLaHJkZlgyV2VSZ3FGazlWTnd5elhBQjRGZG5vZ2t1K2h5ampIR3BKeWFuZ2hvTVMwa0E3bGxDSFVjTVlkUDZzR2FBcVVHM1RZcW5FQlpLcDViTW40U2hNMWRheDFVWDdNZE5RSW5vRTFKSnVTVmFwR1hFWXZuNHlsYS8xRElLMm9UOUh0a3FLRHNobWNZajMrZmNlUDdkaTk3SEZaR0h0Z0pMNkNuQkNwbmEzeEcyN2IyWlJEOVJiNmpGaVQ0SlNKWnQ2U1RRdlA3eTVieG0vUWl4REZZOWwyQXFscDBjcDJySDc4dzR3cS91VERWOEtvR2ltaU5qaXBYSjhYeWlWZ0FXeitVSkUzdjZUQVhyV0xxak5XaUVkTHIweHB5Rjdkc3JabDN6TEdMN01PZjQ5VUZ3aVZvQmppbzhYV0xZT2N3a3psSGdRS1RUcWIvQWdYR3RQNEp2Ty9GbGhGSmxxNDREakR4dFBRdVZYc2VJVDNRQ0hWbDkrREJRM2kvMEZqalEyYjc5WkRpaXZoYWhJeHYrcWxySyttNG9uTnQ1cndlQzRvd0xjazJGczNHV2NnWWVjb2dSKzNybE0rcGJnRlRaSGhtMUZWWXc1T0tzei8yd3JCeFR0c2FVeGs4Rk9KTW03SVg4VlQvUjM1VHVRcFFCTFY4Y09LWEtwTWNSRXJDRlR0MFBIaTZpTS9TNklCSXZaN0tIM3E2V1Vvd1pVVXNidVYwQWE1MjcwNktONkZ1U3hUYnRVUmZUV1lweEp2dDdwd1d2Mndrbk4weUJidTJGaXhORUhiMkVGL3NjZFRHZHlJTXp5YUFkMFBPZVljSXFNM2Z5YW82QUNiNDhLYUlhMHl5NjQ2RUtBeGpKeEVjUmh2d3g5Nzdua0pQdlUwdXpWakZUd1BhVVFLUTVmNjBwTW5PY0N1T1FMREUvZnVSOTZibmpqbnpzSGFPNExCUXl3UmQreDNGcTdOT3FTTmpkd1cwRWszSzhNTFkvZmhWdCtlWStMWkhRc3YwYTJON2QrK0hFY0R1bksxbDNHRWRSTVRDZ0lvSTFYUXNkcjNJZEpNU2tDWkZVVXFJRnBCVlBDOFhWMUNraFJMMzJoaVArSWlaQjRzT2RlUWExWlFCWE01MGhYbjJwSXRvVEVXOUpiNmhqRTZ0UzdlZ2FNVzg1NUlpOUdrWEhKajFmRUZ6QlRTclRGRytqcDEwWUZxdTRuRE8vdTROOTRacGxueEtzcjlKUCtiTXA5czJtUEdwcVgxT1ZQbVpUdkRMNW5uSFBCbTFoNnhWNERNamV6TWl5a0ZNd3lGdi9RT3FxbHhtS3ZJN2E3SGVNSnkvUDNLZjdZbE5XTDcyTmUvVXVqdHNsK3U2bEcvU1g4MDJldXd4MHVXS29OSFhDS1dWSDExd0FrNXYzczZ0ZTFyUjZsVWxncUE2LzFIUkUreDRrYTdpOEtLdG0xdzJNTU9tdWJhcXl5SjNZUW0rbk15Y1Frb0F2TktBcGI4aVlDMStiWlEvRUF1S0hRQW51VUZBU01RYmdUR2I1cG1xNmdWMW0xMnp5RENXeWtFNWRTUk9TaGZlSkhaUlN2R0FZbStma2VoUWVMVm5ENGN0UVYrMisyNDNRMzArUk9TQ2p4OTB4T09RSzAwU2ZOdlhoZlMwTHl0eHg2NXBqbHdDeXhIRzR5VDNsYlcreWlDWlhEQmVhR1Y1WlBHRDZ5QUtOcnc0ZkE3SmI4OUFIUlowT1REVmRmUzh2UHcrV3Z0c3cvRlZZaWU2S3I0M3dNcDd3RHVNeEdNMWlVekgwVFkxMy9ZUkVrQ2JLRzJ0ODJQcGJ2K2VVWWROeTRSZzBhWHFSWEErNENXL3VOVEo2c2FGd0d0OUhZdDQza0thSnN2SUkxVy90N282cEQxbXFFNEFLSkJ0VUdXZk5vT200ak9sM3hOSUhOME13OXQ2bnArRHQwdGZTZ2UybXpYbjZrS1U1TVNHMDlJNm9iWE03OG9WR0R2ajBtOGZTOXdOektyRlRFQ1NXK1pEelF5RU1EMTV3aFBGMy9Nb2NtTlAvMXF2T0NmdktCZUFJd3NJb01TNDBnb3ZET08yZ0l4S2tpYkptWUttUjdYeW1KVGtoS2tPMzhKTDg0TGI4eHh6RG8yM0JSNTVZYWNPcm8wWFdoeG5TWW5ZOTRjdHhWV1VocjREd2ZUa0FySThCcG5GdTU2L2FzNXlGaU1QOU1iYnowMVpkYTZiRGxRNW9iWWpJMStYcUphZ0hkOW9TbE4waTJMUzU0bXdYSUs4RXNIdzloTWZlWEpuWjBGQnlmZkJ3c2JVaFJ2emwzZFBBVG9QUnJlak92NTNvcFI4MkNIREgxVmFCOTc2QUhwaG5HTmtwTk8vVWRpdFFBYk5ycGhTYXFLYmJmdkYwSXVwdUM5OVlIUVE4MVNwQmU3Z08wQWZmWnVYMm96bzBCNm9kd05vUWxPMmNaSHZJcFBjU3UweVBTeStRaENhUW5LUkM2N0Q2RmpadU8zWG9YcWYyREZnYmdyQzlJKzNSVDJZajRBUXpQMVFZZ0d4MDN5a2VTN294ZTh2SGpFYXg1N0N2RENnYUFvK2txMFAzbENrRm5BQllEL0l3Z3hncXRGYlBtWDNLTUxrNlZJY0tIK3oramVlZXlHZ0ZUbCt0Z3VUR093d2d0bGxzbFErMTNRN01mVU5yM0Q2d2libzlJU2pEMUgwWGlKOXQwL0toQlFFZ0kybWxmaVNjZHVpa3kyNWprbXozQ0NJYlFzaWhIeDRZL3Y1ZWlteUZjTjNjRFJZcXFCNzZ0SnVSRlo2aERkdU5UUEhEWGJ3bi9pS0hsSkl3ZTgxMEdmT0Y3b0VUWnliWU00dGhwVUE0TndFTEc3WWRWanAxSGZjckRjSHRPVlBMeXhSVHJDUzNocnNtN0FrUUtoTGRoazBEcmJ4TGVHWGlXY1h0VjVlbm5yWFc5WXFENjFmNlh2eitOdmFIMnJwZXZSN1M3bDZIbUtuRm9jWW02SzRXUW9RbHBYam5scHE3dm5WWkdLTXRIVkRuZ0JVY1hkckpmUXR0VmF3eTBsMDJWRzFxNjlzTy9aQ3grOEVSN0R0eGRnMmhjZWpBQ3p1QzIzK21rdDdNa1RpMURyaG9ZaHlhSjk1UU9JUFlJcWw1QytzeTV0d05ZSUtLQ0R5TW1pQXo3MEhqaENWVUdSQzlYc0lXVFd3MzJyQmlQditWZkdQUG5CblVvMXFsREU5K1BXSGlKYWhrTHlSclhXZHRNMFZmRmMvMTBUWGpmUmZWc2tUMERxYWRFWmhmSmVDVHlReTliV2RnOUZNRFluMzBUS3daR2hmMitvd1FjdVdkTWsybTV3OS9XZGxETFZuVVZ5eG9nSHJVV2QxcGZZdjBTZkNJVjNWbjNYSUorUXJHQlM0cXNSaUpWOEc1WkpVUzdjVHc1WisvLytISG4yNXVibjc4NGZzL2Y4V0lyNzU1LytPUHozL3RUeisrLytaM1h3aWhsQmlIYVNuS3pON0FWUDZFcUZLR3hLSmhFTDJQSGN0aVRNaWRydlZVeC9pb1E4cUgzRUx0L2RYM054OXZqNWlQUDMzOUpRTis5L2ZqZis2L2Z2eXp3RXVkSitkTktwSk1VY2k3dGxPNlQ3dUdZRFcyaGkxTExWSnptZmFYajFCSEVlMkRsU0M1RjhBWGYvOXc2MmwrK2pQeHovMyt4di9QNWNhakRBT3I0SG9CbXBqY1BVTHR3NzJtWStXdEtTRTNlcEJWeEF3Q1pFTlN4eFVibEZkKzkvTXR4Znp5TmVVazlKSDI1L0ppSlZOSGI3bUVpOURFSkZUaFZVdXRpVWRqMURKVEVGSzBmOUVOLzZ0a04yYjlrRnZ1eXZ4ZVdVOWI4WTNtdTcwMWxCWEs5eUd5dWRVVDBrSDU4UTZnWE5QS1RCMG9uR21OdnY0N29CekdOYTBsckhlR1NubnhYTmd6bUIrOHowSU1KeUkrU0pXZkQzS1M4OUtpVVh5d0NTdjBqWVF6MXJrbmNraU02L0hVRG1NQVpBbE5sb2dROHN0LzNkN2VpcHdaL3ZieGxzZjhuUTFTZC9GUnlRVjhRQUdrSDgvWW1IVjVCb2tWZXpacTFwaSsvNXd0RHRKeFRHbEUwWTVYRzhhZmh1Y3l2Lzc1Q1A1eHUyZDRQRGtoVU9wM2NnSHRHWWJYbHN0WDYwZzRGU0pRcWVXV0ZRY3F6VENlcXdNSElqQThobFplVXZPUFcwN3o5VUg4ZUh2THVIekZCcGt3M2ptTTRZcEo5dmlsTEhFK2dNdUpLV1pvUkZ5RnZNU2tMajZSQnBuUXBuRFhxWE0xMjQwSmp6aUpvcElQUDk3eW1tOFA4Tjl2YmxuTnIxK0xJMHY1NmZpYWpKMDVZQW0wYzRyWkNwL3Bpd3R6ejNSL1pDVmxrWC9LRG8vVTZINXo0Szd2K0ZkSUtTSGZTL2swUHlJcWIxRU5yeFZaL1puLzcyV0JsTE9ST3FFMldpSGE4cTNPNE1sZldscjkzSVMrRWgzV0tUc0Z1YS9pdE01OXY4UE5YbFdDamZRNjUyUW5OM3l2OHB1dlhwMkcrTTN2cEpGUnNwbFVCYWd5QnNYQUJybkJreUVSeklScmJNb2FWbmJIYXhWWlhuTHdCOEpFQ2kyLzVXUytTZjI5djM0bFhkRnUvZEZLNmZsdHpIMnZSL1U4dzZFQnJjZzZiSWhIMnpabHVUZG13cHB0Y0ZjTE9uT3lFTVdmYmtYTXpUUG4vbGJFL1BJRkdXSkp2Wk1Tbk9kR0JkSS9OdWFIbEJLR2E0NTJYNlpvOTJwMHdGeTltalBGQktIenBSYWhNWThxdzZ0ak5PQkV4eU12LzBVR3QvLys1VWVodi9kR0dDdjJ2OWVaR2xmRllGY21qRjAzSms0Qkg4UDR0b0lSNi9DMkxqSFJxZ0k5Qm16OGVDdGxmcm1WTXQvSzRpN2xqaXF6Tks0dGo3VmdDWmVFS1Q3bG5rN0JwZFFsd1dvQVdHS3g4Zld0T3ZQcmw3TFl2WUNWUFV2bXNwZ1NpTWZxV2ppOWxsSnp2enFjeENKcWJpVUFETEdpNFBIVFoyNWtVUk1vZVJtMHBzVEFhTlhzd09jVlh3V2kwekpIOURnSGhSMFdIUCs0MVdoK0o0cVN3SG1UUVcwSWRneHZwTEErd2hNaFljd09JRE1tSEdCS1Rsb3pMRGkrdkZXSkcxRnN3VkFhR2tPcFVqbUh4RDRHR3dyVFZReXF2bXBhaDk5QmRDWU5sbjEwT3BJb3dMQ3hVNyt0dEtWSlc3REVtNkxHMGVzVkRoTGtBUTE2aHlJQmoxK1U0c1lPNUZiZ2ZtQ1UrbnkySSsyeS9BeHhiQTQ4Rll1OEQzQ3hQSk1IUnl4YUhUT3dzckx4V09mTStVQVdrRFBWOVhaNWRCSksrd0NFeVI3QXg0MWEvR0FHTWp2VVZobFBlMVpFUGh4aFVzVXZPeDJvV2ZRWkJqTUUwRU9yeGE5ZldMR2JFZmZZekdCTHUvaUlnSjRIN3JlNjV6RDRIQUFNMjNvMzVWQmhvYk1CTFVNZzVTYzdiYVJ4c2pkcmJlQ29UTmdOUHNpTll2d2dod1lMT3lPMTBkVUVNdUs2Y21FU0J3TjBsRFpFbElEam8yTDhBcWkvdWhKQmEwc1BEc1JicStzbkwvOEJnUFVMS05yOTBQampyV2J6QlFQWTI0ODRrZlltdFltMnM0RHRvTXowRTdqdStTYkF3ZmVxOFJjcHJNSGFoMVltOW5xNjU2ZmM2M1JDdHovSGRXM2JTVVYranRPZnczK294bmRTcU5pTDA3VU42cXV5UStDcVRHQW9ua0o0bWR6TzR6UGZ4UkFHR0RlcThTTWQ3SVJQSzROQ08zS1dzc2VaSU5mdkd4U0FQa1htV1hFaXo2RFRpQWNiR1h4UWpmOHZoRFYvZWJwbHY4aUkycWJWMXQzcmY5VXplR2paeCtNa09ZVkFybWJ3d3V3djhWWTFmaEZDamRhL2NXNkJ0YkcvaVV3aS8zWDdsZHpYdHpyTVBXZUtLdEtLV3o5c3E2Wk41ZkdVaVU2VTQ3S1hjQ3NESjVETUdpcTBLNk1iNUVJTTdMVnJ5bUxsL09kVDhEa1RpK2ZoVkNxdEVBZmNKUm1QRTU0b3g4OEVVZFB3emlpd2RIb0FOUHdQcC94eW5VeXVyVTdMTmFHenEwZWZHekxWUHNWODYyM1RpYURrU21FTjIrVENEdnNiVzVwbWk3WE5UVnczNEhMTmNQQ0d3clRhOG1mZzltbWxiUTc0a0RxYmZ1TGFaZFRiY0xTY0o5UnR1VzdMNWRyaGNIQ3RSTWJBeE13VjB6WlJkRHdTRW95SmNtVG85YlVQNFRvSlN2N2VLcmh1WUpqcm5ZQXhjN3Q3NGh2b2g2cUpvbU8wSUJQbEtJYUtodDhZQlNlVEIxc2h5VkJuMXh1OUhtdTFKVmlqWG9IUTFiaHJ3aDhGb2o1RHhkS2c3SklUcFdHNy9jck9HNzlQWlVyVWxncjkxcVpPV3ZtL3dmUUJZRGd0bW1hdGpZL0JodGkyYitlTHllR3JKYkhDWW4yWVdtYndNRTZvT3JvenpnNmNMZGppS3VLNW5VV3oxdlpJVHhwYkhIRnFzQlM2Q3RxV2lQL2NoemxkSnE0a2hobFNTeldWYU5XblZhWnJKVmdYOFM3RDVobWtqMVl4WGlxa0UvSlVDQVVSLzArM1hqcmpOUFhsVlNwWG9sYUt3WG0zSTNaT0YxWGx6M3BBWHJxVjV0Tm5BMWh2YlAwdjdpQXlYcDNDc25aa3RHTC85UTdacDAyZGlsYUFkMlFZcHpHMkY5cVV3TkN0WVZxVDJ0clVlQlV6bDVJam51STBqL3hHTlg1UG5qb1YzdDkrd29rMWdLcTFXcnRDUzF4QmRZM2RaMFRxekxxaVU0MTJReUdJK0sxcXZGTnh4ekJiT2xSYml3ZTBWa0YvYjJ1VDZqOVpCOGVoekZKcTRJaFRMOXZaMWEvYUI2Z1dlb1R2ZDhjUHZTUEI4VTVJNW0xMkR2dGtWZG1sSzdDRkswNWk0aTBQQ2VGR01YNUNRc25YRHdGd2toV2E5R21PQVRMWnQ3bkZadk4zbVYwc1NsbFpCbkZ6RGpSTWhQZUs4UTFTYjFhU0hjK1hHblZXVGR5YjczdE1IWGJWNk5FdW1lS2pNQStRTnEwZU1kQXdFZjVvOHl1TXFicXpCaWt6bkVVb3NHdFBHWFJURzJHQ0hZdCtXUk0zRjZ6ZGRuZmtGM3JnbFMycC95eGpjUGZBaTUxTmszb0wzaGxHYXhLWmxPSHhnblkwbFpqRUQ3ay9qSktjLzRDRFNyYjd6bEovOTJUbXpqaHFoMTJTRnphMWpHMTk2VGUwd0NPUjRRTzBWbTErQllPZGNIZmJwV1U5KytjMm9jSm1LR1kyS1Exc0pWV29XUGxzcnlObFJUMGdieHE3elN2aHFWbWdzS1VKcjVLYmVTOXNBTXRrazA2bkRvK04ydExtanlyZ3pCdlZ3S2FkdjhHeDBwMXRGd3FMSFJ0Zllmc3VjMmdxSkxWTHBwaUNha1JOU0IwbVZsSVhWZmlOMXIwVjJMdmFKdHkxUXNxclJ1VXViQ3FrTVFRTlhIcFkwMTRZTVk4ajJDS1ZtSDlxc09zQkkyeDZxMGVyMEdCejFKeE5vK0N0OEpTS1U1TGsvSko1SE1FV0JYNm53TjUxbkxEcHJWWldvY0p1ZzVkcDUxWXlsY2V3Y3pXeG9EVDg3dVNxdHpkV3UwMkdjTzJuUWpGQnFlV3VLTXdsMFZQbHlrQTg1WEVMeTlxWlVScVNwWEkzd3ZOSG85MlNyQ3RxR0xLT0s2UjlBV3Rzc2J3cGpXd0E1Ni9KOHlMY0VzTzNUemtjaTkxdVRSK1NqSHFJY3h3YUNIemExTHV1NjlvSzY5b2M0QW83clUyajREMWVMUU45WVVocVNPYmtLcmgvTk5pdE12cDFiMDNEWFlVbTBHZTVvWTIyUUN6S1MyaTBacUVEcVFCU0FpNllMM2pINFZpcnV0cXVHZlRKT0dHVjE0TjhiYlNEdlhlZ3B1ZlJBQmNuQ1VVeHZSQXNsZDdwVW5iN0lPNTJqeXdEQStPRVZWNDVZcjhSR3hRYXA0Y0IrTjNka3pUZC9MQWhxVmFab3V6MkYvRTFIazRuSzZ6eXlpQTdBaTh4c0QwVUJCcE52Nm4yT2RLTzUxNm9SVzg4KzRPVis3UnJwdmJWdkxES1MvNmdnSmVpZjdFK21oeGdBMTRMM0FhbzQ4RWZUZlJydHhsYmR5ajhNRWdycGlOQnRQWnpqNVc5bXI3Y1dDTktQZjNJdUV1YVFvem9IU3IvaDNVTlRicXE0Q09KR3duaHUwRmFNYTB3aFg0Y1dEUGI1YkJGKzUxSktIeEQ0cDN3UTRuYjdPYnFwZTgvRGZIckRwdVhhVll2VnF6NTRHbGdBYVFxS1J3SkY0Qk1xaEJxTGo2MERLUlF2ck1FcFN6TGs3VUptSVRndkdiQ3U0L2EvWWhwQ2NKZW4xc3piTFF0RFRXU0g1NWFOWFRMZEdkVDM4NjFWRWdCM2VxRTBoUHFnekJiK21zek5HRWFVRHRJeURDbXBXaUp5d2tzb1JSaUhIUVZPalBxc3NRckZLd29MVTRTUDJ3b3cyKzBJc3gzVEMwalFlMzB6QjZzQkNIYXppYUZRZ0ZOT3VYOTF0TGRrYVpzSXVDa0dqTytXdTROUFA2ZHEyVWtwZzFoYiswTWk2WUJxVUEyOUc4VmlZbGNRZk13TjBlZy9heVB5S0gwRkp4TFRQOU14NFozSDhEeE05UEJwNkFaTktFTjhzY2k0WGtCVXF3TjBHOTZxNE1za2cwU25HK0ZhNmFzSjRJSkphcVVwTTVwUVFRZnZ1QnF6aTFxU1g0bTRXNHRDeDZhRVA2bU1qUGtyeUcxNlpVS202VnpUWnFLRFNldnovbEhDeFJoTnBEWDBydWczVHFwN2wwQXNXWTRYVU5oZzh6eEh1UTlvWlhPV3NCZmtxSXFBTWF0L2JVQittMDU0dUJJd29RS2k0VG5EOGozL3dXRkZ2Qkx3TjFFWVg4K1lHTkl1dFJJaFRCYTF2ZW8rTWlvdGlyMURlVzBqelkrbzhHbVhYTEJQZW5vRkhRdWp2S1JwVlpFMmgybFhiQi9EQlRLamkxaFBPcnFsNCsvWlZRK0Z3cEdiSmMxcFE3ZVNmc3UrdEFpZ09ZZzZlZVZScmpIcTlmWVB3WUtaY2NVUTZmenZVWXJ6aE5aN2FqM2IwR0Y5bDN3dkZVQTFhazhCcjloZzN1Y2hOWHdJMFNNV1FPdUI4cVhEeThXK0pXc0pOOXZEWG1LRU5UdmdnYW5JUWpxOTVaYmVJdEdLWG9wa3BDNlRDeEFocVArWG5XVDBBeHVEcmZDNU13NHJMRGw1aHB1eG55RDVuZnNtS3lJQmJMaDNNb2JBbE5oMlE2NEYwQ0wrNHByR2UvSlpHSVU3aW8wdEd4aURwd0R5Nkg1R3l2OVRCZDZJZ1dqNWhha2dCM01iS3AvcmJjRGh3Mzd6SXl4UGpBclUvM2RnN1BTY0JzNHpqNlVEc3NPc3ZxZDdiQnVsUVpYQ3RhZ0l5WmRHMnlRd2R6SXpXOC93T0JmNzRBSGZlRTRobjhZOFV5dGkvNTNrS0xTOVE1WXMvUEk5Q0N2V3JROElUTjNNeG9tdklSank3KzhRMW4rU1pvdFIrbHlPMy8rS0hudDJjd2ZKcjFEZFFlNytRaUFsUFhYSlFDWUVyTnVaY0U2WnZzYVdpYUovRkFSSXVVM3Yva1pwdVdZK0RaaEdwZlk3VmxFaHlsOXJOV3d3ejd0UUxOQ0tlemI0dklYOFQ2TlVndVduZ21HZUF1RTZxTC8rRFgvb1RwR0gwN0xNTmcyazk2aGtTWFF3VjNuTzFsMXlITlgyR0tFRWhIdWdDT2xaWk56M2h6WmlTeC8rWUFnTHNmYnpqZXQyRFBtTXpjTWF6QSs0cHJrQXZkQ1VYOFN5clpNZlZ1V2NxcXNjQ2U1QWtyUHhoTzBGemEwVFdWUi9Pdzl5YlNDeFppN0w5dFVjcUlyWWo5a1ZqaGdHYjhoNEFGQ2xZTjBENG5zUGhWZkl1b0s2T1RoT2NaMm5aZ1JDZG9XN2RZbTN3djN0WVN6blJkbDdYSExnM1ExR0NZNEt4eGJyMGRBTVEzZkJVT3pUNXNtWmY4ZDAzU3RLY1dVK250cVpJU2RoY3czSDNDRHNYS3BVb3o1NjBnNFlBblQxMEhJcTBEbFF5WERUZmJsdEtxQSsvUlNOQWhkamFJUVNpTlF0RXNPRCtvTXNoZHdQL1RMTzVtMy9VRm9vcGRYT016RzZka1pDVFoxRytCRHFVc3ZFaGJyYWc5N3ZjMlh4U0d6S2N1NkJ2aFpRTnZOSjNDZjh1VnpNUUVUM3Mwc2xmc2F2NVBsdjJQb3J0YmNDT2ErYytGRGdVVmFySVc4ZUFoWDZ0dXEvOUVwbW8xRVV1SDhXU1Qxb0NVaTlrT2FFZTh4V01XYjNleGYrZ3NwZElmeXlQUVljZC9aaExNOVhPN2ZkcWczeVpRT0REQWwzRmVldi9yNVFnMkI3MDg5VlVEK2FpenZXWDM1M3MyTDk0d3hFOVVUeXB4VUdRRXVPVWtEZGl1STdTTlE1aHZZQ3lxVDRmVnZER3NOTGozSmFCTHBKdXJKNml2bVlteUhNZjhja2xubGRDZzNjRm8xYlYxaFNhZlcvWUNzMkZUMWdhZjd4aVJFdmp1RHBvWDNmTDU0cnVQMVhiTFArVngxWjVhVG1mVmJySnVBQ21iK0J5d0NOZElTbGRmeTdvYkpGOUF0T0tWcXNjZ2NEWnJsckt4Q3JRK1lhV1ZyR1dodFJGdU9PMEVEbGFGLy9EUG9UVVIwT00vczM5Z0x6WjFaenNZcTdQb0JwUlNjSnN5NFQyaWQrRGY1N3A5a1dUbWt1MlpibXk2bDVrRFVMS2UyQ2dNRnVPaEhkSjZnYjlZVVI5NzgxZC96WDMvQXZlY1g2UjlNanFGREIwdE1oZnVCbUJveWlNOW1kaUhIQjMwenphaU85SHVTK1hSdzM1VkQraG4wWnViZEhKZXpNT0FXM3pmWmUreXE0RkZiaU1nM01ORkIzT25uZDhCVnRWbzJIblVOdjhIUytZTk5hTkI5WjB4UFkxN1RWempDbGxvR25nNjYrdUVmam5Ia2I1NzNFb2NUSEN2V2NMYVVudXRydTZqcnlpYWsyRGhZTGtRMHo3WVh3TkQ5eU1UejBBdjRpdG03ZjN2bDhmSG0vVHRzRFljbmFzRXlpZVYvOExTVlhiZGl2ek1KcTRFVUpPcHd5UmdhclFGSUdSRDdmdVFxMmd1OCs4TWYzc0hjUm9UVW9Jb3VvaVhDejNYNllCZzdMT3ZWVjRKSjRwRktMbm9OTE4yRkRYMzVYN2IrZ0p0ckNUY1kwM3lZRzV6WTVSUVdvWVhsMHZseVptTHZsWjFhNFgrQmp2bFJxUkg3dWZUSklGVDg3Z1h4NFNkbFYwdzNCbytna25QMHhpYXpTMkdjaytwd3NlY2hkUUMxYWpFbzZMZjhXR0J1SitzTS9SMFg3NTRJVTNBUGhOcXd1Vk5JRFVJeDhMME9mQkpkaUpIOURDWERGQk9wZmppZTZTeWZzRHRyYytEdWFIVVZySWVGNTlMYW55c2hOMUlwZmZMNjhTTit3LzdhSmM5ektCMWhZa0RIY0lwT1VxNTRac1l5NWg5YmEyVU1TZ0U1U0lMMWl5THVMQ094S3lOampROVBrdnpsUmNCQzhWK09aL05FdGE3RGdFTzRnNDQxVTNZYWVUTzNqZlJxYUZRU2tFdTZ5eHJMTkU1U3RlRHVWOE9qbTZ0NFBwdU9MeTdlbko4SHIzUG8rZm41bTR2TDhXUWFSWXZYcFlGbU9DTHJrREpZa2dvZHl6TXVwN3d6TWNMT2FYTFBJbk1uT3lNM1VjbnRRdVh2Z1pLaFN2L2ZUS0lsVzF0aTFFZitoTXRKTXd0L2hPelVFVDkwdGdSc2dxSWJVdFp2Z1hrT29NVnJwQklPc3BTZXhrdE5iWW0zWEE4L1hPUXZ0ekl3ekFOTkNzTHpJMDNab1JCVDVwQnBMYzJNMlZ2blUrZTQ4QVRrZ3kvRDNKWll6Nk84NHEzRnV6S21tMXAyRHNnVGpFdHZUYnRCUVlzWjhjWVc3UEIvSFJROW5jMFhmbERXbHJqMnpGQ01Ua3RLdFoxNTFtSCtwbUxud0Z5WWFwQkRWcDliQTNYU1p6cnhBRmxLSzJ0TDNIZ1dsTDRPZXhub0xGaHFFUjNEYTdOK0hMRjYwUFplNEZycnc1OEpxWmhTK2VWbVpXMkpXODhjNWVuNDcySlo1RFdab3dHWmZzZkFWRjBEbGZkVG14eW45a2Y2Q1JEUitJR3BMVEY2ZHc2c1RrT2Npd0RMckVzeDNiTXBjRlF0Vk41L3NrbjY5eVM2TjE2VnJZUXNwWlcxSmVhc1NjMzk3K2lJdU5obDd6cWlpeVk0WCtFd3MzTEl6ZElPZE5qUFlDbC9aL01hU3VrRVd6SGRzVDdTZENPQ0YyMEg3VmFncmRzRVUxcFRvR1EzS0tjOUhMRnRNVjlvZldZV2FoV2x0QjgyMkdwdU1mZlRITmZlR2JBSVVIQTU3czhWdUVSL0ZoNEtTRnE3Tk1OVnRLMUFnSjE1bHRMY0lodEl3WDFDT3FFS25OemNUaW0yZC9TekhHenlQWWZkTVFPYklTZDNoTkN6ekEzUHRHS0hLQ2lNZGYydWxDWHZreU9WQkVLLzBsQ2xFZDJhZ1orQ20zd3ZZWGRjb1JYcTdXSEhNdmRhN3cvVkJ0bUlpMGxrQXkwMkQzbVp6RHlsMTFZZmRvNkQ0NHZMSEpyQTdyaEdHOVB6a3puamhINVM5ZVRpWWdpd0pUSWFWeTZHRnB0ZmtCOGFUMS8yaGlsUlZDeGZOM0NwRk1GcXBoZG9GT0xhbXA1a25MK3JGMDRXbFY4cHpYcThzRStZazhoemFMbWhmOElLZzRtbzZZUUpidk9GRFZSTkxZZE1jYmwrMUxwK0psMG1BYllHNWRFRmN0dWtqUDloc1IzSjljeTYxdU5aWlpKUC9pcnd6M2JhUU5YVXVnd3hCN2NtcUxocGVzWUZGUWl3ZDB3UHBtZUNITlhhLzRtYzVOcUZ1Vzc0cE10WHBobk1OYko2UllwVlU2c2crZDRiL2Z2b2lsbUJBSnVobENiZHlDSUl0Z0tQcU9wc0lEalFaQWR5cFhUNXVYNXVnWDlwWCtKZFcyRFI2emtpaVpobSt0OUMxYU4veGlUQXhvdHJ6bFh5ZE1qOTNYQm9CY25OOHUycWhkK0w1NEpOeUg2MHU3YkF5djVkaGxnMk43cjNVZWN5Q2JBQmxjellTcDRNQXp2dmhqdU1YdnlWd3pYeVN1Mll4RGorbUlDemYycDlGK29UT0xQZXE5NUgySVZWZGNDanZwZDhQenc4YnNoTHBuSlFNTk9zYTlSNG5QaGQ2QzZCZnUvbUFKT3Myd0ltdW1KZ2h0ZFdtbkJEVlhWSThXWWpodkZCQWNBTk9lVitSSElseWk5WGQ0ajFlWUM3MEVWdnZ6QndDR1dwbnhkVTdiUFY2NWNxY0dWS1NJZEdmVjh3UGc4YnVOcXJjLzVIR2xoRUUvS2hnZkpwbmdjWUtHOW4rTC8vL2dhdHB0WkE2a3hzaklseEVDdkNIRTZBelZpOVBJZnRncW1WS2pIakFjQnlsejJDZUtRdlkrRkdzQk1GeWJPRnE2bHRJSms2SzUxNElrbzdOUXZPTjJoN3poaEZOam5xS3lFbndTVFBtSHFvZDlJKzlVUEdPM1FCekVCOFpGMmF3ZFhVVm9oc3NrNWxtQzIxUXFaWmNGNmpmWlF4WS80dFVWKzVaS3E2MHA0RVkrWkszWVBZTDZEUzFkelA1bm5XYXZxTitJZUlwLzl5NEpuNTRZNmxWUm5JaGlmayt4eXNoV2pOK0ZqMUxsQmZxQVZydUV1d3g1WjEvVmkxSGZPVGJ1OUZINGkyZUlsMVBHQU5OVjVOcllYVVFxa1VTc3lKbEp2dXFGSWRRdXNBVkhMZWlXV3UxMDg4T05vdGpxM1dSVmszL2pPY25uWmRXMWZiWXVXRWptblA2aW1TWXQ5TnZKcGFCZG1YUjJuR3JGTkhDaC84RktBS2xtT2x2a2VZdWxNcjJRY1lPNkxSNWpsRUNYTFFRUHg4Qi9DV1ovd0JPZUQxTFRlUTFiOUhqWW93Rmp5c3VCSFd0M3JQU24zUE1EZTN3azEzcHRST3pXd3hGZGQvRFFLODVMeEZ6SGc1QkZSSFhsRWZpZ2YxTzlaWWFTUm1waWpGdDZVRnlHTlZEMmdCOGwzV0RaZDZGQ3dHR2FCc09WMGhJbFcwUEEwczhLUGQyQzFXR2lFY01DTDl0NUovM3NCSDV2eW1jWlRmN29VbmRyaEl0ZHhoYXVlRTRiM29zZkorUnFrbXJwaXA3ekhpWmkydk5MZ2NEZ3dNbFZVRFBaWmpMS3VpOVYvTTVYN2d2Mml4OG41V3FTWld6THlqQ0xGZTEvR2VvczErQXE3empzVXEyc3dsUjFPQnVXd0hoRVdIdGNPUDhxeGNxUkJ1TFQxUkFiYWhuNE05MC9LRkFiNHNWdE5tSzVoRWlJczRHMVBwKzlRSXVzUXFWQk5WQ0xkR2VJRTc3OGQwbm4reHpEUHZlQ3pzSnBiVERVQ1hWbkhsTGFQTkxNMlpUbk9PazB4cWR1SFdUTWtrYjEyZndTMkRValg3bmNjcTIyemxYTXdsby9ZUmpaMGtPb1RVWUpkcVlzZGVvMWtHYUU3bnZTMnptTFJUVnFicUxOUFFHTytseGdJSnV0elRueEFUcFpLUnVTa1B3RnlhNFl6TVJZQ2lMUEd1d2lTM0VOWGVGS0pNQi9vczA5QVl1MHpXUlp2RGdGcHRjdUdZTUI2bEw2RHMzUGxoS05IWU9uVm9WMkVDWFFhMXR2Y291Z0crbFdzYlh5RVF5K3dwWC9TdUswcUYxYktKTlErWVlJdWlpakNqNnVMNFZoV3hSQ3VMTTlobFVDc0trRzA2MXYrbkl1ekFiTHVnWEtHbGxEc2ViVXBOMjVTWUhPeDVJQlJ6RUJab0lxTUluZ3UxdG9YNE90bi9WVXphUWxGOW5nRmpKVFZGRUsrY2NaU2FUb0w4ME9mcFdqTHhadjV6MUZuSVpPZmxBS2lxMk9BcElreTRIZzBiaWFnRjcvZmZnc3BqNEUweENXVjd3RUs5Wmp3YUxGOEFxMUFpcW1KSUFHUHZBZ0pIeHlpVWJ6bXJQZXBzMHlMK0w0NUFmaFVsOEhqM1N4bnlReEZUSnQ4TkFLeEdpYWlLYXd6SE1EVGFDclA0bkFkczVVNkpHanl2VTNPZTlNdGxnS0JFVmd0ZWJ4enFnc2tweGl4bDVDM2ZmeWFVM3AzWkdLR1FnM0wycno3Zm81Q1UwdWZwSkdSTTlYajMySi9sVmNwNU8yYXFTaDcvQmZrdWtVcXAyOTdBMTMxdzlZREpXclNaT3ZuOEhIUEliQWp0QXpEc3RmeUpkc3piMjJHZTRmQ0FQQjd1SkVQa3NxRjByczlxbVg0a1Y2RG5xYTUwd2lFc3NISzV1c3VrcTJvWFBESWJoTVYxeU5XcUtYTVNiVXVBbDF6Qi9iLzlFOFlLVTZpaytOenRZSytQbHRWU3h5TkYzV1gzN2NBZ3l6emdRV21hTHBMOUowUks3eGtyZE9RU1ZENFVlMFcwTG5JeG12OStjK0JubkZZWERLUEhpODR4TWEzbFZsQUhCclVybkp4a1JFVnN3TVZoTFd0RGNUbFd5ZGNmS0hpSHNzdUpUREp0T0o0VGI0aG5NQ3FZNlh6ZUp5bWVUbzVrSGw2eHJNaWVwNmp6RWNNK215QVFWaitEdGNra2FicUk3WkNGeFNCYjRFYjA1TnVOWkp3SmswMXhuK2U1TzI3MkhpSDFzcW9QUHgyUUtuekJhMFJkNWFRcXdzblptRWY5S0NOTWVaajgxS0xrVEhRY1k5VnMrR0tOY09Tb3VweFNUUFB4ZGtXWnBYbkxyRG5ZTS84M1pjSE1wdis2bUtiSUtDUXpyYUkyWml2VGVSOEtzVkhJZWpXMjh2NFRhZXFBaW9xMWpqSFc4UnlheTVmV3BaUFMzb3N4T2luc0NrRVJCOWFwZWg0Q1E3TXY3cjlsMXE3YTVPN1FaSHh3MUd4Q1h0Ym9ybjU5VkM2bnl5dVNKQlI0a0tXSy9KTTcvRnkvRjc1UERqcER5ekU3SEtJZ2d2WU1mUUhJdHBLQVFVVlVoTzZiWXBPOVBmOXNqYzdZYWorTXVUQVIrV3BUbm56TnhwWHh2Z2lNSFAxbXpaUCtHM0x6TkRJeTV5SklrQkpvVTN6eXFXTHRKU2lPUG05czNrbmdadEFWUmdobVpvTC9SR0U4U1crbThNbWl0ZlpmUmlsdHEwMlJ2NWg3bm5ubm1ySC9SKzF3SEhXNWY5Ujc5QmpudHdxK1UyOC9SNzdMRUFzVC92KzZLWGJ5SXdsMVlXTFFJMTUvQlZiclZKSkE5WFVvRzltd2NoR2I4UC9GQkZXdUx1VzBGUGhLdE9WRUV3RTNOK25wRThkS0pBbGVBaldEWXhLRkJxd1o4ZjlBaFpkQ0VmUCs1RWhxMGNaRE5jZExkVEVkY1VKOTV3WlJxSDNOQ2hNQkZqeHdVUXlQTW1XMENEeXRNaFBWeGZTVUVRWjBSUlNGdXRmc1dORG9TYnhRWVNLV1dIcnFYL0Z5QlBQSkNnbXdUT1dFUmhjcWVlOFRhNTZuNmdncmhlQ0ZDaE45RXRJd051Ni9tRUYxTVQxVkorQXc5dDlzTXB3YVZBck5BK0FVRW9XWUI1U00wZmN5YmxHZG42Zkd5aTJYbW9JSGwzRS9KZEtMSlVsSkFUVHBKUmQ5b3NiQXp4QlhuWituSUh1bytwSW1vWTdhL015dTFKb01oUm5sdUNlckM5TDNGSWZBYTMyM09sd3FKeW5IK21RWDQ3QVhmRlNXQU1FY2x5MDZJYWVVQzhpMUhsekdTK1ZuTTUzVnE4WDBEU3paLyt4allTcEZsakFuRTFTTmxNVVlmYTJYcUxvcFFHMTViRE12TklrQW8zMHppYTFNcWxQb0JKS01VVFZTa21rSUkrODAxa3gxNStjb3RGcHd1WWpHQW05RG15b0RTOHVmTVhUaG1veGhXOWZOeHdEaDFTbTFnZVJwMWZrNUdSc3V1RnpHMDB2cG9PZmpBL05pWXVzS05NbWNSQ0htRVRITVJ3elRsRTFabkVKMDUrZDVhSHNGYXhuUEpoY0N1d1p2eHRObzhSelc3SFFhUXZNZjU1ZXdLUytKTGdPUnFwbVJQZ1FSSTM5KzFrMm9YRnVRRWYxbnd1VDhuRVlXbkY5Y2pxZlJYRzE4WUVtRkk5T2ZUdzluUkxBeS9XSXVLRW1aWFFTOGRGeGtmeEtKTG5TWDBsSFlLOHpRWmVKbmx2M3ovK1kzSDRjMG9jSkMvcWplNE1vckZqTVdua3h3T1puM1JWS0p4M3l5WGZWSC9WOEprOHg5T0J2bmw1Tm9BWHRVNTVkQWZKREYvS1hlRm5qUkJtL0drOGdzYm9zazNjVkIweUdyaURKVXV5Nm1pN1Ava3BqbElwNUhleVplSklpWklZNzNqbW0rU0VEejJ1TGx1UGFQTEk2VFhpcXQ2SE1kZFQ2ZUpRcG9sY2xGUUtwaS9ZK1BpWjhKcjR2ejRCQkZkRG1aYWFya0xPYlBqSzgzUjQ1YWhPbzdBdz09J1xyXG5cclxuICAgIGtvZmlCdXR0b24uYXBwZW5kQ2hpbGQoa29maUltYWdlKVxyXG4gICAgY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoa29maUJ1dHRvbilcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlRmVhdHVyZUhlYWRpbmcoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBzZXR0aW5nc0tleToga2V5b2YgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncyk6IFNldHRpbmcge1xyXG4gICAgcmV0dXJuIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0SGVhZGluZygpXHJcbiAgICAgIC5zZXRDbGFzcygnYWMtc2V0dGluZ3MtaGVhZGluZycpXHJcbiAgICAgIC5zZXROYW1lKGxhYmVsKVxyXG4gICAgICAuc2V0RGVzYyhkZXNjcmlwdGlvbilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFRvb2x0aXAoXCJSZXF1aXJlcyBhIHJlbG9hZCB0byB0YWtlIGVmZmVjdC5cIilcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKHNldHRpbmdzS2V5KSBhcyBib29sZWFuKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgW3NldHRpbmdzS2V5XTogdmFsdWUgfSlcclxuICAgICAgICAgICAgbmV3IE5vdGljZShcIlJlbG9hZCBvYnNpZGlhbiB0byBhcHBseSB0aGUgY2hhbmdlcy5cIilcclxuICAgICAgICAgIH0pXHJcbiAgICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlRGVmYXVsdFN0eWxlc1NlY3Rpb24oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nLCBzZXR0aW5nc0tleToga2V5b2YgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncywgYWxsU3R5bGFibGVBdHRyaWJ1dGVzOiBTdHlsZUF0dHJpYnV0ZVtdKSB7XHJcbiAgICBjb25zdCBkZWZhdWx0Tm9kZVN0eWxlc0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGV0YWlscycpXHJcbiAgICBkZWZhdWx0Tm9kZVN0eWxlc0VsLmNsYXNzTGlzdC5hZGQoJ3NldHRpbmctaXRlbScpXHJcblxyXG4gICAgY29uc3QgZGVmYXVsdE5vZGVTdHlsZXNTdW1tYXJ5RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdW1tYXJ5JylcclxuICAgIGRlZmF1bHROb2RlU3R5bGVzU3VtbWFyeUVsLnRleHRDb250ZW50ID0gbGFiZWxcclxuICAgIGRlZmF1bHROb2RlU3R5bGVzRWwuYXBwZW5kQ2hpbGQoZGVmYXVsdE5vZGVTdHlsZXNTdW1tYXJ5RWwpXHJcblxyXG4gICAgZm9yIChjb25zdCBzdHlsYWJsZUF0dHJpYnV0ZSBvZiBhbGxTdHlsYWJsZUF0dHJpYnV0ZXMpIHtcclxuICAgICAgbmV3IFNldHRpbmcoZGVmYXVsdE5vZGVTdHlsZXNFbClcclxuICAgICAgICAuc2V0TmFtZShzdHlsYWJsZUF0dHJpYnV0ZS5sYWJlbClcclxuICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxyXG4gICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgLmFkZE9wdGlvbnMoT2JqZWN0LmZyb21FbnRyaWVzKHN0eWxhYmxlQXR0cmlidXRlLm9wdGlvbnMubWFwKChvcHRpb24pID0+IFtvcHRpb24udmFsdWUsIG9wdGlvbi5sYWJlbF0pKSlcclxuICAgICAgICAgICAgLnNldFZhbHVlKCh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKHNldHRpbmdzS2V5KSBhcyB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KVtzdHlsYWJsZUF0dHJpYnV0ZS5kYXRhc2V0S2V5XSA/PyAnbnVsbCcpXHJcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoc2V0dGluZ3NLZXkpIGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnbnVsbCcpIGRlbGV0ZSBuZXdWYWx1ZVtzdHlsYWJsZUF0dHJpYnV0ZS5kYXRhc2V0S2V5XVxyXG4gICAgICAgICAgICAgIGVsc2UgbmV3VmFsdWVbc3R5bGFibGVBdHRyaWJ1dGUuZGF0YXNldEtleV0gPSB2YWx1ZVxyXG5cclxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHtcclxuICAgICAgICAgICAgICAgIFtzZXR0aW5nc0tleV06IG5ld1ZhbHVlXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoZGVmYXVsdE5vZGVTdHlsZXNFbClcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzTm9kZVR5cGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdHlsZUF0dHJpYnV0ZU9wdGlvbiB7XHJcbiAgaWNvbjogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIHZhbHVlOiBzdHJpbmcgfCBudWxsIC8vIFRoZSBlbGVtZW50IHdpdGggdGhlIG51bGwgdmFsdWUgaXMgdGhlIGRlZmF1bHRcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdHlsZUF0dHJpYnV0ZSB7XHJcbiAgZGF0YXNldEtleTogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIG5vZGVUeXBlcz86IENhbnZhc05vZGVUeXBlW11cclxuICBvcHRpb25zOiBTdHlsZUF0dHJpYnV0ZU9wdGlvbltdXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBCVUlMVElOX05PREVfU1RZTEVfQVRUUklCVVRFUyA9IFtcclxuICB7XHJcbiAgICBkYXRhc2V0S2V5OiAndGV4dEFsaWduJyxcclxuICAgIGxhYmVsOiAnVGV4dCBBbGlnbm1lbnQnLFxyXG4gICAgbm9kZVR5cGVzOiBbJ3RleHQnXSxcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhbGlnbi1sZWZ0JyxcclxuICAgICAgICBsYWJlbDogJ0xlZnQgKGRlZmF1bHQpJyxcclxuICAgICAgICB2YWx1ZTogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2FsaWduLWNlbnRlcicsXHJcbiAgICAgICAgbGFiZWw6ICdDZW50ZXInLFxyXG4gICAgICAgIHZhbHVlOiAnY2VudGVyJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2FsaWduLXJpZ2h0JyxcclxuICAgICAgICBsYWJlbDogJ1JpZ2h0JyxcclxuICAgICAgICB2YWx1ZTogJ3JpZ2h0J1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfSxcclxuICB7XHJcbiAgICBkYXRhc2V0S2V5OiAnc2hhcGUnLFxyXG4gICAgbGFiZWw6ICdTaGFwZScsXHJcbiAgICBub2RlVHlwZXM6IFsndGV4dCddLFxyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3JlY3RhbmdsZS1ob3Jpem9udGFsJyxcclxuICAgICAgICBsYWJlbDogJ1JvdW5kIFJlY3RhbmdsZSAoZGVmYXVsdCknLFxyXG4gICAgICAgIHZhbHVlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2hhcGUtcGlsbCcsXHJcbiAgICAgICAgbGFiZWw6ICdQaWxsJyxcclxuICAgICAgICB2YWx1ZTogJ3BpbGwnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnZGlhbW9uZCcsXHJcbiAgICAgICAgbGFiZWw6ICdEaWFtb25kJyxcclxuICAgICAgICB2YWx1ZTogJ2RpYW1vbmQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2hhcGUtcGFyYWxsZWxvZ3JhbScsXHJcbiAgICAgICAgbGFiZWw6ICdQYXJhbGxlbG9ncmFtJyxcclxuICAgICAgICB2YWx1ZTogJ3BhcmFsbGVsb2dyYW0nXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnY2lyY2xlJyxcclxuICAgICAgICBsYWJlbDogJ0NpcmNsZScsXHJcbiAgICAgICAgdmFsdWU6ICdjaXJjbGUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2hhcGUtcHJlZGVmaW5lZC1wcm9jZXNzJyxcclxuICAgICAgICBsYWJlbDogJ1ByZWRlZmluZWQgUHJvY2VzcycsXHJcbiAgICAgICAgdmFsdWU6ICdwcmVkZWZpbmVkLXByb2Nlc3MnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2hhcGUtZG9jdW1lbnQnLFxyXG4gICAgICAgIGxhYmVsOiAnRG9jdW1lbnQnLFxyXG4gICAgICAgIHZhbHVlOiAnZG9jdW1lbnQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2hhcGUtZGF0YWJhc2UnLFxyXG4gICAgICAgIGxhYmVsOiAnRGF0YWJhc2UnLFxyXG4gICAgICAgIHZhbHVlOiAnZGF0YWJhc2UnXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9LFxyXG4gIHtcclxuICAgIGRhdGFzZXRLZXk6ICdib3JkZXInLFxyXG4gICAgbGFiZWw6ICdCb3JkZXInLFxyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2JvcmRlci1zb2xpZCcsXHJcbiAgICAgICAgbGFiZWw6ICdTb2xpZCAoZGVmYXVsdCknLFxyXG4gICAgICAgIHZhbHVlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYm9yZGVyLWRhc2hlZCcsXHJcbiAgICAgICAgbGFiZWw6ICdEYXNoZWQnLFxyXG4gICAgICAgIHZhbHVlOiAnZGFzaGVkJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2JvcmRlci1kb3R0ZWQnLFxyXG4gICAgICAgIGxhYmVsOiAnRG90dGVkJyxcclxuICAgICAgICB2YWx1ZTogJ2RvdHRlZCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdleWUtb2ZmJyxcclxuICAgICAgICBsYWJlbDogJ0ludmlzaWJsZScsXHJcbiAgICAgICAgdmFsdWU6ICdpbnZpc2libGUnXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9XHJcbl0gYXMgU3R5bGVBdHRyaWJ1dGVbXVxyXG5cclxuZXhwb3J0IGNvbnN0IEJVSUxUSU5fRURHRV9TVFlMRV9BVFRSSUJVVEVTID0gW1xyXG4gIHtcclxuICAgIGRhdGFzZXRLZXk6ICdwYXRoJyxcclxuICAgIGxhYmVsOiAnUGF0aCBTdHlsZScsXHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncGF0aC1zb2xpZCcsXHJcbiAgICAgICAgbGFiZWw6ICdTb2xpZCAoZGVmYXVsdCknLFxyXG4gICAgICAgIHZhbHVlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncGF0aC1kb3R0ZWQnLFxyXG4gICAgICAgIGxhYmVsOiAnRG90dGVkJyxcclxuICAgICAgICB2YWx1ZTogJ2RvdHRlZCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdwYXRoLXNob3J0LWRhc2hlZCcsXHJcbiAgICAgICAgbGFiZWw6ICdTaG9ydCBEYXNoZWQnLFxyXG4gICAgICAgIHZhbHVlOiAnc2hvcnQtZGFzaGVkJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3BhdGgtbG9uZy1kYXNoZWQnLFxyXG4gICAgICAgIGxhYmVsOiAnTG9uZyBEYXNoZWQnLFxyXG4gICAgICAgIHZhbHVlOiAnbG9uZy1kYXNoZWQnXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9LFxyXG4gIHtcclxuICAgIGRhdGFzZXRLZXk6ICdhcnJvdycsXHJcbiAgICBsYWJlbDogJ0Fycm93IFN0eWxlJyxcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhcnJvdy10cmlhbmdsZScsXHJcbiAgICAgICAgbGFiZWw6ICdUcmlhbmdsZSAoZGVmYXVsdCknLFxyXG4gICAgICAgIHZhbHVlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctdHJpYW5nbGUtb3V0bGluZScsXHJcbiAgICAgICAgbGFiZWw6ICdUcmlhbmdsZSBPdXRsaW5lJyxcclxuICAgICAgICB2YWx1ZTogJ3RyaWFuZ2xlLW91dGxpbmUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctdGhpbi10cmlhbmdsZScsXHJcbiAgICAgICAgbGFiZWw6ICdUaGluIFRyaWFuZ2xlJyxcclxuICAgICAgICB2YWx1ZTogJ3RoaW4tdHJpYW5nbGUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctaGFsdmVkLXRyaWFuZ2xlJyxcclxuICAgICAgICBsYWJlbDogJ0hhbHZlZCBUcmlhbmdsZScsXHJcbiAgICAgICAgdmFsdWU6ICdoYWx2ZWQtdHJpYW5nbGUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctZGlhbW9uZCcsXHJcbiAgICAgICAgbGFiZWw6ICdEaWFtb25kJyxcclxuICAgICAgICB2YWx1ZTogJ2RpYW1vbmQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctZGlhbW9uZC1vdXRsaW5lJyxcclxuICAgICAgICBsYWJlbDogJ0RpYW1vbmQgT3V0bGluZScsXHJcbiAgICAgICAgdmFsdWU6ICdkaWFtb25kLW91dGxpbmUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctY2lyY2xlJyxcclxuICAgICAgICBsYWJlbDogJ0NpcmNsZScsXHJcbiAgICAgICAgdmFsdWU6ICdjaXJjbGUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctY2lyY2xlLW91dGxpbmUnLFxyXG4gICAgICAgIGxhYmVsOiAnQ2lyY2xlIE91dGxpbmUnLFxyXG4gICAgICAgIHZhbHVlOiAnY2lyY2xlLW91dGxpbmUnXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9LFxyXG4gIHtcclxuICAgIGRhdGFzZXRLZXk6ICdwYXRoZmluZGluZ01ldGhvZCcsXHJcbiAgICBsYWJlbDogJ1BhdGhmaW5kaW5nIE1ldGhvZCcsXHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncGF0aGZpbmRpbmctbWV0aG9kLWJlemllcicsXHJcbiAgICAgICAgbGFiZWw6ICdCZXppZXIgKGRlZmF1bHQpJyxcclxuICAgICAgICB2YWx1ZTogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3NsYXNoJyxcclxuICAgICAgICBsYWJlbDogJ0RpcmVjdCcsXHJcbiAgICAgICAgdmFsdWU6ICdkaXJlY3QnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncGF0aGZpbmRpbmctbWV0aG9kLXNxdWFyZScsXHJcbiAgICAgICAgbGFiZWw6ICdTcXVhcmUnLFxyXG4gICAgICAgIHZhbHVlOiAnc3F1YXJlJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ21hcCcsXHJcbiAgICAgICAgbGFiZWw6ICdBKicsXHJcbiAgICAgICAgdmFsdWU6ICdhLXN0YXInXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9XHJcbl0gYXMgU3R5bGVBdHRyaWJ1dGVbXSIsICJpbXBvcnQgeyBXb3Jrc3BhY2VXaW5kb3cgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcIi4vbWFpblwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaW5kb3dzTWFuYWdlciB7XHJcbiAgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG4gIHdpbmRvd3M6IFdpbmRvd1tdID0gW3dpbmRvd11cclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbikge1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ3dpbmRvdy1vcGVuJywgXHJcbiAgICAgIChfd2luOiBXb3Jrc3BhY2VXaW5kb3csIHdpbmRvdzogV2luZG93KSA9PiB0aGlzLndpbmRvd3MucHVzaCh3aW5kb3cpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignd2luZG93LWNsb3NlJywgXHJcbiAgICAgIChfd2luOiBXb3Jrc3BhY2VXaW5kb3csIHdpbmRvdzogV2luZG93KSA9PiB0aGlzLndpbmRvd3MgPSB0aGlzLndpbmRvd3MuZmlsdGVyKCh3KSA9PiB3ICE9PSB3aW5kb3cpXHJcbiAgICApKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBzZXRJY29uLCBzZXRUb29sdGlwIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQkJveCwgQ2FudmFzLCBDYW52YXNOb2RlLCBDYW52YXNOb2RlRGF0YSwgUG9zaXRpb24sIFNpemUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBTdHlsZUF0dHJpYnV0ZSB9IGZyb20gXCJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL3N0eWxlLWNvbmZpZ1wiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5pbXBvcnQgQkJveEhlbHBlciBmcm9tIFwiLi9iYm94LWhlbHBlclwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1lbnVPcHRpb24ge1xyXG4gIGlkPzogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIGljb246IHN0cmluZ1xyXG4gIGNhbGxiYWNrPzogKCkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXNIZWxwZXIge1xyXG4gIHN0YXRpYyByZWFkb25seSBHUklEX1NJWkUgPSAyMFxyXG5cclxuICBzdGF0aWMgY2FudmFzQ29tbWFuZChwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luLCBjaGVjazogKGNhbnZhczogQ2FudmFzKSA9PiBib29sZWFuLCBydW46IChjYW52YXM6IENhbnZhcykgPT4gdm9pZCk6IChjaGVja2luZzogYm9vbGVhbikgPT4gYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhbnZhcyA9IHBsdWdpbi5nZXRDdXJyZW50Q2FudmFzKClcclxuICAgICAgaWYgKGNoZWNraW5nKSByZXR1cm4gY2FudmFzICE9PSBudWxsICYmIGNoZWNrKGNhbnZhcylcclxuXHJcbiAgICAgIGlmIChjYW52YXMpIHJ1bihjYW52YXMpXHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZUNvbnRyb2xNZW51QnV0dG9uKG1lbnVPcHRpb246IE1lbnVPcHRpb24pOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBxdWlja1NldHRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgaWYgKG1lbnVPcHRpb24uaWQpIHF1aWNrU2V0dGluZy5pZCA9IG1lbnVPcHRpb24uaWRcclxuICAgIHF1aWNrU2V0dGluZy5jbGFzc0xpc3QuYWRkKCdjYW52YXMtY29udHJvbC1pdGVtJylcclxuICAgIHNldEljb24ocXVpY2tTZXR0aW5nLCBtZW51T3B0aW9uLmljb24pXHJcbiAgICBzZXRUb29sdGlwKHF1aWNrU2V0dGluZywgbWVudU9wdGlvbi5sYWJlbCwgeyBwbGFjZW1lbnQ6ICdsZWZ0JyB9KVxyXG4gICAgcXVpY2tTZXR0aW5nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gbWVudU9wdGlvbi5jYWxsYmFjaz8uKCkpXHJcblxyXG4gICAgcmV0dXJuIHF1aWNrU2V0dGluZ1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFkZENvbnRyb2xNZW51QnV0dG9uKGNvbnRyb2xHcm91cDogSFRNTEVsZW1lbnQsIGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICBpZiAoZWxlbWVudC5pZCkgY29udHJvbEdyb3VwLnF1ZXJ5U2VsZWN0b3IoYCMke2VsZW1lbnQuaWR9YCk/LnJlbW92ZSgpXHJcbiAgICBjb250cm9sR3JvdXAuYXBwZW5kQ2hpbGQoZWxlbWVudClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGVDYXJkTWVudU9wdGlvbihjYW52YXM6IENhbnZhcywgbWVudU9wdGlvbjogTWVudU9wdGlvbiwgcHJldmlld05vZGVTaXplOiAoKSA9PiBTaXplLCBvblBsYWNlZDogKGNhbnZhczogQ2FudmFzLCBwb3M6IFBvc2l0aW9uKSA9PiB2b2lkKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgbWVudU9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgaWYgKG1lbnVPcHRpb24uaWQpIG1lbnVPcHRpb25FbGVtZW50LmlkID0gbWVudU9wdGlvbi5pZFxyXG4gICAgbWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2FudmFzLWNhcmQtbWVudS1idXR0b24nKVxyXG4gICAgbWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbW9kLWRyYWdnYWJsZScpXHJcbiAgICBzZXRJY29uKG1lbnVPcHRpb25FbGVtZW50LCBtZW51T3B0aW9uLmljb24pXHJcbiAgICBzZXRUb29sdGlwKG1lbnVPcHRpb25FbGVtZW50LCBtZW51T3B0aW9uLmxhYmVsLCB7IHBsYWNlbWVudDogJ3RvcCcgfSlcclxuXHJcbiAgICBtZW51T3B0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChfZSkgPT4ge1xyXG4gICAgICBvblBsYWNlZChjYW52YXMsIHRoaXMuZ2V0Q2VudGVyQ29vcmRpbmF0ZXMoY2FudmFzLCBwcmV2aWV3Tm9kZVNpemUoKSkpXHJcbiAgICB9KVxyXG5cclxuICAgIG1lbnVPcHRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgKGUpID0+IHtcclxuICAgICAgY2FudmFzLmRyYWdUZW1wTm9kZShlLCBwcmV2aWV3Tm9kZVNpemUoKSwgKHBvczogUG9zaXRpb24pID0+IHtcclxuICAgICAgICBjYW52YXMuZGVzZWxlY3RBbGwoKVxyXG4gICAgICAgIG9uUGxhY2VkKGNhbnZhcywgcG9zKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gbWVudU9wdGlvbkVsZW1lbnRcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhZGRDYXJkTWVudU9wdGlvbihjYW52YXM6IENhbnZhcywgZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgIGlmIChlbGVtZW50LmlkKSBjYW52YXM/LmNhcmRNZW51RWwucXVlcnlTZWxlY3RvcihgIyR7ZWxlbWVudC5pZH1gKT8ucmVtb3ZlKClcclxuICAgIGNhbnZhcz8uY2FyZE1lbnVFbC5hcHBlbmRDaGlsZChlbGVtZW50KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZVBvcHVwTWVudU9wdGlvbihtZW51T3B0aW9uOiBNZW51T3B0aW9uKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgbWVudU9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG4gICAgaWYgKG1lbnVPcHRpb24uaWQpIG1lbnVPcHRpb25FbGVtZW50LmlkID0gbWVudU9wdGlvbi5pZFxyXG4gICAgbWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2xpY2thYmxlLWljb24nKVxyXG4gICAgc2V0SWNvbihtZW51T3B0aW9uRWxlbWVudCwgbWVudU9wdGlvbi5pY29uKVxyXG4gICAgc2V0VG9vbHRpcChtZW51T3B0aW9uRWxlbWVudCwgbWVudU9wdGlvbi5sYWJlbCwgeyBwbGFjZW1lbnQ6ICd0b3AnIH0pXHJcbiAgICBtZW51T3B0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG1lbnVPcHRpb24uY2FsbGJhY2s/LigpKVxyXG5cclxuICAgIHJldHVybiBtZW51T3B0aW9uRWxlbWVudFxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZUV4cGFuZGFibGVQb3B1cE1lbnVPcHRpb24obWVudU9wdGlvbjogTWVudU9wdGlvbiwgc3ViTWVudU9wdGlvbnM6IE1lbnVPcHRpb25bXSk6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IG1lbnVPcHRpb25FbGVtZW50ID0gdGhpcy5jcmVhdGVQb3B1cE1lbnVPcHRpb24oe1xyXG4gICAgICAuLi5tZW51T3B0aW9uLFxyXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN1Ym1lbnVJZCA9IGAke21lbnVPcHRpb24uaWR9LXN1Ym1lbnVgXHJcblxyXG4gICAgICAgIGlmIChtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICBtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKVxyXG4gICAgICAgICAgbWVudU9wdGlvbkVsZW1lbnQucGFyZW50RWxlbWVudD8ucXVlcnlTZWxlY3RvcihgIyR7c3VibWVudUlkfWApPy5yZW1vdmUoKVxyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKVxyXG5cclxuICAgICAgICAvLyBBZGQgcG9wdXAgbWVudVxyXG4gICAgICAgIGNvbnN0IHN1Ym1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIHN1Ym1lbnUuaWQgPSBzdWJtZW51SWRcclxuICAgICAgICBzdWJtZW51LmNsYXNzTGlzdC5hZGQoJ2NhbnZhcy1zdWJtZW51JylcclxuICAgICAgXHJcbiAgICAgICAgLy8gQWRkIG5lc3RlZCBvcHRpb25zXHJcbiAgICAgICAgZm9yIChjb25zdCBzdWJNZW51T3B0aW9uIG9mIHN1Yk1lbnVPcHRpb25zKSB7XHJcbiAgICAgICAgICBjb25zdCBzdWJNZW51T3B0aW9uRWxlbWVudCA9IHRoaXMuY3JlYXRlUG9wdXBNZW51T3B0aW9uKHN1Yk1lbnVPcHRpb24pXHJcbiAgICAgICAgICBzdWJtZW51LmFwcGVuZENoaWxkKHN1Yk1lbnVPcHRpb25FbGVtZW50KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWVudU9wdGlvbkVsZW1lbnQucGFyZW50RWxlbWVudD8uYXBwZW5kQ2hpbGQoc3VibWVudSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gbWVudU9wdGlvbkVsZW1lbnRcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhZGRQb3B1cE1lbnVPcHRpb24oY2FudmFzOiBDYW52YXMsIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBpbmRleDogbnVtYmVyID0gLTEpIHtcclxuICAgIGNvbnN0IHBvcHVwTWVudUVsID0gY2FudmFzPy5tZW51Py5tZW51RWxcclxuICAgIGlmICghcG9wdXBNZW51RWwpIHJldHVyblxyXG5cclxuICAgIGlmIChlbGVtZW50LmlkKSB7XHJcbiAgICAgIGNvbnN0IG9wdGlvblRvUmVwbGFjZSA9IHBvcHVwTWVudUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2VsZW1lbnQuaWR9YClcclxuICAgICAgaWYgKG9wdGlvblRvUmVwbGFjZSAmJiBpbmRleCA9PT0gLTEpIGluZGV4ID0gQXJyYXkuZnJvbShwb3B1cE1lbnVFbC5jaGlsZHJlbikuaW5kZXhPZihvcHRpb25Ub1JlcGxhY2UpIC0gMVxyXG4gICAgICBvcHRpb25Ub1JlcGxhY2U/LnJlbW92ZSgpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2lzdGVyRWxlbWVudCA9IGluZGV4ID49IDAgPyBwb3B1cE1lbnVFbC5jaGlsZHJlbltpbmRleF0gOiBwb3B1cE1lbnVFbC5jaGlsZHJlbltwb3B1cE1lbnVFbC5jaGlsZHJlbi5sZW5ndGggKyBpbmRleF1cclxuICAgIHBvcHVwTWVudUVsLmluc2VydEFmdGVyKGVsZW1lbnQsIHNpc3RlckVsZW1lbnQpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0Q2VudGVyQ29vcmRpbmF0ZXMoY2FudmFzOiBDYW52YXMsIG5vZGVTaXplOiBTaXplKTogUG9zaXRpb24ge1xyXG4gICAgY29uc3Qgdmlld0JvdW5kcyA9IGNhbnZhcy5nZXRWaWV3cG9ydEJCb3goKVxyXG5cclxuICAgIHJldHVybiB7IFxyXG4gICAgICB4OiAodmlld0JvdW5kcy5taW5YICsgdmlld0JvdW5kcy5tYXhYKSAvIDIgLSBub2RlU2l6ZS53aWR0aCAvIDIsXHJcbiAgICAgIHk6ICh2aWV3Qm91bmRzLm1pblkgKyB2aWV3Qm91bmRzLm1heFkpIC8gMiAtIG5vZGVTaXplLmhlaWdodCAvIDIsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0QkJveChjYW52YXNOb2RlczogKENhbnZhc05vZGUgfCBDYW52YXNOb2RlRGF0YSlbXSkge1xyXG4gICAgbGV0IG1pblggPSBJbmZpbml0eVxyXG4gICAgbGV0IG1pblkgPSBJbmZpbml0eVxyXG4gICAgbGV0IG1heFggPSAtSW5maW5pdHlcclxuICAgIGxldCBtYXhZID0gLUluZmluaXR5XHJcblxyXG4gICAgZm9yIChjb25zdCBub2RlIG9mIGNhbnZhc05vZGVzKSB7XHJcbiAgICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZS5nZXREYXRhID8gbm9kZS5nZXREYXRhKCkgOiBub2RlXHJcblxyXG4gICAgICBtaW5YID0gTWF0aC5taW4obWluWCwgbm9kZURhdGEueClcclxuICAgICAgbWluWSA9IE1hdGgubWluKG1pblksIG5vZGVEYXRhLnkpXHJcbiAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCBub2RlRGF0YS54ICsgbm9kZURhdGEud2lkdGgpXHJcbiAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCBub2RlRGF0YS55ICsgbm9kZURhdGEuaGVpZ2h0KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IG1pblgsIG1pblksIG1heFgsIG1heFkgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHpvb21Ub0JCb3goY2FudmFzOiBDYW52YXMsIGJib3g6IEJCb3gpIHtcclxuICAgIGNvbnN0IFBBRERJTkdfQ09SUkVDVElPTl9GQUNUT1IgPSAxIC8gMS4xXHJcbiAgICBjb25zdCB6b29tZWRCQm94ID0gQkJveEhlbHBlci5zY2FsZUJCb3goYmJveCwgUEFERElOR19DT1JSRUNUSU9OX0ZBQ1RPUilcclxuXHJcbiAgICBjYW52YXMuem9vbVRvQmJveCh6b29tZWRCQm94KVxyXG4gICAgXHJcbiAgICAvLyBDYWxjdWxhdGUgem9vbSBmYWN0b3Igd2l0aG91dCBjbGFtcFxyXG4gICAgY29uc3Qgc2NhbGVGYWN0b3IgPSBNYXRoLm1pbihcclxuICAgICAgY2FudmFzLmNhbnZhc1JlY3Qud2lkdGggLyAoYmJveC5tYXhYIC0gYmJveC5taW5YKSxcclxuICAgICAgY2FudmFzLmNhbnZhc1JlY3QuaGVpZ2h0IC8gKGJib3gubWF4WSAtIGJib3gubWluWSlcclxuICAgIClcclxuXHJcbiAgICBjYW52YXMudFpvb20gPSBNYXRoLmxvZzIoc2NhbGVGYWN0b3IpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYWRkU3R5bGVBdHRyaWJ1dGVzVG9Qb3B1cChwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luLCBjYW52YXM6IENhbnZhcywgc3R5bGVBdHRyaWJ1dGVzOiBTdHlsZUF0dHJpYnV0ZVtdLCBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bGwgfSwgc2V0U3R5bGVBdHRyaWJ1dGU6IChhdHRyaWJ1dGU6IFN0eWxlQXR0cmlidXRlLCB2YWx1ZTogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnY29tYmluZUN1c3RvbVN0eWxlc0luRHJvcGRvd24nKSkgXHJcbiAgICAgIHRoaXMuYWRkU3R5bGVBdHRyaWJ1dGVzQnV0dG9ucyhjYW52YXMsIHN0eWxlQXR0cmlidXRlcywgY3VycmVudFN0eWxlQXR0cmlidXRlcywgc2V0U3R5bGVBdHRyaWJ1dGUpXHJcbiAgICBlbHNlIHRoaXMuYWRkU3R5bGVBdHRyaWJ1dGVzRHJvcGRvd25NZW51KGNhbnZhcywgc3R5bGVBdHRyaWJ1dGVzLCBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzLCBzZXRTdHlsZUF0dHJpYnV0ZSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhZGRTdHlsZUF0dHJpYnV0ZXNCdXR0b25zKGNhbnZhczogQ2FudmFzLCBzdHlsYWJsZUF0dHJpYnV0ZXM6IFN0eWxlQXR0cmlidXRlW10sIGN1cnJlbnRTdHlsZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVsbCB9LCBzZXRTdHlsZUF0dHJpYnV0ZTogKGF0dHJpYnV0ZTogU3R5bGVBdHRyaWJ1dGUsIHZhbHVlOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkKSB7XHJcbiAgICBmb3IgKGNvbnN0IHN0eWxhYmxlQXR0cmlidXRlIG9mIHN0eWxhYmxlQXR0cmlidXRlcykge1xyXG4gICAgICBjb25zdCBzZWxlY3RlZFN0eWxlID0gc3R5bGFibGVBdHRyaWJ1dGUub3B0aW9uc1xyXG4gICAgICAgIC5maW5kKG9wdGlvbiA9PiBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldID09PSBvcHRpb24udmFsdWUpID8/XHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGUub3B0aW9ucy5maW5kKHZhbHVlID0+IHZhbHVlLnZhbHVlID09PSBudWxsKSEhXHJcblxyXG4gICAgICBjb25zdCBtZW51T3B0aW9uID0gQ2FudmFzSGVscGVyLmNyZWF0ZUV4cGFuZGFibGVQb3B1cE1lbnVPcHRpb24oe1xyXG4gICAgICAgIGlkOiBgbWVudS1vcHRpb24tJHtzdHlsYWJsZUF0dHJpYnV0ZS5kYXRhc2V0S2V5fWAsXHJcbiAgICAgICAgbGFiZWw6IHN0eWxhYmxlQXR0cmlidXRlLmxhYmVsLFxyXG4gICAgICAgIGljb246IHNlbGVjdGVkU3R5bGUuaWNvblxyXG4gICAgICB9LCBzdHlsYWJsZUF0dHJpYnV0ZS5vcHRpb25zLm1hcCgoc3R5bGVPcHRpb24pID0+ICh7XHJcbiAgICAgICAgbGFiZWw6IHN0eWxlT3B0aW9uLmxhYmVsLFxyXG4gICAgICAgIGljb246IHN0eWxlT3B0aW9uLmljb24sXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgIC8vIFNldCBzdHlsZSBhdHRyaWJ1dGVcclxuICAgICAgICAgIHNldFN0eWxlQXR0cmlidXRlKHN0eWxhYmxlQXR0cmlidXRlLCBzdHlsZU9wdGlvbi52YWx1ZSlcclxuXHJcbiAgICAgICAgICAvLyBLZWVwIGNvcnJlY3QgcmVmZXJlbmNlXHJcbiAgICAgICAgICBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldID0gc3R5bGVPcHRpb24udmFsdWVcclxuXHJcbiAgICAgICAgICAvLyBVcGRhdGUgaWNvblxyXG4gICAgICAgICBzZXRJY29uKG1lbnVPcHRpb24sIHN0eWxlT3B0aW9uLmljb24pXHJcblxyXG4gICAgICAgICAgLy8gQ2xvc2UgbWVudVxyXG4gICAgICAgICAgbWVudU9wdGlvbi5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2xpY2snKSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pKSlcclxuXHJcbiAgICAgIC8vIEFkZCBtZW51IG9wdGlvbiB0byBtZW51IGJhclxyXG4gICAgICBDYW52YXNIZWxwZXIuYWRkUG9wdXBNZW51T3B0aW9uKGNhbnZhcywgbWVudU9wdGlvbilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhZGRTdHlsZUF0dHJpYnV0ZXNEcm9wZG93bk1lbnUoY2FudmFzOiBDYW52YXMsIHN0eWxhYmxlQXR0cmlidXRlczogU3R5bGVBdHRyaWJ1dGVbXSwgY3VycmVudFN0eWxlQXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudWxsIH0sIHNldFN0eWxlQXR0cmlidXRlOiAoYXR0cmlidXRlOiBTdHlsZUF0dHJpYnV0ZSwgdmFsdWU6IHN0cmluZyB8IG51bGwpID0+IHZvaWQpIHtcclxuICAgIGNvbnN0IFNUWUxFX01FTlVfSUQgPSAnc3R5bGUtbWVudSdcclxuICAgIGNvbnN0IFNUWUxFX01FTlVfRFJPUERPV05fSUQgPSAnc3R5bGUtbWVudS1kcm9wZG93bidcclxuICAgIGNvbnN0IFNUWUxFX01FTlVfRFJPUERPV05fU1VCTUVOVV9JRCA9ICdzdHlsZS1tZW51LWRyb3Bkb3duLXN1Ym1lbnUnXHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgcG9wdXAgbWVudSBleGlzdHNcclxuICAgIGNvbnN0IHBvcHVwTWVudUVsZW1lbnQgPSBjYW52YXM/Lm1lbnU/Lm1lbnVFbFxyXG4gICAgaWYgKCFwb3B1cE1lbnVFbGVtZW50KSByZXR1cm5cclxuICAgIFxyXG4gICAgLy8gUmVtb3ZlIHByZXZpb3VzIHN0eWxlIG1lbnVcclxuICAgIHBvcHVwTWVudUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7U1RZTEVfTUVOVV9JRH1gKT8ucmVtb3ZlKClcclxuXHJcbiAgICBjb25zdCBzdHlsZU1lbnVCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuICAgIHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuaWQgPSBTVFlMRV9NRU5VX0lEXHJcbiAgICBzdHlsZU1lbnVCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NsaWNrYWJsZS1pY29uJylcclxuXHJcbiAgICBzZXRJY29uKHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQsICdwYWludGJydXNoJylcclxuICAgIHNldFRvb2x0aXAoc3R5bGVNZW51QnV0dG9uRWxlbWVudCwgJ1N0eWxlJywgeyBwbGFjZW1lbnQ6ICd0b3AnIH0pXHJcbiAgICBcclxuICAgIC8vIEFkZCBzdHlsZSBtZW51IHRvIHBvcHVwIG1lbnVcclxuICAgIHBvcHVwTWVudUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGVNZW51QnV0dG9uRWxlbWVudClcclxuXHJcbiAgICAvLyBBZGQgY2xpY2sgZXZlbnRcclxuICAgIHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlzT3BlbiA9IHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLWFjdGl2ZS1tZW51JylcclxuICAgICAgaWYgKCFpc09wZW4pIHtcclxuICAgICAgICBwb3B1cE1lbnVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke1NUWUxFX01FTlVfRFJPUERPV05fSUR9YCk/LnJlbW92ZSgpXHJcbiAgICAgICAgcG9wdXBNZW51RWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtTVFlMRV9NRU5VX0RST1BET1dOX1NVQk1FTlVfSUR9YCk/LnJlbW92ZSgpXHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHN0eWxlTWVudURyb3Bkb3duRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5pZCA9IFNUWUxFX01FTlVfRFJPUERPV05fSURcclxuICAgICAgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUnKVxyXG5cclxuICAgICAgLy8gUG9zaXRpb24gY29ycmVjdGx5XHJcbiAgICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcclxuICAgICAgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICdpbml0aWFsJ1xyXG5cclxuICAgICAgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LnN0eWxlLnRvcCA9IGAke3BvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0fXB4YFxyXG5cclxuICAgICAgY29uc3QgY2FudmFzV3JhcHBlckNlbnRlclggPSBjYW52YXMud3JhcHBlckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyBjYW52YXMud3JhcHBlckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC8gMlxyXG5cclxuICAgICAgY29uc3QgbGVmdFBvc2l0aW9uID0gc3R5bGVNZW51QnV0dG9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0gcG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0XHJcbiAgICAgIGNvbnN0IHJpZ2h0UG9zaXRpb24gPSBwb3B1cE1lbnVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0IC0gc3R5bGVNZW51QnV0dG9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodFxyXG5cclxuICAgICAgLy8gU3dhcCBzaWRlcyBpZiBpdCBpcyB0b28gY2xvc2UgdG8gdGhlIGVkZ2VcclxuICAgICAgaWYgKHBvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIGxlZnRQb3NpdGlvbiA8IGNhbnZhc1dyYXBwZXJDZW50ZXJYKVxyXG4gICAgICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGVmdFBvc2l0aW9ufXB4YFxyXG4gICAgICBlbHNlIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS5yaWdodCA9IGAke3JpZ2h0UG9zaXRpb259cHhgXHJcblxyXG4gICAgICAvLyBBZGQgc3R5bGUgb3B0aW9uc1xyXG4gICAgICBmb3IgKGNvbnN0IHN0eWxhYmxlQXR0cmlidXRlIG9mIHN0eWxhYmxlQXR0cmlidXRlcykge1xyXG4gICAgICAgIGNvbnN0IHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbScpXHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3RhcHBhYmxlJylcclxuXHJcbiAgICAgICAgLy8gQWRkIGljb25cclxuICAgICAgICBjb25zdCBpY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgaWNvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudS1pdGVtLWljb24nKVxyXG5cclxuICAgICAgICBsZXQgc2VsZWN0ZWRTdHlsZSA9IHN0eWxhYmxlQXR0cmlidXRlLm9wdGlvbnNcclxuICAgICAgICAgIC5maW5kKG9wdGlvbiA9PiBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldID09PSBvcHRpb24udmFsdWUpID8/XHJcbiAgICAgICAgICBzdHlsYWJsZUF0dHJpYnV0ZS5vcHRpb25zLmZpbmQodmFsdWUgPT4gdmFsdWUudmFsdWUgPT09IG51bGwpISFcclxuICAgICAgICBzZXRJY29uKGljb25FbGVtZW50LCBzZWxlY3RlZFN0eWxlLmljb24pXHJcblxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hcHBlbmRDaGlsZChpY29uRWxlbWVudClcclxuXHJcbiAgICAgICAgLy8gQWRkIGxhYmVsXHJcbiAgICAgICAgY29uc3QgbGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBsYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudS1pdGVtLXRpdGxlJylcclxuICAgICAgICBsYWJlbEVsZW1lbnQudGV4dENvbnRlbnQgPSBzdHlsYWJsZUF0dHJpYnV0ZS5sYWJlbFxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbEVsZW1lbnQpXHJcblxyXG4gICAgICAgIC8vIEFkZCBleHBhbmQgaWNvblxyXG4gICAgICAgIGNvbnN0IGV4cGFuZEljb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBleHBhbmRJY29uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0taWNvbicpXHJcbiAgICAgICAgc2V0SWNvbihleHBhbmRJY29uRWxlbWVudCwgJ2NoZXZyb24tcmlnaHQnKVxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hcHBlbmRDaGlsZChleHBhbmRJY29uRWxlbWVudClcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRvIGRyb3Bkb3duXHJcbiAgICAgICAgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LmFwcGVuZENoaWxkKHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudClcclxuXHJcbiAgICAgICAgLy8gQWRkIGhvdmVyIGVmZmVjdFxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZW50ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICBzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybGVhdmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICBzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIEFkZCBjbGljayBldmVudFxyXG4gICAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgIC8vIFJlbW92ZSBwcmV2aW91cyBzdWJtZW51XHJcbiAgICAgICAgICBwb3B1cE1lbnVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke1NUWUxFX01FTlVfRFJPUERPV05fU1VCTUVOVV9JRH1gKT8ucmVtb3ZlKClcclxuXHJcbiAgICAgICAgICBjb25zdCBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQuaWQgPSBTVFlMRV9NRU5VX0RST1BET1dOX1NVQk1FTlVfSURcclxuICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudScpXHJcbiAgICAgIFxyXG4gICAgICAgICAgLy8gUG9zaXRpb24gY29ycmVjdGx5XHJcbiAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJ1xyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnaW5pdGlhbCdcclxuXHJcbiAgICAgICAgICBjb25zdCB0b3BPZmZzZXQgPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHN0eWxlTWVudURyb3Bkb3duRWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSkgKyAoc3R5bGVNZW51RHJvcGRvd25FbGVtZW50Lm9mZnNldEhlaWdodCAtIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5jbGllbnRIZWlnaHQpIC8gMlxyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5zdHlsZS50b3AgPSBgJHtzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gdG9wT2Zmc2V0IC0gcG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3B9cHhgXHJcblxyXG4gICAgICAgICAgLy8gU3dhcCBzaWRlcyBpZiBpdCBpcyB0b28gY2xvc2UgdG8gdGhlIGVkZ2VcclxuICAgICAgICAgIGNvbnN0IGxlZnRQb3NpdGlvbiA9IHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCAtIHBvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdFxyXG4gICAgICAgICAgY29uc3QgcmlnaHRQb3NpdGlvbiA9IHBvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgLSBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdFxyXG5cclxuICAgICAgICAgIC8vIFN3YXAgc2lkZXMgaWYgaXQgaXMgdG9vIGNsb3NlIHRvIHRoZSBlZGdlXHJcbiAgICAgICAgICBpZiAocG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgbGVmdFBvc2l0aW9uIDwgY2FudmFzV3JhcHBlckNlbnRlclgpXHJcbiAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQuc3R5bGUubGVmdCA9IGAke2xlZnRQb3NpdGlvbn1weGBcclxuICAgICAgICAgIGVsc2Ugc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5zdHlsZS5yaWdodCA9IGAke3JpZ2h0UG9zaXRpb259cHhgXHJcblxyXG4gICAgICAgICAgLy8gQWRkIHN0eWxlIG9wdGlvbnNcclxuICAgICAgICAgIGZvciAoY29uc3Qgc3R5bGVPcHRpb24gb2Ygc3R5bGFibGVBdHRyaWJ1dGUub3B0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0nKVxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3RhcHBhYmxlJylcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBpY29uXHJcbiAgICAgICAgICAgIGNvbnN0IHN1Ym1lbnVJY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgICAgIHN1Ym1lbnVJY29uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0taWNvbicpXHJcbiAgICAgICAgICAgIHNldEljb24oc3VibWVudUljb25FbGVtZW50LCBzdHlsZU9wdGlvbi5pY29uKVxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmFwcGVuZENoaWxkKHN1Ym1lbnVJY29uRWxlbWVudClcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBsYWJlbFxyXG4gICAgICAgICAgICBjb25zdCBzdWJtZW51TGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgc3VibWVudUxhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0tdGl0bGUnKVxyXG4gICAgICAgICAgICBzdWJtZW51TGFiZWxFbGVtZW50LnRleHRDb250ZW50ID0gc3R5bGVPcHRpb24ubGFiZWxcclxuICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5hcHBlbmRDaGlsZChzdWJtZW51TGFiZWxFbGVtZW50KVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIHNlbGVjdGVkIGljb25cclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkU3R5bGUgPT09IHN0eWxlT3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtb2Qtc2VsZWN0ZWQnKVxyXG5cclxuICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZEljb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgICBzZWxlY3RlZEljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbS1pY29uJylcclxuICAgICAgICAgICAgICBzZWxlY3RlZEljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21vZC1zZWxlY3RlZCcpXHJcblxyXG4gICAgICAgICAgICAgIHNldEljb24oc2VsZWN0ZWRJY29uRWxlbWVudCwgJ2NoZWNrJylcclxuICAgICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmFwcGVuZENoaWxkKHNlbGVjdGVkSWNvbkVsZW1lbnQpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCB0byBkcm9wZG93biBzdWJtZW51XHJcbiAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudClcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBob3ZlciBlZmZlY3RcclxuICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZW50ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsZWF2ZScsICgpID0+IHtcclxuICAgICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJylcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBjbGljayBldmVudFxyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgIC8vIFNldCBzdHlsZSBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgICBzZXRTdHlsZUF0dHJpYnV0ZShzdHlsYWJsZUF0dHJpYnV0ZSwgc3R5bGVPcHRpb24udmFsdWUpXHJcblxyXG4gICAgICAgICAgICAgIC8vIEtlZXAgY29ycmVjdCByZWZlcmVuY2VcclxuICAgICAgICAgICAgICBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldID0gc3R5bGVPcHRpb24udmFsdWVcclxuICAgICAgICAgICAgICBzZWxlY3RlZFN0eWxlID0gc3R5bGVPcHRpb25cclxuXHJcbiAgICAgICAgICAgICAgLy8gVXBkYXRlIGljb25cclxuICAgICAgICAgICAgICBzZXRJY29uKGljb25FbGVtZW50LCBzdHlsZU9wdGlvbi5pY29uKVxyXG5cclxuICAgICAgICAgICAgICAvLyBDbG9zZSBtZW51XHJcbiAgICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5yZW1vdmUoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIEFwcGVuZCB0byBib2R5XHJcbiAgICAgICAgICBwb3B1cE1lbnVFbGVtZW50LmFwcGVuZENoaWxkKHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQpXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQXBwZW5kIHRvIGJvZHlcclxuICAgICAgcG9wdXBNZW51RWxlbWVudC5hcHBlbmRDaGlsZChzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQpXHJcbiAgICB9KVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBCQm94LCBDYW52YXNOb2RlRGF0YSwgUG9zaXRpb24sIFNpZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQkJveEhlbHBlciB7XHJcbiAgc3RhdGljIGNvbWJpbmVCQm94ZXMoYmJveGVzOiBCQm94W10pOiBCQm94IHtcclxuICAgIGxldCBtaW5YID0gSW5maW5pdHlcclxuICAgIGxldCBtaW5ZID0gSW5maW5pdHlcclxuICAgIGxldCBtYXhYID0gLUluZmluaXR5XHJcbiAgICBsZXQgbWF4WSA9IC1JbmZpbml0eVxyXG5cclxuICAgIGZvciAobGV0IGJib3ggb2YgYmJveGVzKSB7XHJcbiAgICAgIG1pblggPSBNYXRoLm1pbihtaW5YLCBiYm94Lm1pblgpXHJcbiAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCBiYm94Lm1pblkpXHJcbiAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCBiYm94Lm1heFgpXHJcbiAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCBiYm94Lm1heFkpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgbWluWCwgbWluWSwgbWF4WCwgbWF4WSB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2NhbGVCQm94KGJib3g6IEJCb3gsIHNjYWxlOiBudW1iZXIpOiBCQm94IHtcclxuICAgIGxldCBkaWZmWCA9IChzY2FsZSAtIDEpICogKGJib3gubWF4WCAtIGJib3gubWluWClcclxuICAgIGxldCBkaWZmWSA9IChzY2FsZSAtIDEpICogKGJib3gubWF4WSAtIGJib3gubWluWSlcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtaW5YOiBiYm94Lm1pblggLSBkaWZmWCAvIDIsXHJcbiAgICAgIG1heFg6IGJib3gubWF4WCArIGRpZmZYIC8gMixcclxuICAgICAgbWluWTogYmJveC5taW5ZIC0gZGlmZlkgLyAyLFxyXG4gICAgICBtYXhZOiBiYm94Lm1heFkgKyBkaWZmWSAvIDJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBpbnNpZGVCQm94KHBvc2l0aW9uOiBQb3NpdGlvbnxCQm94LCBiYm94OiBCQm94LCBjYW5Ub3VjaEVkZ2U6IEJvb2xlYW4pOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHByb3ZpZGVkQkJveCA9IHtcclxuICAgICAgbWluWDogKHBvc2l0aW9uIGFzIEJCb3gpLm1pblggPz8gKHBvc2l0aW9uIGFzIFBvc2l0aW9uKS54LFxyXG4gICAgICBtaW5ZOiAocG9zaXRpb24gYXMgQkJveCkubWluWSA/PyAocG9zaXRpb24gYXMgUG9zaXRpb24pLnksXHJcbiAgICAgIG1heFg6IChwb3NpdGlvbiBhcyBCQm94KS5tYXhYID8/IChwb3NpdGlvbiBhcyBQb3NpdGlvbikueCxcclxuICAgICAgbWF4WTogKHBvc2l0aW9uIGFzIEJCb3gpLm1heFkgPz8gKHBvc2l0aW9uIGFzIFBvc2l0aW9uKS55XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBjYW5Ub3VjaEVkZ2UgPyBwcm92aWRlZEJCb3gubWluWCA+PSBiYm94Lm1pblggJiYgcHJvdmlkZWRCQm94Lm1heFggPD0gYmJveC5tYXhYICYmIHByb3ZpZGVkQkJveC5taW5ZID49IGJib3gubWluWSAmJiBwcm92aWRlZEJCb3gubWF4WSA8PSBiYm94Lm1heFkgOlxyXG4gICAgICBwcm92aWRlZEJCb3gubWluWCA+IGJib3gubWluWCAmJiBwcm92aWRlZEJCb3gubWF4WCA8IGJib3gubWF4WCAmJiBwcm92aWRlZEJCb3gubWluWSA+IGJib3gubWluWSAmJiBwcm92aWRlZEJCb3gubWF4WSA8IGJib3gubWF4WVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGVubGFyZ2VCQm94KGJib3g6IEJCb3gsIHBhZGRpbmc6IG51bWJlcik6IEJCb3gge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWluWDogYmJveC5taW5YIC0gcGFkZGluZyxcclxuICAgICAgbWluWTogYmJveC5taW5ZIC0gcGFkZGluZyxcclxuICAgICAgbWF4WDogYmJveC5tYXhYICsgcGFkZGluZyxcclxuICAgICAgbWF4WTogYmJveC5tYXhZICsgcGFkZGluZ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIG1vdmVJbkRpcmVjdGlvbihwb3NpdGlvbjogUG9zaXRpb24sIHNpZGU6IFNpZGUsIGRpc3RhbmNlOiBudW1iZXIpOiBQb3NpdGlvbiB7XHJcbiAgICBzd2l0Y2ggKHNpZGUpIHtcclxuICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICByZXR1cm4geyB4OiBwb3NpdGlvbi54LCB5OiBwb3NpdGlvbi55IC0gZGlzdGFuY2UgfVxyXG4gICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogcG9zaXRpb24ueCArIGRpc3RhbmNlLCB5OiBwb3NpdGlvbi55IH1cclxuICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICByZXR1cm4geyB4OiBwb3NpdGlvbi54LCB5OiBwb3NpdGlvbi55ICsgZGlzdGFuY2UgfVxyXG4gICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICByZXR1cm4geyB4OiBwb3NpdGlvbi54IC0gZGlzdGFuY2UsIHk6IHBvc2l0aW9uLnkgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldENlbnRlck9mQkJveFNpZGUoYmJveDogQkJveCwgc2lkZTogU2lkZSk6IFBvc2l0aW9uIHtcclxuICAgIHN3aXRjaCAoc2lkZSkge1xyXG4gICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgIHJldHVybiB7IHg6IChiYm94Lm1pblggKyBiYm94Lm1heFgpIC8gMiwgeTogYmJveC5taW5ZIH1cclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIHJldHVybiB7IHg6IGJib3gubWF4WCwgeTogKGJib3gubWluWSArIGJib3gubWF4WSkgLyAyIH1cclxuICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICByZXR1cm4geyB4OiAoYmJveC5taW5YICsgYmJveC5tYXhYKSAvIDIsIHk6IGJib3gubWF4WSB9XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIHJldHVybiB7IHg6IGJib3gubWluWCwgeTogKGJib3gubWluWSArIGJib3gubWF4WSkgLyAyIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRTaWRlVmVjdG9yKHNpZGU/OiBTaWRlKTogUG9zaXRpb24ge1xyXG4gICAgc3dpdGNoIChzaWRlKSB7XHJcbiAgICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogMSB9XHJcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICByZXR1cm4geyB4OiAxLCB5OiAwIH1cclxuICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICByZXR1cm4geyB4OiAwLCB5OiAtMSB9XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIHJldHVybiB7IHg6IC0xLCB5OiAwIH1cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4geyB4OiAwLCB5OiAwIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0hvcml6b250YWwoc2lkZTogU2lkZSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHNpZGUgPT09ICdsZWZ0JyB8fCBzaWRlID09PSAncmlnaHQnXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZGlyZWN0aW9uKHNpZGU6IFNpZGUpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIChzaWRlID09PSAncmlnaHQnIHx8IHNpZGUgPT09ICdib3R0b20nKSA/IDEgOiAtMVxyXG4gIH1cclxufSIsICJpbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcInNyYy9tYWluXCJcclxuaW1wb3J0IHsgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncyB9IGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luXHJcblxyXG4gIGFic3RyYWN0IGlzRW5hYmxlZCgpOiBib29sZWFuIHwga2V5b2YgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5nc1xyXG4gIGFic3RyYWN0IGluaXQoKTogdm9pZFxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG5cclxuICAgIGNvbnN0IGlzRW5hYmxlZCA9IHRoaXMuaXNFbmFibGVkKClcclxuICAgIFxyXG4gICAgaWYgKCEoaXNFbmFibGVkID09PSB0cnVlIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoaXNFbmFibGVkIGFzIGFueSkpKSByZXR1cm5cclxuXHJcbiAgICB0aGlzLmluaXQoKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIFBvc2l0aW9uIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgR1JPVVBfTk9ERV9TSVpFID0geyB3aWR0aDogMzAwLCBoZWlnaHQ6IDMwMCB9XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcm91cENhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4ge1xyXG4gICAgICAgIENhbnZhc0hlbHBlci5hZGRDYXJkTWVudU9wdGlvbihcclxuICAgICAgICAgIGNhbnZhcyxcclxuICAgICAgICAgIENhbnZhc0hlbHBlci5jcmVhdGVDYXJkTWVudU9wdGlvbihcclxuICAgICAgICAgICAgY2FudmFzLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaWQ6ICdjcmVhdGUtZ3JvdXAnLFxyXG4gICAgICAgICAgICAgIGxhYmVsOiAnRHJhZyB0byBhZGQgZ3JvdXAnLFxyXG4gICAgICAgICAgICAgIGljb246ICdncm91cCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKCkgPT4gR1JPVVBfTk9ERV9TSVpFLFxyXG4gICAgICAgICAgICAoY2FudmFzOiBDYW52YXMsIHBvczogUG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgICBjYW52YXMuY3JlYXRlR3JvdXBOb2RlKHtcclxuICAgICAgICAgICAgICAgIHBvczogcG9zLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogR1JPVVBfTk9ERV9TSVpFXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgTWVudSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nXHJcbmltcG9ydCB7IEJCb3gsIENhbnZhcywgQ2FudmFzRWRnZSwgQ2FudmFzRWxlbWVudCwgQ2FudmFzTm9kZSwgUG9zaXRpb24sIFNpemUgfSBmcm9tICdzcmMvQHR5cGVzL0NhbnZhcydcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tICdzcmMvY29yZS9ldmVudHMnXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuaW1wb3J0IEJCb3hIZWxwZXIgZnJvbSBcInNyYy91dGlscy9iYm94LWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSAnLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uJ1xyXG5cclxuY29uc3QgU1RBUlRfU0xJREVfTkFNRSA9ICdTdGFydCBTbGlkZSdcclxuY29uc3QgREVGQVVMVF9TTElERV9OQU1FID0gJ05ldyBTbGlkZSdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZXNlbnRhdGlvbkNhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgc2F2ZWRWaWV3cG9ydDogYW55ID0gbnVsbFxyXG4gIGlzUHJlc2VudGF0aW9uTW9kZTogYm9vbGVhbiA9IGZhbHNlXHJcbiAgdmlzaXRlZE5vZGVzOiBhbnlbXSA9IFtdXHJcbiAgZnVsbHNjcmVlbk1vZGFsT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbFxyXG5cclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiAncHJlc2VudGF0aW9uRmVhdHVyZUVuYWJsZWQnIGFzIGNvbnN0IH1cclxuICBcclxuICBpbml0KCkge1xyXG4gICAgLyogQWRkIHdyYXAgaW4gc2xpZGUgb3B0aW9uIHRvIGNvbnRleHQgbWVudSAqL1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5TZWxlY3Rpb25Db250ZXh0TWVudSxcclxuICAgICAgKG1lbnU6IE1lbnUsIGNhbnZhczogQ2FudmFzKSA9PiB7XHJcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG4gICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAuc2V0VGl0bGUoJ1dyYXAgaW4gc2xpZGUnKVxyXG4gICAgICAgICAgICAuc2V0SWNvbignZ2FsbGVyeS12ZXJ0aWNhbCcpXHJcbiAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuYWRkU2xpZGUoY2FudmFzLCB1bmRlZmluZWQsIFxyXG4gICAgICAgICAgICAgIEJCb3hIZWxwZXIuZW5sYXJnZUJCb3goQkJveEhlbHBlci5jb21iaW5lQkJveGVzKFxyXG4gICAgICAgICAgICAgICAgWy4uLmNhbnZhcy5zZWxlY3Rpb24udmFsdWVzKCldLm1hcCgoZWxlbWVudDogQ2FudmFzRWxlbWVudCkgPT4gZWxlbWVudC5nZXRCQm94KCkpXHJcbiAgICAgICAgICAgICAgKSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnd3JhcEluU2xpZGVQYWRkaW5nJykpXHJcbiAgICAgICAgICAgICkpXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ2NyZWF0ZS1uZXctc2xpZGUnLFxyXG5cdFx0XHRuYW1lOiAnQ3JlYXRlIG5ldyBzbGlkZScsXHJcblx0XHRcdGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gIWNhbnZhcy5yZWFkb25seSAmJiAhdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmFkZFNsaWRlKGNhbnZhcylcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdzZXQtc3RhcnQtbm9kZScsXHJcblx0XHRcdG5hbWU6ICdTZXQgc3RhcnQgbm9kZScsXHJcblx0XHRcdGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gIWNhbnZhcy5yZWFkb25seSAmJiAhdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUgJiYgY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlcy5sZW5ndGggPT09IDEsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLnNldFN0YXJ0Tm9kZShjYW52YXMsIGNhbnZhcy5ub2Rlcy5nZXQoY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlc1swXS5pZCkpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnc3RhcnQtcHJlc2VudGF0aW9uJyxcclxuICAgICAgbmFtZTogJ1N0YXJ0IHByZXNlbnRhdGlvbicsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChfY2FudmFzOiBDYW52YXMpID0+ICF0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuc3RhcnRQcmVzZW50YXRpb24oY2FudmFzKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ2NvbnRpbnVlLXByZXNlbnRhdGlvbicsXHJcbiAgICAgIG5hbWU6ICdDb250aW51ZSBwcmVzZW50YXRpb24nLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoX2NhbnZhczogQ2FudmFzKSA9PiAhdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLnN0YXJ0UHJlc2VudGF0aW9uKGNhbnZhcywgdHJ1ZSlcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdlbmQtcHJlc2VudGF0aW9uJyxcclxuICAgICAgbmFtZTogJ0VuZCBwcmVzZW50YXRpb24nLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoX2NhbnZhczogQ2FudmFzKSA9PiB0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuZW5kUHJlc2VudGF0aW9uKGNhbnZhcylcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdwcmV2aW91cy1ub2RlJyxcclxuICAgICAgbmFtZTogJ1ByZXZpb3VzIG5vZGUnLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoX2NhbnZhczogQ2FudmFzKSA9PiB0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMucHJldmlvdXNOb2RlKGNhbnZhcylcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICduZXh0LW5vZGUnLFxyXG4gICAgICBuYW1lOiAnTmV4dCBub2RlJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKF9jYW52YXM6IENhbnZhcykgPT4gdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm5leHROb2RlKGNhbnZhcylcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBSZWdpc3RlciBldmVudHNcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm9uQ2FudmFzQ2hhbmdlZChjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZU1vdmVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUpID0+IHRoaXMub25Ob2RlTW92ZWQoY2FudmFzLCBub2RlKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIG9uQ2FudmFzQ2hhbmdlZChjYW52YXM6IENhbnZhcyk6IHZvaWQge1xyXG4gICAgQ2FudmFzSGVscGVyLmFkZENhcmRNZW51T3B0aW9uKFxyXG4gICAgICBjYW52YXMsXHJcbiAgICAgIENhbnZhc0hlbHBlci5jcmVhdGVDYXJkTWVudU9wdGlvbihcclxuICAgICAgICBjYW52YXMsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICduZXctc2xpZGUnLFxyXG4gICAgICAgICAgbGFiZWw6ICdEcmFnIHRvIGFkZCBzbGlkZScsXHJcbiAgICAgICAgICBpY29uOiAnZ2FsbGVyeS12ZXJ0aWNhbCdcclxuICAgICAgICB9LFxyXG4gICAgICAgICgpID0+IHRoaXMuZ2V0RGVmYXVsdFNsaWRlU2l6ZSgpLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcywgcG9zOiBQb3NpdGlvbikgPT4gdGhpcy5hZGRTbGlkZShjYW52YXMsIHBvcylcclxuICAgICAgKVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgb25Qb3B1cE1lbnVDcmVhdGVkKGNhbnZhczogQ2FudmFzKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ3Nob3dTZXRTdGFydE5vZGVJblBvcHVwJykpIHJldHVyblxyXG5cclxuICAgIC8vIElmIHRoZSBjYW52YXMgaXMgcmVhZG9ubHkgb3IgdGhlcmUgYXJlIG11bHRpcGxlL25vIG5vZGVzIHNlbGVjdGVkLCByZXR1cm5cclxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZXNEYXRhID0gY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlc1xyXG4gICAgaWYgKGNhbnZhcy5yZWFkb25seSB8fCBzZWxlY3RlZE5vZGVzRGF0YS5sZW5ndGggIT09IDEgfHwgY2FudmFzLnNlbGVjdGlvbi5zaXplID4gMSkgcmV0dXJuXHJcbiAgICBcclxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZSA9IGNhbnZhcy5ub2Rlcy5nZXQoc2VsZWN0ZWROb2Rlc0RhdGFbMF0uaWQpXHJcbiAgICBpZiAoIXNlbGVjdGVkTm9kZSkgcmV0dXJuXHJcbiAgICBcclxuICAgIENhbnZhc0hlbHBlci5hZGRQb3B1cE1lbnVPcHRpb24oXHJcbiAgICAgIGNhbnZhcyxcclxuICAgICAgQ2FudmFzSGVscGVyLmNyZWF0ZVBvcHVwTWVudU9wdGlvbih7XHJcbiAgICAgICAgaWQ6ICdzdGFydC1ub2RlJywgXHJcbiAgICAgICAgbGFiZWw6ICdTZXQgYXMgc3RhcnQgc2xpZGUnLCBcclxuICAgICAgICBpY29uOiAncGxheScsIFxyXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNldFN0YXJ0Tm9kZShjYW52YXMsIHNlbGVjdGVkTm9kZSlcclxuICAgICAgfSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25Ob2RlTW92ZWQoX2NhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICBpZiAoIW5vZGVEYXRhLnNpZGVSYXRpbykgcmV0dXJuXHJcblxyXG4gICAgY29uc3Qgbm9kZUJCb3ggPSBub2RlLmdldEJCb3goKVxyXG4gICAgY29uc3Qgbm9kZVNpemUgPSB7XHJcbiAgICAgIHdpZHRoOiBub2RlQkJveC5tYXhYIC0gbm9kZUJCb3gubWluWCxcclxuICAgICAgaGVpZ2h0OiBub2RlQkJveC5tYXhZIC0gbm9kZUJCb3gubWluWVxyXG4gICAgfVxyXG4gICAgY29uc3Qgbm9kZUFzcGVjdFJhdGlvID0gbm9kZVNpemUud2lkdGggLyBub2RlU2l6ZS5oZWlnaHRcclxuXHJcbiAgICBpZiAobm9kZUFzcGVjdFJhdGlvIDwgbm9kZURhdGEuc2lkZVJhdGlvKVxyXG4gICAgICBub2RlU2l6ZS53aWR0aCA9IG5vZGVTaXplLmhlaWdodCAqIG5vZGVEYXRhLnNpZGVSYXRpb1xyXG4gICAgZWxzZSBub2RlU2l6ZS5oZWlnaHQgPSBub2RlU2l6ZS53aWR0aCAvIG5vZGVEYXRhLnNpZGVSYXRpb1xyXG5cclxuICAgIG5vZGUuc2V0RGF0YSh7XHJcbiAgICAgIC4uLm5vZGVEYXRhLFxyXG4gICAgICB3aWR0aDogbm9kZVNpemUud2lkdGgsXHJcbiAgICAgIGhlaWdodDogbm9kZVNpemUuaGVpZ2h0XHJcbiAgICB9KVxyXG4gIH1cclxuICBcclxuICBwcml2YXRlIGdldFN0YXJ0Tm9kZShjYW52YXM6IENhbnZhcyk6IENhbnZhc05vZGV8dW5kZWZpbmVkIHtcclxuICAgIGZvciAoY29uc3QgW18sIG5vZGVdIG9mIGNhbnZhcy5ub2Rlcykge1xyXG4gICAgICBpZiAobm9kZS5nZXREYXRhKCkuaXNTdGFydE5vZGUpIHJldHVybiBub2RlXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRTdGFydE5vZGUoY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGV8dW5kZWZpbmVkKSB7XHJcbiAgICBpZiAoIW5vZGUpIHJldHVyblxyXG5cclxuICAgIGNvbnN0IHN0YXJ0Tm9kZSA9IHRoaXMuZ2V0U3RhcnROb2RlKGNhbnZhcylcclxuICAgIGlmIChzdGFydE5vZGUpIHN0YXJ0Tm9kZS5zZXREYXRhKHsgLi4uc3RhcnROb2RlLmdldERhdGEoKSwgaXNTdGFydE5vZGU6IGZhbHNlIH0pXHJcblxyXG4gICAgaWYgKG5vZGUgIT09IHN0YXJ0Tm9kZSkgbm9kZS5zZXREYXRhKHsgLi4ubm9kZS5nZXREYXRhKCksIGlzU3RhcnROb2RlOiB0cnVlIH0sIHRydWUpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldERlZmF1bHRTbGlkZVNpemUoKTogU2l6ZSB7XHJcbiAgICBjb25zdCBzbGlkZVNpemVTdHJpbmcgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0U2xpZGVTaXplJylcclxuICAgIGNvbnN0IHNsaWRlU2l6ZUFycmF5ID0gc2xpZGVTaXplU3RyaW5nLnNwbGl0KCd4JykubWFwKCh2YWx1ZTogc3RyaW5nKSA9PiBwYXJzZUludCh2YWx1ZSkpXHJcbiAgICByZXR1cm4geyB3aWR0aDogc2xpZGVTaXplQXJyYXlbMF0sIGhlaWdodDogc2xpZGVTaXplQXJyYXlbMV0gfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRTbGlkZUFzcGVjdFJhdGlvKCk6IG51bWJlciB7XHJcbiAgICBjb25zdCBzbGlkZVNpemUgPSB0aGlzLmdldERlZmF1bHRTbGlkZVNpemUoKVxyXG4gICAgcmV0dXJuIHNsaWRlU2l6ZS53aWR0aCAvIHNsaWRlU2l6ZS5oZWlnaHRcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkU2xpZGUoY2FudmFzOiBDYW52YXMsIHBvcz86IFBvc2l0aW9uLCBiYm94PzogQkJveCkge1xyXG4gICAgY29uc3QgaXNTdGFydE5vZGUgPSB0aGlzLmdldFN0YXJ0Tm9kZShjYW52YXMpID09IG51bGxcclxuICAgIGNvbnN0IHNsaWRlU2l6ZSA9IHRoaXMuZ2V0RGVmYXVsdFNsaWRlU2l6ZSgpXHJcbiAgICBjb25zdCBzbGlkZUFzcGVjdFJhdGlvID0gdGhpcy5nZXRTbGlkZUFzcGVjdFJhdGlvKClcclxuXHJcbiAgICBpZiAoYmJveCkge1xyXG4gICAgICBjb25zdCBiYm94V2lkdGggPSBiYm94Lm1heFggLSBiYm94Lm1pblhcclxuICAgICAgY29uc3QgYmJveEhlaWdodCA9IGJib3gubWF4WSAtIGJib3gubWluWVxyXG5cclxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBub2RlcyBmaXQgaW5zaWRlIHRoZSBib3VuZGluZyBib3ggd2hpbGUga2VlcGluZyB0aGUgYXNwZWN0IHJhdGlvXHJcbiAgICAgIGlmIChiYm94V2lkdGggLyBiYm94SGVpZ2h0ID4gc2xpZGVBc3BlY3RSYXRpbykge1xyXG4gICAgICAgIHNsaWRlU2l6ZS53aWR0aCA9IGJib3hXaWR0aFxyXG4gICAgICAgIHNsaWRlU2l6ZS5oZWlnaHQgPSBiYm94V2lkdGggLyBzbGlkZUFzcGVjdFJhdGlvXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2xpZGVTaXplLmhlaWdodCA9IGJib3hIZWlnaHRcclxuICAgICAgICBzbGlkZVNpemUud2lkdGggPSBiYm94SGVpZ2h0ICogc2xpZGVBc3BlY3RSYXRpb1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBwb3MgPSB7IFxyXG4gICAgICAgIHg6IGJib3gubWluWCxcclxuICAgICAgICB5OiBiYm94Lm1pbllcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIG5vIHBvc2l0aW9uIGlzIHByb3ZpZGVkLCB1c2UgdGhlIGNlbnRlciBvZiB0aGUgY2FudmFzXHJcbiAgICBpZiAoIXBvcykgcG9zID0gQ2FudmFzSGVscGVyLmdldENlbnRlckNvb3JkaW5hdGVzKGNhbnZhcywgdGhpcy5nZXREZWZhdWx0U2xpZGVTaXplKCkpXHJcblxyXG4gICAgY29uc3QgZ3JvdXBOb2RlID0gY2FudmFzLmNyZWF0ZUdyb3VwTm9kZSh7XHJcbiAgICAgIHBvczogcG9zLFxyXG4gICAgICBzaXplOiBzbGlkZVNpemUsXHJcbiAgICAgIGxhYmVsOiBpc1N0YXJ0Tm9kZSA/IFNUQVJUX1NMSURFX05BTUUgOiBERUZBVUxUX1NMSURFX05BTUUsXHJcbiAgICAgIGZvY3VzOiBmYWxzZSxcclxuICAgIH0pXHJcblxyXG4gICAgZ3JvdXBOb2RlLnNldERhdGEoeyBcclxuICAgICAgLi4uZ3JvdXBOb2RlLmdldERhdGEoKSwgXHJcbiAgICAgIHNpZGVSYXRpbzogc2xpZGVBc3BlY3RSYXRpbyxcclxuICAgICAgaXNTdGFydE5vZGU6IGlzU3RhcnROb2RlID8gdHJ1ZSA6IHVuZGVmaW5lZCxcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGFuaW1hdGVOb2RlVHJhbnNpdGlvbihjYW52YXM6IENhbnZhcywgZnJvbU5vZGU6IENhbnZhc05vZGV8dW5kZWZpbmVkLCB0b05vZGU6IENhbnZhc05vZGUpIHtcclxuICAgIGNvbnN0IHVzZUN1c3RvbVpvb21GdW5jdGlvbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ3pvb21Ub1NsaWRlV2l0aG91dFBhZGRpbmcnKVxyXG4gICAgY29uc3QgYW5pbWF0aW9uRHVyYXRpb25NcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ3NsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkR1cmF0aW9uJykgKiAxMDAwXHJcbiAgICBcclxuICAgIGlmIChhbmltYXRpb25EdXJhdGlvbk1zID4gMCAmJiBmcm9tTm9kZSkge1xyXG4gICAgICBjb25zdCBhbmltYXRpb25JbnRlbnNpdHkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdzbGlkZVRyYW5zaXRpb25BbmltYXRpb25JbnRlbnNpdHknKVxyXG5cclxuICAgICAgY29uc3QgY3VycmVudE5vZGVCQm94RW5sYXJnZWQgPSBCQm94SGVscGVyLnNjYWxlQkJveChmcm9tTm9kZS5nZXRCQm94KCksIGFuaW1hdGlvbkludGVuc2l0eSlcclxuICAgICAgaWYgKHVzZUN1c3RvbVpvb21GdW5jdGlvbikgQ2FudmFzSGVscGVyLnpvb21Ub0JCb3goY2FudmFzLCBjdXJyZW50Tm9kZUJCb3hFbmxhcmdlZClcclxuICAgICAgZWxzZSBjYW52YXMuem9vbVRvQmJveChjdXJyZW50Tm9kZUJCb3hFbmxhcmdlZClcclxuXHJcbiAgICAgIGF3YWl0IHNsZWVwKGFuaW1hdGlvbkR1cmF0aW9uTXMgLyAyKVxyXG5cclxuICAgICAgY29uc3QgbmV4dE5vZGVCQm94RW5sYXJnZWQgPSBCQm94SGVscGVyLnNjYWxlQkJveCh0b05vZGUuZ2V0QkJveCgpLCBhbmltYXRpb25JbnRlbnNpdHkpXHJcbiAgICAgIGlmICh1c2VDdXN0b21ab29tRnVuY3Rpb24pIENhbnZhc0hlbHBlci56b29tVG9CQm94KGNhbnZhcywgbmV4dE5vZGVCQm94RW5sYXJnZWQpXHJcbiAgICAgIGVsc2UgY2FudmFzLnpvb21Ub0Jib3gobmV4dE5vZGVCQm94RW5sYXJnZWQpXHJcblxyXG4gICAgICBhd2FpdCBzbGVlcChhbmltYXRpb25EdXJhdGlvbk1zIC8gMilcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbm9kZUJCb3ggPSB0b05vZGUuZ2V0QkJveCgpXHJcbiAgICBpZiAodXNlQ3VzdG9tWm9vbUZ1bmN0aW9uKSBDYW52YXNIZWxwZXIuem9vbVRvQkJveChjYW52YXMsIG5vZGVCQm94KVxyXG4gICAgZWxzZSBjYW52YXMuem9vbVRvQmJveChub2RlQkJveClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgc3RhcnRQcmVzZW50YXRpb24oY2FudmFzOiBDYW52YXMsIHRyeUNvbnRpbnVlOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgIC8vIE9ubHkgcmVzZXQgdmlzaXRlZCBub2RlcyBpZiB3ZSBhcmUgbm90IHRyeWluZyB0byBjb250aW51ZVxyXG4gICAgaWYgKCF0cnlDb250aW51ZSB8fCB0aGlzLnZpc2l0ZWROb2Rlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc3Qgc3RhcnROb2RlID0gdGhpcy5nZXRTdGFydE5vZGUoY2FudmFzKVxyXG4gICAgICBpZiAoIXN0YXJ0Tm9kZSkge1xyXG4gICAgICAgIG5ldyBOb3RpY2UoJ05vIHN0YXJ0IG5vZGUgZm91bmQuIFBsZWFzZSBtYXJrIGEgbm9kZSBhcyBhIHN0YXJ0IG5vZGUgdHJvdWdoIHRoZSBwb3B1cCBtZW51LicpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHRoaXMudmlzaXRlZE5vZGVzID0gW3N0YXJ0Tm9kZV1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTYXZlIGN1cnJlbnQgdmlld3BvcnRcclxuICAgIHRoaXMuc2F2ZWRWaWV3cG9ydCA9IHtcclxuICAgICAgeDogY2FudmFzLnR4LFxyXG4gICAgICB5OiBjYW52YXMudHksXHJcbiAgICAgIHpvb206IGNhbnZhcy50Wm9vbSxcclxuICAgIH1cclxuXHJcbiAgICAvLyBFbnRlciBmdWxsc2NyZWVuIG1vZGVcclxuICAgIGNhbnZhcy53cmFwcGVyRWwuZm9jdXMoKVxyXG4gICAgY2FudmFzLndyYXBwZXJFbC5yZXF1ZXN0RnVsbHNjcmVlbigpXHJcbiAgICBjYW52YXMud3JhcHBlckVsLmNsYXNzTGlzdC5hZGQoJ3ByZXNlbnRhdGlvbi1tb2RlJylcclxuXHJcbiAgICAvLyBMb2NrIGNhbnZhc1xyXG4gICAgY2FudmFzLnNldFJlYWRvbmx5KHRydWUpXHJcblxyXG4gICAgLy8gUmVnaXN0ZXIgZXZlbnQgaGFuZGxlciBmb3Iga2V5Ym9hcmQgbmF2aWdhdGlvblxyXG4gICAgY2FudmFzLndyYXBwZXJFbC5vbmtleWRvd24gPSAoZTogYW55KSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCd1c2VBcnJvd0tleXNUb0NoYW5nZVNsaWRlcycpKSB7XHJcbiAgICAgICAgaWYgKGUua2V5ID09PSAnQXJyb3dSaWdodCcpIHRoaXMubmV4dE5vZGUoY2FudmFzKVxyXG4gICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnQXJyb3dMZWZ0JykgdGhpcy5wcmV2aW91c05vZGUoY2FudmFzKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygndXNlUGdVcFBnRG93bktleXNUb0NoYW5nZVNsaWRlcycpKSB7XHJcbiAgICAgICAgaWYgKGUua2V5ID09PSAnUGFnZURvd24nKSB0aGlzLm5leHROb2RlKGNhbnZhcylcclxuICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ1BhZ2VVcCcpIHRoaXMucHJldmlvdXNOb2RlKGNhbnZhcylcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEtlZXAgbW9kYWxzIHdoaWxlIGluIGZ1bGxzY3JlZW4gbW9kZVxyXG4gICAgdGhpcy5mdWxsc2NyZWVuTW9kYWxPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvblJlY29yZHMpID0+IHtcclxuICAgICAgbXV0YXRpb25SZWNvcmRzLmZvckVhY2goKG11dGF0aW9uUmVjb3JkKSA9PiB7XHJcbiAgICAgICAgbXV0YXRpb25SZWNvcmQuYWRkZWROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XHJcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG5vZGUpXHJcbiAgICAgICAgICBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudD8uYXBwZW5kQ2hpbGQobm9kZSlcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgY29uc3QgaW5wdXRGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvbXB0LWlucHV0XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnR8bnVsbFxyXG4gICAgICBpZiAoaW5wdXRGaWVsZCkgaW5wdXRGaWVsZC5mb2N1cygpXHJcbiAgICB9KVxyXG4gICAgdGhpcy5mdWxsc2NyZWVuTW9kYWxPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlIH0pXHJcblxyXG4gICAgLy8gUmVnaXN0ZXIgZXZlbnQgaGFuZGxlciBmb3IgZXhpdGluZyBwcmVzZW50YXRpb24gbW9kZVxyXG4gICAgY2FudmFzLndyYXBwZXJFbC5vbmZ1bGxzY3JlZW5jaGFuZ2UgPSAoX2U6IGFueSkgPT4ge1xyXG4gICAgICBpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpIHJldHVyblxyXG4gICAgICB0aGlzLmVuZFByZXNlbnRhdGlvbihjYW52YXMpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUgPSB0cnVlXHJcblxyXG4gICAgLy8gV2FpdCBmb3IgZnVsbHNjcmVlbiB0byBiZSBlbmFibGVkXHJcbiAgICBhd2FpdCBzbGVlcCg1MDApXHJcblxyXG4gICAgLy8gWm9vbSB0byBmaXJzdCBub2RlXHJcbiAgICB0aGlzLmFuaW1hdGVOb2RlVHJhbnNpdGlvbihjYW52YXMsIHVuZGVmaW5lZCwgdGhpcy52aXNpdGVkTm9kZXMubGFzdCgpKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBlbmRQcmVzZW50YXRpb24oY2FudmFzOiBDYW52YXMpIHtcclxuICAgIC8vIFVucmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcclxuICAgIHRoaXMuZnVsbHNjcmVlbk1vZGFsT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKVxyXG4gICAgdGhpcy5mdWxsc2NyZWVuTW9kYWxPYnNlcnZlciA9IG51bGxcclxuICAgIGNhbnZhcy53cmFwcGVyRWwub25rZXlkb3duID0gbnVsbFxyXG4gICAgY2FudmFzLndyYXBwZXJFbC5vbmZ1bGxzY3JlZW5jaGFuZ2UgPSBudWxsXHJcblxyXG4gICAgLy8gVW5sb2NrIGNhbnZhc1xyXG4gICAgY2FudmFzLnNldFJlYWRvbmx5KGZhbHNlKVxyXG5cclxuICAgIC8vIEV4aXQgZnVsbHNjcmVlbiBtb2RlXHJcbiAgICBjYW52YXMud3JhcHBlckVsLmNsYXNzTGlzdC5yZW1vdmUoJ3ByZXNlbnRhdGlvbi1tb2RlJylcclxuICAgIGlmIChkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKVxyXG5cclxuICAgIC8vIFJlc2V0IHZpZXdwb3J0XHJcbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygncmVzZXRWaWV3cG9ydE9uUHJlc2VudGF0aW9uRW5kJykpXHJcbiAgICAgIGNhbnZhcy5zZXRWaWV3cG9ydCh0aGlzLnNhdmVkVmlld3BvcnQueCwgdGhpcy5zYXZlZFZpZXdwb3J0LnksIHRoaXMuc2F2ZWRWaWV3cG9ydC56b29tKVxyXG4gICAgXHJcbiAgICB0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSA9IGZhbHNlXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5leHROb2RlKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBmcm9tTm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzLmxhc3QoKVxyXG4gICAgaWYgKCFmcm9tTm9kZSkgcmV0dXJuXHJcblxyXG4gICAgY29uc3Qgb3V0Z29pbmdFZGdlcyA9IGNhbnZhcy5nZXRFZGdlc0Zvck5vZGUoZnJvbU5vZGUpLmZpbHRlcigoZWRnZTogQ2FudmFzRWRnZSkgPT4gZWRnZS5mcm9tLm5vZGUgPT09IGZyb21Ob2RlKVxyXG4gICAgbGV0IHRvTm9kZSA9IG91dGdvaW5nRWRnZXMuZmlyc3QoKT8udG8ubm9kZVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBvdXRnb2luZyBlZGdlcywgd2UgbmVlZCB0byBsb29rIGF0IHRoZSBlZGdlIGxhYmVsXHJcbiAgICBpZiAob3V0Z29pbmdFZGdlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIC8vIENyZWF0ZSBtYXAgb2YgZWRnZSBsYWJlbHMgdG8gbm9kZXNcclxuICAgICAgY29uc3Qgc29ydGVkRWRnZXMgPSBvdXRnb2luZ0VkZ2VzXHJcbiAgICAgICAgLnNvcnQoKGE6IENhbnZhc0VkZ2UsIGI6IENhbnZhc0VkZ2UpID0+IHtcclxuICAgICAgICAgIGlmICghYS5sYWJlbCkgcmV0dXJuIDFcclxuICAgICAgICAgIGlmICghYi5sYWJlbCkgcmV0dXJuIC0xXHJcblxyXG4gICAgICAgICAgcmV0dXJuIGEubGFiZWwubG9jYWxlQ29tcGFyZShiLmxhYmVsKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAvLyBGaW5kIHdoaWNoIGVkZ2VzIGFscmVhZHkgaGF2ZSBiZWVuIHRyYXZlcnNlZFxyXG4gICAgICBjb25zdCB0cmF2ZXJzZWRFZGdlc0NvdW50ID0gdGhpcy52aXNpdGVkTm9kZXNcclxuICAgICAgICAuZmlsdGVyKCh2aXNpdGVkTm9kZTogQ2FudmFzTm9kZSkgPT4gdmlzaXRlZE5vZGUgPT0gZnJvbU5vZGUpLmxlbmd0aCAtIDFcclxuXHJcbiAgICAgIC8vIFNlbGVjdCBuZXh0IGVkZ2VcclxuICAgICAgY29uc3QgbmV4dEVkZ2UgPSBzb3J0ZWRFZGdlc1t0cmF2ZXJzZWRFZGdlc0NvdW50XVxyXG4gICAgICB0b05vZGUgPSBuZXh0RWRnZS50by5ub2RlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRvTm9kZSkge1xyXG4gICAgICB0aGlzLnZpc2l0ZWROb2Rlcy5wdXNoKHRvTm9kZSlcclxuICAgICAgdGhpcy5hbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzLCBmcm9tTm9kZSwgdG9Ob2RlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gTm8gbW9yZSBub2RlcyBsZWZ0LCBhbmltYXRlIHRvIHNhbWUgbm9kZVxyXG4gICAgICB0aGlzLmFuaW1hdGVOb2RlVHJhbnNpdGlvbihjYW52YXMsIGZyb21Ob2RlLCBmcm9tTm9kZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcHJldmlvdXNOb2RlKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBmcm9tTm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzLnBvcCgpXHJcbiAgICBpZiAoIWZyb21Ob2RlKSByZXR1cm5cclxuXHJcbiAgICBsZXQgdG9Ob2RlID0gdGhpcy52aXNpdGVkTm9kZXMubGFzdCgpXHJcblxyXG4gICAgLy8gRmFsbCBiYWNrIHRvIHNhbWUgbm9kZSBpZiB0aGVyZSBhcmUgbm8gbW9yZSBub2RlcyBiZWZvcmVcclxuICAgIGlmICghdG9Ob2RlKSB7XHJcbiAgICAgIHRvTm9kZSA9IGZyb21Ob2RlXHJcbiAgICAgIHRoaXMudmlzaXRlZE5vZGVzLnB1c2goZnJvbU5vZGUpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzLCBmcm9tTm9kZSwgdG9Ob2RlKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgQ2FudmFzSGVscGVyLCB7IE1lbnVPcHRpb24gfSBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgeyBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzIH0gZnJvbSBcInNyYy9zZXR0aW5nc1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCZXR0ZXJSZWFkb25seUNhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ2JldHRlclJlYWRvbmx5RW5hYmxlZCcgYXMgY29uc3QgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgLyogUG9wdXAgbGlzdGVuZXIgKi9cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBfbm9kZTogYW55KSA9PiB0aGlzLnVwZGF0ZVBvcHVwTWVudShjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIC8qIFpvb20gYW5kIFBhbiBsaXN0ZW5lciAqL1xyXG4gICAgbGV0IG1vdmluZ1RvQkJveCA9IGZhbHNlXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5WaWV3cG9ydENoYW5nZWQuQmVmb3JlLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHtcclxuICAgICAgICAvLyBPbmx5IGFsbG93IHZpZXdwb3J0IGNoYW5nZSBvbmNlIHdoZW4gdXNpbmcgem9vbSB0byBiYm94XHJcbiAgICAgICAgaWYgKG1vdmluZ1RvQkJveCkge1xyXG4gICAgICAgICAgbW92aW5nVG9CQm94ID0gZmFsc2VcclxuXHJcbiAgICAgICAgICB0aGlzLnVwZGF0ZUxvY2tlZFpvb20oY2FudmFzKVxyXG4gICAgICAgICAgdGhpcy51cGRhdGVMb2NrZWRQYW4oY2FudmFzKVxyXG5cclxuICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFjYW52YXMucmVhZG9ubHkpIHJldHVyblxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGlzYWJsZVpvb20nKSkge1xyXG4gICAgICAgICAgY2FudmFzLnpvb20gPSBjYW52YXMubG9ja2VkWm9vbSA/PyBjYW52YXMuem9vbVxyXG4gICAgICAgICAgY2FudmFzLnRab29tID0gY2FudmFzLmxvY2tlZFpvb20gPz8gY2FudmFzLnRab29tXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGlzYWJsZVBhbicpKSB7XHJcbiAgICAgICAgICBjYW52YXMueCA9IGNhbnZhcy5sb2NrZWRYID8/IGNhbnZhcy54XHJcbiAgICAgICAgICBjYW52YXMudHggPSBjYW52YXMubG9ja2VkWCA/PyBjYW52YXMudHhcclxuICAgICAgICAgIGNhbnZhcy55ID0gY2FudmFzLmxvY2tlZFkgPz8gY2FudmFzLnlcclxuICAgICAgICAgIGNhbnZhcy50eSA9IGNhbnZhcy5sb2NrZWRZID8/IGNhbnZhcy50eVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKSlcclxuXHJcbiAgICAvLyBBbGxvdyB2aWV3cG9ydCBjaGFuZ2Ugd2hlbiB1c2luZyB6b29tIHRvIGJib3hcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuWm9vbVRvQmJveC5CZWZvcmUsXHJcbiAgICAgICgpID0+IG1vdmluZ1RvQkJveCA9IHRydWVcclxuICAgICkpXHJcblxyXG4gICAgLyogUmVhZG9ubHkgbGlzdGVuZXIgKi9cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUmVhZG9ubHlDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIF9yZWFkb25seTogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlUG9wdXBNZW51KGNhbnZhcylcclxuICAgICAgICB0aGlzLnVwZGF0ZUxvY2tlZFpvb20oY2FudmFzKVxyXG4gICAgICAgIHRoaXMudXBkYXRlTG9ja2VkUGFuKGNhbnZhcylcclxuICAgICAgfVxyXG4gICAgKSlcclxuXHJcbiAgICAvKiBBZGQgc2V0dGluZ3MgKi9cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmFkZFF1aWNrU2V0dGluZ3MoY2FudmFzKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIGFkZFF1aWNrU2V0dGluZ3MoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gY2FudmFzLnF1aWNrU2V0dGluZ3NCdXR0b24/LnBhcmVudEVsZW1lbnRcclxuICAgIGlmICghc2V0dGluZ3NDb250YWluZXIpIHJldHVyblxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRDb250cm9sTWVudUJ1dHRvbihcclxuICAgICAgc2V0dGluZ3NDb250YWluZXIsXHJcbiAgICAgIHRoaXMuY3JlYXRlVG9nZ2xlKHtcclxuICAgICAgICBpZDogJ2Rpc2FibGUtbm9kZS1wb3B1cCcsXHJcbiAgICAgICAgbGFiZWw6ICdEaXNhYmxlIG5vZGUgcG9wdXAnLFxyXG4gICAgICAgIGljb246ICdhcnJvdy11cC1yaWdodC1mcm9tLWNpcmNsZScsXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMudXBkYXRlUG9wdXBNZW51KGNhbnZhcylcclxuICAgICAgfSwgJ2Rpc2FibGVOb2RlUG9wdXAnKVxyXG4gICAgKVxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRDb250cm9sTWVudUJ1dHRvbihcclxuICAgICAgc2V0dGluZ3NDb250YWluZXIsXHJcbiAgICAgIHRoaXMuY3JlYXRlVG9nZ2xlKHtcclxuICAgICAgICBpZDogJ2Rpc2FibGUtem9vbScsXHJcbiAgICAgICAgbGFiZWw6ICdEaXNhYmxlIHpvb20nLFxyXG4gICAgICAgIGljb246ICd6b29tLWluJyxcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy51cGRhdGVMb2NrZWRab29tKGNhbnZhcylcclxuICAgICAgfSwgJ2Rpc2FibGVab29tJylcclxuICAgIClcclxuXHJcbiAgICBDYW52YXNIZWxwZXIuYWRkQ29udHJvbE1lbnVCdXR0b24oXHJcbiAgICAgIHNldHRpbmdzQ29udGFpbmVyLFxyXG4gICAgICB0aGlzLmNyZWF0ZVRvZ2dsZSh7XHJcbiAgICAgICAgaWQ6ICdkaXNhYmxlLXBhbicsXHJcbiAgICAgICAgbGFiZWw6ICdEaXNhYmxlIHBhbicsXHJcbiAgICAgICAgaWNvbjogJ21vdmUnLFxyXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnVwZGF0ZUxvY2tlZFBhbihjYW52YXMpXHJcbiAgICAgIH0sICdkaXNhYmxlUGFuJylcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlVG9nZ2xlKG1lbnVPcHRpb246IE1lbnVPcHRpb24sIHNldHRpbmdLZXk6IGtleW9mIEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3MpOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCB0b2dnbGUgPSBDYW52YXNIZWxwZXIuY3JlYXRlQ29udHJvbE1lbnVCdXR0b24oe1xyXG4gICAgICAuLi5tZW51T3B0aW9uLFxyXG4gICAgICBjYWxsYmFjazogKCkgPT4gKGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKHNldHRpbmdLZXkpXHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2V0U2V0dGluZyh7IFtzZXR0aW5nS2V5XTogbmV3VmFsdWUgfSlcclxuXHJcbiAgICAgICAgdG9nZ2xlLmRhdGFzZXQudG9nZ2xlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoc2V0dGluZ0tleSkudG9TdHJpbmcoKVxyXG4gICAgICAgIG1lbnVPcHRpb24uY2FsbGJhY2s/LmNhbGwodGhpcylcclxuICAgICAgfSkoKVxyXG4gICAgfSlcclxuICAgIHRvZ2dsZS5jbGFzc0xpc3QuYWRkKCdzaG93LXdoaWxlLXJlYWRvbmx5JylcclxuXHJcbiAgICB0b2dnbGUuZGF0YXNldC50b2dnbGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZyhzZXR0aW5nS2V5KS50b1N0cmluZygpXHJcblxyXG4gICAgcmV0dXJuIHRvZ2dsZVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVQb3B1cE1lbnUoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IGhpZGRlbiA9IGNhbnZhcy5yZWFkb25seSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkaXNhYmxlTm9kZVBvcHVwJylcclxuICAgIGNhbnZhcy5tZW51Lm1lbnVFbC5zdHlsZS52aXNpYmlsaXR5ID0gaGlkZGVuID8gJ2hpZGRlbicgOiAndmlzaWJsZSdcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlTG9ja2VkWm9vbShjYW52YXM6IENhbnZhcykge1xyXG4gICAgY2FudmFzLmxvY2tlZFpvb20gPSBjYW52YXMudFpvb21cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlTG9ja2VkUGFuKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjYW52YXMubG9ja2VkWCA9IGNhbnZhcy50eFxyXG4gICAgY2FudmFzLmxvY2tlZFkgPSBjYW52YXMudHlcclxuICB9XHJcbn0iLCAiaW1wb3J0IEFwcCwgeyBTdWdnZXN0TW9kYWwsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nXHJcbmltcG9ydCBQYXRoSGVscGVyIGZyb20gJ3NyYy91dGlscy9wYXRoLWhlbHBlcidcclxuXHJcbmV4cG9ydCBjbGFzcyBGaWxlTmFtZU1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xyXG4gIHBhcmVudFBhdGg6IHN0cmluZ1xyXG4gIGZpbGVFeHRlbnNpb246IHN0cmluZ1xyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGFyZW50UGF0aDogc3RyaW5nLCBmaWxlRXh0ZW5zaW9uOiBzdHJpbmcpIHtcclxuICAgIHN1cGVyKGFwcClcclxuXHJcbiAgICB0aGlzLnBhcmVudFBhdGggPSBwYXJlbnRQYXRoXHJcbiAgICB0aGlzLmZpbGVFeHRlbnNpb24gPSBmaWxlRXh0ZW5zaW9uXHJcbiAgfVxyXG5cclxuICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgcXVlcnlXaXRob3V0RXh0ZW5zaW9uID0gcXVlcnkucmVwbGFjZShuZXcgUmVnRXhwKGBcXFxcLiR7dGhpcy5maWxlRXh0ZW5zaW9ufSRgKSwgJycpXHJcbiAgICBpZiAocXVlcnlXaXRob3V0RXh0ZW5zaW9uID09PSAnJykgcmV0dXJuIFtdXHJcblxyXG4gICAgY29uc3QgcXVlcnlXaXRoRXh0ZW5zaW9uID0gcXVlcnlXaXRob3V0RXh0ZW5zaW9uICsgJy4nICsgdGhpcy5maWxlRXh0ZW5zaW9uXHJcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IFtgJHt0aGlzLnBhcmVudFBhdGh9LyR7cXVlcnlXaXRoRXh0ZW5zaW9ufWAsIHF1ZXJ5V2l0aEV4dGVuc2lvbl1cclxuICAgICAgLy8gRmlsdGVyIG91dCBzdWdnZXN0aW9ucyBmb3IgZmlsZXMgdGhhdCBhbHJlYWR5IGV4aXN0XHJcbiAgICAgIC5maWx0ZXIocyA9PiB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocykgPT09IG51bGwpXHJcblxyXG4gICAgcmV0dXJuIHN1Z2dlc3Rpb25zXHJcbiAgfVxyXG5cclxuICByZW5kZXJTdWdnZXN0aW9uKHRleHQ6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICBlbC5zZXRUZXh0KHRleHQpXHJcbiAgfVxyXG5cclxuICBvbkNob29zZVN1Z2dlc3Rpb24oX3RleHQ6IHN0cmluZywgX2V2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHt9XHJcblxyXG4gIGF3YWl0SW5wdXQoKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgX3JlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLm9uQ2hvb3NlU3VnZ2VzdGlvbiA9ICh0ZXh0OiBzdHJpbmcpID0+IHsgcmVzb2x2ZSh0ZXh0KSB9XHJcbiAgICAgIHRoaXMub3BlbigpXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVTZWxlY3RNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcclxuICBmaWxlczogc3RyaW5nW11cclxuICBzdWdnZXN0TmV3RmlsZTogYm9vbGVhblxyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZXh0ZW5zaW9uc1JlZ2V4PzogUmVnRXhwLCBzdWdnZXN0TmV3RmlsZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICBzdXBlcihhcHApXHJcblxyXG4gICAgdGhpcy5maWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKClcclxuICAgICAgLm1hcChmaWxlID0+IGZpbGUucGF0aClcclxuICAgICAgLmZpbHRlcihwYXRoID0+IFBhdGhIZWxwZXIuZXh0ZW5zaW9uKHBhdGgpPy5tYXRjaChleHRlbnNpb25zUmVnZXggPz8gLy4qLykpXHJcbiAgICB0aGlzLnN1Z2dlc3ROZXdGaWxlID0gc3VnZ2VzdE5ld0ZpbGVcclxuXHJcbiAgICB0aGlzLnNldFBsYWNlaG9sZGVyKCdUeXBlIHRvIHNlYXJjaC4uLicpXHJcbiAgICB0aGlzLnNldEluc3RydWN0aW9ucyhbe1xyXG4gICAgICAgIGNvbW1hbmQ6ICdcdTIxOTFcdTIxOTMnLFxyXG4gICAgICAgIHB1cnBvc2U6ICd0byBuYXZpZ2F0ZSdcclxuICAgIH0sIHtcclxuICAgICAgICBjb21tYW5kOiAnXHUyMUI1JyxcclxuICAgICAgICBwdXJwb3NlOiAndG8gb3BlbidcclxuICAgIH0sIHtcclxuICAgICAgICBjb21tYW5kOiAnc2hpZnQgXHUyMUI1JyxcclxuICAgICAgICBwdXJwb3NlOiAndG8gY3JlYXRlJ1xyXG4gICAgfSwge1xyXG4gICAgICAgIGNvbW1hbmQ6ICdlc2MnLFxyXG4gICAgICAgIHB1cnBvc2U6ICd0byBkaXNtaXNzJ1xyXG4gICAgfV0pXHJcblxyXG4gICAgdGhpcy5zY29wZS5yZWdpc3RlcihbJ1NoaWZ0J10sICdFbnRlcicsICgoZSkgPT4ge1xyXG4gICAgICB0aGlzLm9uQ2hvb3NlU3VnZ2VzdGlvbih0aGlzLmlucHV0RWwudmFsdWUsIGUpXHJcbiAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgfSkpXHJcbiAgfVxyXG5cclxuICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSB0aGlzLmZpbGVzLmZpbHRlcihwYXRoID0+IHBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKSlcclxuICAgIGlmIChzdWdnZXN0aW9ucy5sZW5ndGggPT09IDAgJiYgdGhpcy5zdWdnZXN0TmV3RmlsZSkgc3VnZ2VzdGlvbnMucHVzaChxdWVyeSlcclxuXHJcbiAgICByZXR1cm4gc3VnZ2VzdGlvbnNcclxuICB9XHJcblxyXG4gIHJlbmRlclN1Z2dlc3Rpb24ocGF0aDogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHNpbXBsaWZpZWRQYXRoID0gcGF0aC5yZXBsYWNlKC9cXC5tZCQvLCAnJylcclxuICAgIGVsLnNldFRleHQoc2ltcGxpZmllZFBhdGgpXHJcbiAgfVxyXG5cclxuICBvbkNob29zZVN1Z2dlc3Rpb24oX3BhdGg6IHN0cmluZywgX2V2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHt9XHJcblxyXG4gIGF3YWl0SW5wdXQoKTogUHJvbWlzZTxURmlsZT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCBfcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRoaXMub25DaG9vc2VTdWdnZXN0aW9uID0gKHBhdGg6IHN0cmluZywgX2V2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpXHJcblxyXG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpXHJcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmaWxlKVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc3VnZ2VzdE5ld0ZpbGUpIHJldHVyblxyXG5cclxuICAgICAgICBpZiAoUGF0aEhlbHBlci5leHRlbnNpb24ocGF0aCkgPT09IHVuZGVmaW5lZCkgcGF0aCArPSAnLm1kJ1xyXG4gICAgICAgIGNvbnN0IG5ld0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5jcmVhdGUocGF0aCwgJycpXHJcbiAgICAgICAgcmVzb2x2ZShuZXdGaWxlKVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm9wZW4oKVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCAiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0aEhlbHBlciB7XHJcbiAgc3RhdGljIGV4dGVuc2lvbihwYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHBhdGguaW5jbHVkZXMoJy4nKSA/IHBhdGguc3BsaXQoJy4nKS5wb3AoKSA6IHVuZGVmaW5lZFxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBNZW51IH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgRmlsZU5hbWVNb2RhbCB9IGZyb20gXCJzcmMvdXRpbHMvbW9kYWwtaGVscGVyXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5cclxuY29uc3QgRU5DQVBTVUxBVEVEX0ZJTEVfTk9ERV9TSVpFID0geyB3aWR0aDogMzAwLCBoZWlnaHQ6IDMwMCB9XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbmNhcHN1bGF0ZUNhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ2NhbnZhc0VuY2Fwc3VsYXRpb25FbmFibGVkJyBhcyBjb25zdCB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICAvKiBBZGQgY29tbWFuZCB0byBlbmNhcHN1bGF0ZSBzZWxlY3Rpb24gKi9cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ2VuY2Fwc3VsYXRlLXNlbGVjdGlvbicsXHJcbiAgICAgIG5hbWU6ICdFbmNhcHN1bGF0ZSBzZWxlY3Rpb24nLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHkgJiYgY2FudmFzLnNlbGVjdGlvbi5zaXplID4gMCxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuZW5jYXBzdWxhdGVTZWxlY3Rpb24oY2FudmFzKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIC8qIEFkZCBlbmNhcHN1bGF0ZSBvcHRpb24gdG8gY29udGV4dCBtZW51ICovXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlNlbGVjdGlvbkNvbnRleHRNZW51LFxyXG4gICAgICAobWVudTogTWVudSwgY2FudmFzOiBDYW52YXMpID0+IHtcclxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgIC5zZXRUaXRsZSgnRW5jYXBzdWxhdGUnKVxyXG4gICAgICAgICAgICAuc2V0SWNvbignZmlsZS1wbHVzJylcclxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5lbmNhcHN1bGF0ZVNlbGVjdGlvbihjYW52YXMpKVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGVuY2Fwc3VsYXRlU2VsZWN0aW9uKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBjYW52YXMuZ2V0U2VsZWN0aW9uRGF0YSgpXHJcblxyXG4gICAgLy8gQ3JlYXRlIG5ldyBmaWxlXHJcbiAgICBjb25zdCBzb3VyY2VGaWxlRm9sZGVyID0gY2FudmFzLnZpZXcuZmlsZS5wYXJlbnQ/LnBhdGhcclxuICAgIGlmICghc291cmNlRmlsZUZvbGRlcikgcmV0dXJuIC8vIFNob3VsZCBuZXZlciBoYXBwZW5cclxuXHJcbiAgICBjb25zdCB0YXJnZXRGaWxlUGF0aCA9IGF3YWl0IG5ldyBGaWxlTmFtZU1vZGFsKFxyXG4gICAgICB0aGlzLnBsdWdpbi5hcHAsXHJcbiAgICAgIHNvdXJjZUZpbGVGb2xkZXIsXHJcbiAgICAgICdjYW52YXMnXHJcbiAgICApLmF3YWl0SW5wdXQoKVxyXG5cclxuICAgIGNvbnN0IG5ld0ZpbGVEYXRhID0geyBub2Rlczogc2VsZWN0aW9uLm5vZGVzLCBlZGdlczogc2VsZWN0aW9uLmVkZ2VzIH1cclxuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKHRhcmdldEZpbGVQYXRoLCBKU09OLnN0cmluZ2lmeShuZXdGaWxlRGF0YSwgbnVsbCwgMikpXHJcblxyXG4gICAgLy8gUmVtb3ZlIGZyb20gY3VycmVudCBjYW52YXNcclxuICAgIGZvciAoY29uc3Qgbm9kZURhdGEgb2Ygc2VsZWN0aW9uLm5vZGVzKSB7XHJcbiAgICAgIGNvbnN0IG5vZGUgPSBjYW52YXMubm9kZXMuZ2V0KG5vZGVEYXRhLmlkKVxyXG4gICAgICBpZiAobm9kZSkgY2FudmFzLnJlbW92ZU5vZGUobm9kZSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgbGluayB0byBuZXcgZmlsZSBpbiBjdXJyZW50IGNhbnZhc1xyXG4gICAgY2FudmFzLmNyZWF0ZUZpbGVOb2RlKHtcclxuICAgICAgcG9zOiB7XHJcbiAgICAgICAgeDogc2VsZWN0aW9uLmNlbnRlci54IC0gRU5DQVBTVUxBVEVEX0ZJTEVfTk9ERV9TSVpFLndpZHRoIC8gMixcclxuICAgICAgICB5OiBzZWxlY3Rpb24uY2VudGVyLnkgLSBFTkNBUFNVTEFURURfRklMRV9OT0RFX1NJWkUuaGVpZ2h0IC8gMlxyXG4gICAgICB9LFxyXG4gICAgICBzaXplOiBFTkNBUFNVTEFURURfRklMRV9OT0RFX1NJWkUsXHJcbiAgICAgIGZpbGU6IGZpbGVcclxuICAgIH0pXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcyB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuaW1wb3J0IHsgRmlsZVNlbGVjdE1vZGFsIH0gZnJvbSBcInNyYy91dGlscy9tb2RhbC1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxudHlwZSBEaXJlY3Rpb24gPSAndXAnIHwgJ2Rvd24nIHwgJ2xlZnQnIHwgJ3JpZ2h0J1xyXG5jb25zdCBESVJFQ1RJT05TID0gWyd1cCcsICdkb3duJywgJ2xlZnQnLCAncmlnaHQnXSBhcyBEaXJlY3Rpb25bXVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tbWFuZHNDYW52YXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuICdjb21tYW5kc0ZlYXR1cmVFbmFibGVkJyBhcyBjb25zdCB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdjcmVhdGUtdGV4dC1ub2RlJyxcclxuICAgICAgbmFtZTogJ0NyZWF0ZSB0ZXh0IG5vZGUnLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHksXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmNyZWF0ZVRleHROb2RlKGNhbnZhcylcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdjcmVhdGUtZmlsZS1ub2RlJyxcclxuICAgICAgbmFtZTogJ0NyZWF0ZSBmaWxlIG5vZGUnLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHksXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmNyZWF0ZUZpbGVOb2RlKGNhbnZhcylcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdzZWxlY3QtYWxsLWVkZ2VzJyxcclxuICAgICAgbmFtZTogJ1NlbGVjdCBhbGwgZWRnZXMnLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoX2NhbnZhczogQ2FudmFzKSA9PiB0cnVlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gY2FudmFzLnVwZGF0ZVNlbGVjdGlvbigoKSA9PiBcclxuICAgICAgICAgIGNhbnZhcy5zZWxlY3Rpb24gPSBuZXcgU2V0KGNhbnZhcy5lZGdlcy52YWx1ZXMoKSlcclxuICAgICAgICApXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnem9vbS10by1zZWxlY3Rpb24nLFxyXG4gICAgICBuYW1lOiAnWm9vbSB0byBzZWxlY3Rpb24nLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IGNhbnZhcy5zZWxlY3Rpb24uc2l6ZSA+IDAsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiBjYW52YXMuem9vbVRvU2VsZWN0aW9uKClcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICBmb3IgKGNvbnN0IGRpcmVjdGlvbiBvZiBESVJFQ1RJT05TKSB7XHJcbiAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICAgIGlkOiBgY2xvbmUtbm9kZS0ke2RpcmVjdGlvbn1gLFxyXG4gICAgICAgIG5hbWU6IGBDbG9uZSBub2RlICR7ZGlyZWN0aW9ufWAsXHJcbiAgICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gIWNhbnZhcy5yZWFkb25seSAmJiBjYW52YXMuc2VsZWN0aW9uLnNpemUgPT09IDEgJiYgY2FudmFzLnNlbGVjdGlvbi52YWx1ZXMoKS5uZXh0KCkudmFsdWU/LmdldERhdGEoKS50eXBlID09PSAndGV4dCcsXHJcbiAgICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuY2xvbmVOb2RlKGNhbnZhcywgZGlyZWN0aW9uKVxyXG4gICAgICAgIClcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICAgIGlkOiBgZXhwYW5kLW5vZGUtJHtkaXJlY3Rpb259YCxcclxuICAgICAgICBuYW1lOiBgRXhwYW5kIG5vZGUgJHtkaXJlY3Rpb259YCxcclxuICAgICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiAhY2FudmFzLnJlYWRvbmx5ICYmIGNhbnZhcy5zZWxlY3Rpb24uc2l6ZSA9PT0gMSxcclxuICAgICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5leHBhbmROb2RlKGNhbnZhcywgZGlyZWN0aW9uKVxyXG4gICAgICAgIClcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlVGV4dE5vZGUoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IHNpemUgPSBjYW52YXMuY29uZmlnLmRlZmF1bHRUZXh0Tm9kZURpbWVuc2lvbnNcclxuICAgIGNvbnN0IHBvcyA9IENhbnZhc0hlbHBlci5nZXRDZW50ZXJDb29yZGluYXRlcyhjYW52YXMsIHNpemUpXHJcblxyXG4gICAgY2FudmFzLmNyZWF0ZVRleHROb2RlKHsgcG9zOiBwb3MsIHNpemU6IHNpemUgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlRmlsZU5vZGUoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IHNpemUgPSBjYW52YXMuY29uZmlnLmRlZmF1bHRGaWxlTm9kZURpbWVuc2lvbnNcclxuICAgIGNvbnN0IHBvcyA9IENhbnZhc0hlbHBlci5nZXRDZW50ZXJDb29yZGluYXRlcyhjYW52YXMsIHNpemUpXHJcbiAgICBjb25zdCBmaWxlID0gYXdhaXQgbmV3IEZpbGVTZWxlY3RNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIHVuZGVmaW5lZCwgdHJ1ZSkuYXdhaXRJbnB1dCgpXHJcblxyXG4gICAgY2FudmFzLmNyZWF0ZUZpbGVOb2RlKHsgcG9zOiBwb3MsIHNpemU6IHNpemUsIGZpbGU6IGZpbGUgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2xvbmVOb2RlKGNhbnZhczogQ2FudmFzLCBjbG9uZURpcmVjdGlvbjogRGlyZWN0aW9uKSB7XHJcbiAgICBjb25zdCBzb3VyY2VOb2RlID0gY2FudmFzLnNlbGVjdGlvbi52YWx1ZXMoKS5uZXh0KCkudmFsdWVcclxuICAgIGlmICghc291cmNlTm9kZSkgcmV0dXJuXHJcbiAgICBjb25zdCBzb3VyY2VOb2RlRGF0YSA9IHNvdXJjZU5vZGUuZ2V0RGF0YSgpXHJcblxyXG4gICAgY29uc3Qgbm9kZU1hcmdpbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2Nsb25lTm9kZU1hcmdpbicpXHJcbiAgICBjb25zdCBvZmZzZXQgPSB7IFxyXG4gICAgICB4OiAoc291cmNlTm9kZS53aWR0aCArIG5vZGVNYXJnaW4pICogKGNsb25lRGlyZWN0aW9uID09PSAnbGVmdCcgPyAtMSA6IChjbG9uZURpcmVjdGlvbiA9PT0gJ3JpZ2h0JyA/IDEgOiAwKSksXHJcbiAgICAgIHk6IChzb3VyY2VOb2RlLmhlaWdodCArIG5vZGVNYXJnaW4pICogKGNsb25lRGlyZWN0aW9uID09PSAndXAnID8gLTEgOiAoY2xvbmVEaXJlY3Rpb24gPT09ICdkb3duJyA/IDEgOiAwKSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjbG9uZWROb2RlID0gY2FudmFzLmNyZWF0ZVRleHROb2RlKHtcclxuICAgICAgcG9zOiB7XHJcbiAgICAgICAgeDogc291cmNlTm9kZS54ICsgb2Zmc2V0LngsXHJcbiAgICAgICAgeTogc291cmNlTm9kZS55ICsgb2Zmc2V0LnlcclxuICAgICAgfSxcclxuICAgICAgc2l6ZToge1xyXG4gICAgICAgIHdpZHRoOiBzb3VyY2VOb2RlLndpZHRoLFxyXG4gICAgICAgIGhlaWdodDogc291cmNlTm9kZS5oZWlnaHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBjbG9uZWROb2RlLnNldERhdGEoeyBcclxuICAgICAgLi4uY2xvbmVkTm9kZS5nZXREYXRhKCksIFxyXG4gICAgICBjb2xvcjogc291cmNlTm9kZURhdGEuY29sb3IsXHJcbiAgICAgIHN0eWxlQXR0cmlidXRlczogc291cmNlTm9kZURhdGEuc3R5bGVBdHRyaWJ1dGVzXHJcbiAgICB9KVxyXG5cclxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCd6b29tVG9DbG9uZWROb2RlJykpXHJcbiAgICAgIGNhbnZhcy56b29tVG9CYm94KGNsb25lZE5vZGUuZ2V0QkJveCgpKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBleHBhbmROb2RlKGNhbnZhczogQ2FudmFzLCBleHBhbmREaXJlY3Rpb246IERpcmVjdGlvbikge1xyXG4gICAgY29uc3Qgbm9kZSA9IGNhbnZhcy5zZWxlY3Rpb24udmFsdWVzKCkubmV4dCgpLnZhbHVlXHJcbiAgICBpZiAoIW5vZGUpIHJldHVyblxyXG5cclxuICAgIGNvbnN0IGV4cGFuZE5vZGVTdGVwU2l6ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2V4cGFuZE5vZGVTdGVwU2l6ZScpXHJcbiAgICBjb25zdCBleHBhbmQgPSB7XHJcbiAgICAgIHg6IGV4cGFuZERpcmVjdGlvbiA9PT0gJ2xlZnQnID8gLTEgOiAoZXhwYW5kRGlyZWN0aW9uID09PSAncmlnaHQnID8gMSA6IDApLFxyXG4gICAgICB5OiBleHBhbmREaXJlY3Rpb24gPT09ICd1cCcgPyAtMSA6IChleHBhbmREaXJlY3Rpb24gPT09ICdkb3duJyA/IDEgOiAwKVxyXG4gICAgfVxyXG5cclxuICAgIG5vZGUuc2V0RGF0YSh7XHJcbiAgICAgIC4uLm5vZGUuZ2V0RGF0YSgpLFxyXG4gICAgICB3aWR0aDogbm9kZS53aWR0aCArIGV4cGFuZC54ICogZXhwYW5kTm9kZVN0ZXBTaXplLFxyXG4gICAgICBoZWlnaHQ6IG5vZGUuaGVpZ2h0ICsgZXhwYW5kLnkgKiBleHBhbmROb2RlU3RlcFNpemVcclxuICAgIH0pXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgQ2FudmFzTm9kZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuaW1wb3J0IHsgVmlld1VwZGF0ZSB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dG9SZXNpemVOb2RlQ2FudmFzRXh0ZW5zaW9uICBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnYXV0b1Jlc2l6ZU5vZGVGZWF0dXJlRW5hYmxlZCcpIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZVRleHRDb250ZW50Q2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlLCB2aWV3VXBkYXRlOiBWaWV3VXBkYXRlKSA9PiB0aGlzLm9uTm9kZVRleHRDb250ZW50Q2hhbmdlZChjYW52YXMsIG5vZGUsIHZpZXdVcGRhdGUpXHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvblBvcHVwTWVudUNyZWF0ZWQoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGlmIChjYW52YXMucmVhZG9ubHkpIHJldHVyblxyXG5cclxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZXMgPSBbLi4uY2FudmFzLnNlbGVjdGlvbl0uZmlsdGVyKGVsZW1lbnQgPT4ge1xyXG4gICAgICBjb25zdCBlbGVtZW50RGF0YSA9IGVsZW1lbnQuZ2V0RGF0YSgpXHJcbiAgICAgIHJldHVybiBlbGVtZW50RGF0YS50eXBlID09PSAndGV4dCdcclxuICAgIH0pIGFzIENhbnZhc05vZGVbXVxyXG4gICAgaWYgKHNlbGVjdGVkTm9kZXMubGVuZ3RoID09PSAwKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBoYXNMb2NrZWRIZWlnaHQgPSBzZWxlY3RlZE5vZGVzLnNvbWUobm9kZSA9PiBub2RlLmdldERhdGEoKS5sb2NrZWRIZWlnaHQpXHJcbiAgICBcclxuICAgIENhbnZhc0hlbHBlci5hZGRQb3B1cE1lbnVPcHRpb24oXHJcbiAgICAgIGNhbnZhcyxcclxuICAgICAgQ2FudmFzSGVscGVyLmNyZWF0ZVBvcHVwTWVudU9wdGlvbih7XHJcbiAgICAgICAgaWQ6ICdsb2NrLWhlaWdodCcsXHJcbiAgICAgICAgbGFiZWw6ICdUb2dnbGUgbG9ja2VkIGhlaWdodCcsXHJcbiAgICAgICAgaWNvbjogaGFzTG9ja2VkSGVpZ2h0ID8gJ3J1bGVyJyA6ICdwZW5jaWwtcnVsZXInLFxyXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNldExvY2tlZEhlaWdodChjYW52YXMsIHNlbGVjdGVkTm9kZXMsIGhhc0xvY2tlZEhlaWdodClcclxuICAgICAgfSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0TG9ja2VkSGVpZ2h0KGNhbnZhczogQ2FudmFzLCBub2RlczogQ2FudmFzTm9kZVtdLCBsb2NrZWRIZWlnaHQ6IGJvb2xlYW4pIHtcclxuICAgIGNvbnN0IG5ld0xvY2tlZEhlaWdodCA9IGxvY2tlZEhlaWdodCA/IHVuZGVmaW5lZCA6IHRydWVcclxuXHJcbiAgICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4gbm9kZS5zZXREYXRhKHtcclxuICAgICAgLi4ubm9kZS5nZXREYXRhKCksXHJcbiAgICAgIGxvY2tlZEhlaWdodDogbmV3TG9ja2VkSGVpZ2h0XHJcbiAgICB9KSlcclxuXHJcbiAgICB0aGlzLm9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXMpXHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgYXN5bmMgb25Ob2RlVGV4dENvbnRlbnRDaGFuZ2VkKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlLCB2aWV3VXBkYXRlOiBWaWV3VXBkYXRlKSB7XHJcbiAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICBpZiAobm9kZURhdGEubG9ja2VkSGVpZ2h0KSByZXR1cm5cclxuXHJcbiAgICBsZXQgdGV4dFBhZGRpbmcgPSAwXHJcbiAgICBjb25zdCBjbVNjcm9sbGVyID0gdmlld1VwZGF0ZS52aWV3LmRvbS5xdWVyeVNlbGVjdG9yKFwiLmNtLXNjcm9sbGVyXCIpXHJcbiAgICBpZiAoY21TY3JvbGxlcikge1xyXG4gICAgICBmb3IgKGNvbnN0IHBzZXVkbyBvZiBbXCJiZWZvcmVcIiwgXCJhZnRlclwiXSkge1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoY21TY3JvbGxlciwgcHNldWRvKVxyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHBhcnNlRmxvYXQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcImhlaWdodFwiKSlcclxuXHJcbiAgICAgICAgdGV4dFBhZGRpbmcgKz0gaGVpZ2h0XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3SGVpZ2h0ID0gdmlld1VwZGF0ZS52aWV3LmNvbnRlbnRIZWlnaHQgKyB0ZXh0UGFkZGluZyArIDEwXHJcblxyXG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2F1dG9SZXNpemVOb2RlU25hcFRvR3JpZCcpKVxyXG4gICAgICBuZXdIZWlnaHQgPSBNYXRoLnJvdW5kKG5ld0hlaWdodCAvIENhbnZhc0hlbHBlci5HUklEX1NJWkUpICogQ2FudmFzSGVscGVyLkdSSURfU0laRVxyXG5cclxuICAgIG5vZGUuc2V0RGF0YSh7XHJcbiAgICAgIC4uLm5vZGVEYXRhLFxyXG4gICAgICBoZWlnaHQ6IG5ld0hlaWdodFxyXG4gICAgfSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgeyBCQm94LCBDYW52YXMsIENhbnZhc0RhdGEsIENhbnZhc0VkZ2UsIENhbnZhc0VsZW1lbnQsIENhbnZhc05vZGUsIENhbnZhc05vZGVEYXRhLCBDYW52YXNWaWV3IH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgUE9SVEFMX1BBRERJTkcgPSA1MFxyXG5jb25zdCBNSU5fT1BFTl9QT1JUQUxfU0laRSA9IHsgd2lkdGg6IDIwMCwgaGVpZ2h0OiAyMDAgfVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9ydGFsc0NhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ3BvcnRhbHNGZWF0dXJlRW5hYmxlZCcgYXMgY29uc3QgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAudmF1bHQub24oJ21vZGlmeScsIChmaWxlOiBURmlsZSkgPT4ge1xyXG4gICAgICBjb25zdCBjYW52YXNlcyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdjYW52YXMnKS5tYXAobGVhZiA9PiAobGVhZi52aWV3IGFzIENhbnZhc1ZpZXcpLmNhbnZhcylcclxuXHJcbiAgICAgIGZvciAoY29uc3QgY2FudmFzIG9mIGNhbnZhc2VzKSB7XHJcbiAgICAgICAgaWYgKGNhbnZhcyA9PT0gdW5kZWZpbmVkKSBjb250aW51ZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGhhc1BvcnRhbHNUb0ZpbGUgPSBjYW52YXMuZ2V0RGF0YSgpLm5vZGVzLmZpbHRlcihub2RlRGF0YSA9PiBcclxuICAgICAgICAgIG5vZGVEYXRhLnR5cGUgPT09ICdmaWxlJyAmJiBcclxuICAgICAgICAgIG5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9PT0gZmlsZS5wYXRoXHJcbiAgICAgICAgKS5sZW5ndGggPiAwXHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB3aG9sZSBjYW52YXMgZGF0YVxyXG4gICAgICAgIGlmIChoYXNQb3J0YWxzVG9GaWxlKSB7XHJcbiAgICAgICAgICBjYW52YXMuc2V0RGF0YShjYW52YXMuZ2V0RGF0YSgpKVxyXG5cclxuICAgICAgICAgIC8vIE1haW50YWluIGhpc3RvcnlcclxuICAgICAgICAgIGNhbnZhcy5oaXN0b3J5LmN1cnJlbnQtLVxyXG4gICAgICAgICAgY2FudmFzLmhpc3RvcnkuZGF0YS5wb3AoKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Qb3B1cE1lbnVDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMudXBkYXRlUG9wdXBNZW51KGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlUmVtb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLm9uTm9kZVJlbW92ZWQoY2FudmFzLCBub2RlKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVNb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLm9uTm9kZU1vdmVkKGNhbnZhcywgbm9kZSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5EcmFnZ2luZ1N0YXRlQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBzdGFydGVkRHJhZ2dpbmc6IGJvb2xlYW4pID0+IHRoaXMub25EcmFnZ2luZ1N0YXRlQ2hhbmdlZChjYW52YXMsIHN0YXJ0ZWREcmFnZ2luZylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Db250YWluaW5nTm9kZXNSZXF1ZXN0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgYmJveDogQkJveCwgbm9kZXM6IENhbnZhc05vZGVbXSkgPT4gdGhpcy5vbkNvbnRhaW5pbmdOb2Rlc1JlcXVlc3RlZChjYW52YXMsIGJib3gsIG5vZGVzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlNlbGVjdGlvbkNoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgb2xkU2VsZWN0aW9uOiBTZXQ8Q2FudmFzRWxlbWVudD4sIHVwZGF0ZVNlbGVjdGlvbjogKHVwZGF0ZTogKCkgPT4gdm9pZCkgPT4gdm9pZCkgPT4gdGhpcy5vblNlbGVjdGlvbkNoYW5nZWQoY2FudmFzLCBvbGRTZWxlY3Rpb24sIHVwZGF0ZVNlbGVjdGlvbilcclxuICAgICkpXHJcbiAgICBcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRGF0YVJlcXVlc3RlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBkYXRhOiBDYW52YXNEYXRhKSA9PiB0aGlzLnJlbW92ZVBvcnRhbENhbnZhc0RhdGEoY2FudmFzLCBkYXRhKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkxvYWREYXRhLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGRhdGE6IENhbnZhc0RhdGEsIHNldERhdGE6IChkYXRhOiBDYW52YXNEYXRhKSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgICAgdGhpcy5nZXRDYW52YXNEYXRhV2l0aFBvcnRhbHMoY2FudmFzLCBkYXRhKVxyXG4gICAgICAgICAgLnRoZW4oKG5ld0RhdGE6IENhbnZhc0RhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8gU2tpcCBpZiB0aGUgZGF0YSBkaWRuJ3QgY2hhbmdlXHJcbiAgICAgICAgICAgIGlmIChuZXdEYXRhLm5vZGVzLmxlbmd0aCA9PT0gZGF0YS5ub2Rlcy5sZW5ndGggJiYgbmV3RGF0YS5lZGdlcy5sZW5ndGggPT09IGRhdGEuZWRnZXMubGVuZ3RoKSByZXR1cm5cclxuICAgICAgICAgICAgc2V0RGF0YShuZXdEYXRhKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlUG9wdXBNZW51KGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBpZiAoY2FudmFzLnJlYWRvbmx5KSByZXR1cm5cclxuXHJcbiAgICAvLyBPbmx5IHNlYXJjaCBmb3IgdmFsaWQgbm9kZXNcclxuICAgIGNvbnN0IHNlbGVjdGVkRmlsZU5vZGVzID0gY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlcy5tYXAobm9kZURhdGEgPT4ge1xyXG4gICAgICBjb25zdCBub2RlID0gY2FudmFzLm5vZGVzLmdldChub2RlRGF0YS5pZClcclxuICAgICAgaWYgKCFub2RlKSByZXR1cm4gbnVsbFxyXG5cclxuICAgICAgaWYgKG5vZGVEYXRhLnR5cGUgIT09ICdmaWxlJykgcmV0dXJuIG51bGxcclxuICAgICAgaWYgKG5vZGUuZmlsZT8uZXh0ZW5zaW9uID09PSAnY2FudmFzJykgcmV0dXJuIG5vZGVcclxuICAgICAgXHJcbiAgICAgIC8vIENsb3NlIHBvcnRhbCBvZiBub24tY2FudmFzIGZpbGVcclxuICAgICAgaWYgKG5vZGVEYXRhLnBvcnRhbFRvRmlsZSkgdGhpcy5zZXRQb3J0YWxPcGVuKGNhbnZhcywgbm9kZSwgZmFsc2UpXHJcblxyXG4gICAgICByZXR1cm4gbnVsbFxyXG4gICAgfSkuZmlsdGVyKG5vZGUgPT4gbm9kZSAhPT0gbnVsbCkgYXMgQ2FudmFzTm9kZVtdXHJcbiAgICBcclxuICAgIGlmIChzZWxlY3RlZEZpbGVOb2Rlcy5sZW5ndGggIT09IDEpIHJldHVyblxyXG5cclxuICAgIGNvbnN0IHBvcnRhbE5vZGUgPSBzZWxlY3RlZEZpbGVOb2Rlc1swXVxyXG4gICAgY29uc3QgcG9ydGFsTm9kZURhdGEgPSBwb3J0YWxOb2RlLmdldERhdGEoKVxyXG5cclxuICAgIC8vIElmIGZpbGUgY2hhbmdlZFxyXG4gICAgaWYgKHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSAmJiBwb3J0YWxOb2RlRGF0YS5maWxlICE9PSBwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUpIHtcclxuICAgICAgdGhpcy5zZXRQb3J0YWxPcGVuKGNhbnZhcywgcG9ydGFsTm9kZSwgdHJ1ZSlcclxuICAgIH1cclxuXHJcbiAgICBDYW52YXNIZWxwZXIuYWRkUG9wdXBNZW51T3B0aW9uKFxyXG4gICAgICBjYW52YXMsXHJcbiAgICAgIENhbnZhc0hlbHBlci5jcmVhdGVQb3B1cE1lbnVPcHRpb24oe1xyXG4gICAgICAgIGlkOiAndG9nZ2xlLXBvcnRhbCcsXHJcbiAgICAgICAgbGFiZWw6IHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA/ICdDbG9zZSBwb3J0YWwnIDogJ09wZW4gcG9ydGFsJyxcclxuICAgICAgICBpY29uOiBwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPyAnZG9vci1vcGVuJyA6ICdkb29yLWNsb3NlZCcsXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuc2V0UG9ydGFsT3BlbihjYW52YXMsIHBvcnRhbE5vZGUsIHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgdGhpcy51cGRhdGVQb3B1cE1lbnUoY2FudmFzKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0UG9ydGFsT3BlbihjYW52YXM6IENhbnZhcywgcG9ydGFsTm9kZTogQ2FudmFzTm9kZSwgb3BlbjogYm9vbGVhbikge1xyXG4gICAgY29uc3QgcG9ydGFsTm9kZURhdGEgPSBwb3J0YWxOb2RlLmdldERhdGEoKVxyXG4gICAgcG9ydGFsTm9kZS5zZXREYXRhKHtcclxuICAgICAgLi4ucG9ydGFsTm9kZURhdGEsXHJcbiAgICAgIHBvcnRhbFRvRmlsZTogb3BlbiA/IHBvcnRhbE5vZGVEYXRhLmZpbGUgOiB1bmRlZmluZWRcclxuICAgIH0pXHJcblxyXG4gICAgLy8gVXBkYXRlIHdob2xlIGNhbnZhcyBkYXRhXHJcbiAgICBjYW52YXMuc2V0RGF0YShjYW52YXMuZ2V0RGF0YSgpKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbk5vZGVSZW1vdmVkKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICBpZiAobm9kZURhdGEudHlwZSAhPT0gJ2ZpbGUnIHx8ICFub2RlRGF0YS5wb3J0YWxUb0ZpbGUpIHJldHVyblxyXG5cclxuICAgIC8vIFJlbW92ZSBuZXN0ZWQgbm9kZXMgYW5kIGVkZ2VzXHJcbiAgICBPYmplY3Qua2V5cyhub2RlRGF0YS5wb3J0YWxJZE1hcHM/Lm5vZGVJZE1hcCA/PyB7fSkubWFwKHJlZk5vZGVJZCA9PiBjYW52YXMubm9kZXMuZ2V0KHJlZk5vZGVJZCkpXHJcbiAgICAgIC5maWx0ZXIobm9kZSA9PiBub2RlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgIC5mb3JFYWNoKG5vZGUgPT4gY2FudmFzLnJlbW92ZU5vZGUobm9kZSEpKVxyXG5cclxuICAgIE9iamVjdC5rZXlzKG5vZGVEYXRhLnBvcnRhbElkTWFwcz8uZWRnZUlkTWFwID8/IHt9KS5tYXAocmVmRWRnZUlkID0+IGNhbnZhcy5lZGdlcy5nZXQocmVmRWRnZUlkKSlcclxuICAgICAgLmZpbHRlcihlZGdlID0+IGVkZ2UgIT09IHVuZGVmaW5lZClcclxuICAgICAgLmZvckVhY2goZWRnZSA9PiBjYW52YXMucmVtb3ZlRWRnZShlZGdlISkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uQ29udGFpbmluZ05vZGVzUmVxdWVzdGVkKF9jYW52YXM6IENhbnZhcywgX2Jib3g6IEJCb3gsIG5vZGVzOiBDYW52YXNOb2RlW10pIHtcclxuICAgIC8vIFJlbW92ZSBub2RlcyBmcm9tIHBvcnRhbHMgZnJvbSB0aGUgbGlzdFxyXG4gICAgbm9kZXMuc3BsaWNlKDAsIG5vZGVzLmxlbmd0aCwgLi4ubm9kZXMuZmlsdGVyKG5vZGUgPT4gbm9kZS5nZXREYXRhKCkucG9ydGFsSWQgPT09IHVuZGVmaW5lZCkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uU2VsZWN0aW9uQ2hhbmdlZChjYW52YXM6IENhbnZhcywgb2xkU2VsZWN0aW9uOiBTZXQ8Q2FudmFzRWxlbWVudD4sIHVwZGF0ZVNlbGVjdGlvbjogKHVwZGF0ZTogKCkgPT4gdm9pZCkgPT4gdm9pZCkge1xyXG4gICAgLy8gVW5zZWxlY3Qgbm9kZXMgZnJvbSBwb3J0YWxzXHJcbiAgICB1cGRhdGVTZWxlY3Rpb24oKCkgPT4ge1xyXG4gICAgICBjb25zdCB1cGRhdGVkU2VsZWN0aW9uID0gQXJyYXkuZnJvbShjYW52YXMuc2VsZWN0aW9uKVxyXG4gICAgICAgIC5maWx0ZXIobm9kZSA9PiBub2RlLmdldERhdGEoKS5wb3J0YWxJZCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICBjYW52YXMuc2VsZWN0aW9uID0gbmV3IFNldCh1cGRhdGVkU2VsZWN0aW9uKVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBNb3ZlIHByZXZpb3VzbHkgc2VsZWN0ZWQgcG9ydGFscyB0byB0aGUgYmFja1xyXG4gICAgY29uc3QgcHJldmlvdXNseVNlbGVjdGVkUG9ydGFsTm9kZXNJZHMgPSBBcnJheS5mcm9tKG9sZFNlbGVjdGlvbilcclxuICAgICAgLmZpbHRlcihub2RlID0+IChub2RlLmdldERhdGEoKSBhcyBhbnkpLnBvcnRhbFRvRmlsZSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAuZmxhdE1hcChub2RlID0+IHtcclxuICAgICAgICBjb25zdCBwb3J0YWxOb2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICAgICAgY29uc3QgbmVzdGVkUG9ydGFsc0lkcyA9IHRoaXMuZ2V0TmVzdGVkUG9ydGFsc0lkcyhjYW52YXMsIHBvcnRhbE5vZGVEYXRhLmlkKVxyXG5cclxuICAgICAgICByZXR1cm4gW3BvcnRhbE5vZGVEYXRhLmlkLCAuLi5uZXN0ZWRQb3J0YWxzSWRzXVxyXG4gICAgICB9KVxyXG5cclxuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBjYW52YXMubm9kZXMudmFsdWVzKCkpIHtcclxuICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG5cclxuICAgICAgLy8gTm90IGZyb20gdW5zZWxlY3RlZCBwb3J0YWxcclxuICAgICAgaWYgKG5vZGVEYXRhLnBvcnRhbElkID09PSB1bmRlZmluZWQgfHwgIXByZXZpb3VzbHlTZWxlY3RlZFBvcnRhbE5vZGVzSWRzLmluY2x1ZGVzKG5vZGVEYXRhLnBvcnRhbElkKSkgY29udGludWVcclxuXHJcbiAgICAgIC8vIE1vdmUgdG8gZnJvbnRcclxuICAgICAgbm9kZS51cGRhdGVaSW5kZXgoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXROZXN0ZWRQb3J0YWxzSWRzKGNhbnZhczogQ2FudmFzLCBwb3J0YWxJZDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgbmVzdGVkUG9ydGFsc0lkczogc3RyaW5nW10gPSBbXVxyXG5cclxuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBjYW52YXMubm9kZXMudmFsdWVzKCkpIHtcclxuICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG5cclxuICAgICAgaWYgKG5vZGVEYXRhLnBvcnRhbElkID09PSBwb3J0YWxJZCkge1xyXG4gICAgICAgIG5lc3RlZFBvcnRhbHNJZHMucHVzaChub2RlRGF0YS5pZClcclxuICAgICAgICBuZXN0ZWRQb3J0YWxzSWRzLnB1c2goLi4udGhpcy5nZXROZXN0ZWRQb3J0YWxzSWRzKGNhbnZhcywgbm9kZURhdGEuaWQpKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5lc3RlZFBvcnRhbHNJZHNcclxuICB9XHJcblxyXG4gIHJlc3RvcmVPYmplY3RTbmFwcGluZ1N0YXRlOiAoKSA9PiB2b2lkXHJcbiAgcHJpdmF0ZSBvbkRyYWdnaW5nU3RhdGVDaGFuZ2VkKGNhbnZhczogQ2FudmFzLCBzdGFydGVkRHJhZ2dpbmc6IGJvb2xlYW4pIHtcclxuICAgIC8vIElmIG5vIG9wZW4gcG9ydGFsIGdldHMgZHJhZ2dlZCwgcmV0dXJuXHJcbiAgICBpZiAoIWNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXMuc29tZShub2RlID0+IG5vZGUudHlwZSA9PT0gJ2ZpbGUnICYmIG5vZGUucG9ydGFsVG9GaWxlKSkgcmV0dXJuXHJcblxyXG4gICAgLy8gRGlzYWJsZSBvYmplY3Qgc25hcHBpbmcgdG8gZml4IHNlbGYtYWxpZ25pbmdcclxuICAgIGlmIChzdGFydGVkRHJhZ2dpbmcpIHtcclxuICAgICAgY29uc3Qgb2JqZWN0U25hcHBpbmdFbmFibGVkID0gY2FudmFzLm9wdGlvbnMuc25hcFRvT2JqZWN0c1xyXG4gICAgICB0aGlzLnJlc3RvcmVPYmplY3RTbmFwcGluZ1N0YXRlID0gKCkgPT4gY2FudmFzLnRvZ2dsZU9iamVjdFNuYXBwaW5nKG9iamVjdFNuYXBwaW5nRW5hYmxlZClcclxuXHJcbiAgICAgIGlmIChvYmplY3RTbmFwcGluZ0VuYWJsZWQpIGNhbnZhcy50b2dnbGVPYmplY3RTbmFwcGluZyhmYWxzZSlcclxuICAgIH0gZWxzZSB0aGlzLnJlc3RvcmVPYmplY3RTbmFwcGluZ1N0YXRlPy4oKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbk5vZGVNb3ZlZChjYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG4gICAgaWYgKG5vZGVEYXRhLnR5cGUgIT09ICdmaWxlJyB8fCAhbm9kZURhdGEucG9ydGFsVG9GaWxlKSByZXR1cm5cclxuXHJcbiAgICB0aGlzLm9uT3BlblBvcnRhbE1vdmVkKGNhbnZhcywgbm9kZSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25PcGVuUG9ydGFsTW92ZWQoY2FudmFzOiBDYW52YXMsIHBvcnRhbE5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgIGxldCBwb3J0YWxOb2RlRGF0YSA9IHBvcnRhbE5vZGUuZ2V0RGF0YSgpXHJcblxyXG4gICAgLy8gVXBkYXRlIG5lc3RlZCBub2RlcyBwb3NpdGlvbnNcclxuICAgIGNvbnN0IG5lc3RlZE5vZGVzSWRNYXAgPSBwb3J0YWxOb2RlLmdldERhdGEoKS5wb3J0YWxJZE1hcHM/Lm5vZGVJZE1hcFxyXG4gICAgaWYgKCFuZXN0ZWROb2Rlc0lkTWFwKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBuZXN0ZWROb2RlcyA9IE9iamVjdC5rZXlzKG5lc3RlZE5vZGVzSWRNYXApLm1hcChyZWZOb2RlSWQgPT4gY2FudmFzLm5vZGVzLmdldChyZWZOb2RlSWQpKVxyXG4gICAgICAuZmlsdGVyKG5vZGUgPT4gbm9kZSAhPT0gdW5kZWZpbmVkKSBhcyBDYW52YXNOb2RlW11cclxuICAgIGNvbnN0IHNvdXJjZUJCb3ggPSBDYW52YXNIZWxwZXIuZ2V0QkJveChuZXN0ZWROb2RlcylcclxuXHJcbiAgICAvLyBSZXNpemUgcG9ydGFsXHJcbiAgICBjb25zdCB0YXJnZXRTaXplID0gdGhpcy5nZXRQb3J0YWxTaXplKHNvdXJjZUJCb3gpXHJcbiAgICBpZiAocG9ydGFsTm9kZURhdGEud2lkdGggIT09IHRhcmdldFNpemUud2lkdGggfHwgcG9ydGFsTm9kZURhdGEuaGVpZ2h0ICE9PSB0YXJnZXRTaXplLmhlaWdodCkge1xyXG4gICAgICBwb3J0YWxOb2RlLnNldERhdGEoe1xyXG4gICAgICAgIC4uLnBvcnRhbE5vZGVEYXRhLFxyXG4gICAgICAgIHdpZHRoOiB0YXJnZXRTaXplLndpZHRoLFxyXG4gICAgICAgIGhlaWdodDogdGFyZ2V0U2l6ZS5oZWlnaHRcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1vdmUgbmVzdGVkIG5vZGVzXHJcbiAgICBjb25zdCBwb3J0YWxPZmZzZXQgPSB7XHJcbiAgICAgIHg6IHBvcnRhbE5vZGVEYXRhLnggLSBzb3VyY2VCQm94Lm1pblggKyBQT1JUQUxfUEFERElORyxcclxuICAgICAgeTogcG9ydGFsTm9kZURhdGEueSAtIHNvdXJjZUJCb3gubWluWSArIFBPUlRBTF9QQURESU5HXHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChjb25zdCBuZXN0ZWROb2RlIG9mIG5lc3RlZE5vZGVzKSB7XHJcbiAgICAgIGNvbnN0IG5lc3RlZE5vZGVEYXRhID0gbmVzdGVkTm9kZS5nZXREYXRhKClcclxuXHJcbiAgICAgIG5lc3RlZE5vZGUuc2V0RGF0YSh7XHJcbiAgICAgICAgLi4ubmVzdGVkTm9kZURhdGEsXHJcbiAgICAgICAgeDogbmVzdGVkTm9kZURhdGEueCArIHBvcnRhbE9mZnNldC54LFxyXG4gICAgICAgIHk6IG5lc3RlZE5vZGVEYXRhLnkgKyBwb3J0YWxPZmZzZXQueVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW1vdmVQb3J0YWxDYW52YXNEYXRhKF9jYW52YXM6IENhbnZhcywgZGF0YTogQ2FudmFzRGF0YSkge1xyXG4gICAgZGF0YS5lZGdlcyA9IGRhdGEuZWRnZXMuZmlsdGVyKGVkZ2VEYXRhID0+IHtcclxuICAgICAgaWYgKGVkZ2VEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZVxyXG5cclxuICAgICAgY29uc3QgZnJvbU5vZGVEYXRhID0gZGF0YS5ub2Rlcy5maW5kKG5vZGVEYXRhID0+IG5vZGVEYXRhLmlkID09PSBlZGdlRGF0YS5mcm9tTm9kZSlcclxuICAgICAgY29uc3QgdG9Ob2RlRGF0YSA9IGRhdGEubm9kZXMuZmluZChub2RlRGF0YSA9PiBub2RlRGF0YS5pZCA9PT0gZWRnZURhdGEudG9Ob2RlKVxyXG4gICAgICBpZiAoIWZyb21Ob2RlRGF0YSB8fCAhdG9Ob2RlRGF0YSkgcmV0dXJuIHRydWVcclxuXHJcbiAgICAgIGlmIChmcm9tTm9kZURhdGEucG9ydGFsSWQgPT09IHVuZGVmaW5lZCAmJiB0b05vZGVEYXRhLnBvcnRhbElkID09PSB1bmRlZmluZWQpIHsgLy8gTm9ybWFsIGVkZ2VcclxuICAgICAgICByZXR1cm4gdHJ1ZSBcclxuICAgICAgfSBlbHNlIGlmIChmcm9tTm9kZURhdGEucG9ydGFsSWQgIT09IHVuZGVmaW5lZCAmJiB0b05vZGVEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQpIHsgLy8gQ29tcGxldGVseSBmcm9tIHBvcnRhbFxyXG4gICAgICAgIC8vIFNhdmUgdG8gcG9ydGFsIGZpbGU/IE9SIGRlbGV0ZSFcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfSBlbHNlIHsgLy8gUGFydGlhbGx5IGZyb20gcG9ydGFsXHJcbiAgICAgICAgY29uc3QgZnJvbVBvcnRhbE5vZGVEYXRhID0gZnJvbU5vZGVEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQgPyBmcm9tTm9kZURhdGEgOiB0b05vZGVEYXRhXHJcbiAgICAgICAgY29uc3Qgbm90RnJvbVBvcnRhbE5vZGVEYXRhID0gZnJvbU5vZGVEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQgPyB0b05vZGVEYXRhIDogZnJvbU5vZGVEYXRhXHJcblxyXG4gICAgICAgIG5vdEZyb21Qb3J0YWxOb2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwgPSBub3RGcm9tUG9ydGFsTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsID8/IHt9XHJcbiAgICAgICAgbm90RnJvbVBvcnRhbE5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbFtmcm9tUG9ydGFsTm9kZURhdGEucG9ydGFsSWQhXSA9IG5vdEZyb21Qb3J0YWxOb2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWxbZnJvbVBvcnRhbE5vZGVEYXRhLnBvcnRhbElkIV0gPz8gW11cclxuICAgICAgICBub3RGcm9tUG9ydGFsTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsW2Zyb21Qb3J0YWxOb2RlRGF0YS5wb3J0YWxJZCFdLnB1c2goZWRnZURhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGRhdGEubm9kZXMgPSBkYXRhLm5vZGVzLmZpbHRlcihub2RlRGF0YSA9PiBub2RlRGF0YS5wb3J0YWxJZCA9PT0gdW5kZWZpbmVkKVxyXG5cclxuICAgIGZvciAoY29uc3QgcG9ydGFsTm9kZURhdGEgb2YgZGF0YS5ub2Rlcykge1xyXG4gICAgICBpZiAocG9ydGFsTm9kZURhdGEudHlwZSAhPT0gJ2ZpbGUnKSBjb250aW51ZVxyXG5cclxuICAgICAgLy8gUmVzZXQgcG9ydGFsIHNpemVcclxuICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ21haW50YWluQ2xvc2VkUG9ydGFsU2l6ZScpKSB7XHJcbiAgICAgICAgcG9ydGFsTm9kZURhdGEud2lkdGggPSBwb3J0YWxOb2RlRGF0YS5jbG9zZWRQb3J0YWxXaWR0aCA/PyBwb3J0YWxOb2RlRGF0YS53aWR0aFxyXG4gICAgICAgIHBvcnRhbE5vZGVEYXRhLmhlaWdodCA9IHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbEhlaWdodCA/PyBwb3J0YWxOb2RlRGF0YS5oZWlnaHRcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUmVtb3ZlIHJlZmVyZW5jZXMgdG8gcG9ydGFsIG5vZGVzIGFuZCBlZGdlc1xyXG4gICAgICBkZWxldGUgcG9ydGFsTm9kZURhdGEuY2xvc2VkUG9ydGFsV2lkdGhcclxuICAgICAgZGVsZXRlIHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbEhlaWdodFxyXG4gICAgICBkZWxldGUgcG9ydGFsTm9kZURhdGEucG9ydGFsSWRNYXBzXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGdldENhbnZhc0RhdGFXaXRoUG9ydGFscyhjYW52YXM6IENhbnZhcywgZGF0YVJlZjogQ2FudmFzRGF0YSk6IFByb21pc2U8Q2FudmFzRGF0YT4ge1xyXG4gICAgLy8gRGVlcCBjb3B5IGRhdGEgLSBJZiBhbm90aGVyIGZpbGUgZ2V0cyBvcGVuZWQgaW4gdGhlIHNhbWUgdmlldywgdGhlIGRhdGEgd291bGQgZ2V0IG92ZXJ3cml0dGVuXHJcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhUmVmKSkgYXMgQ2FudmFzRGF0YVxyXG5cclxuICAgIC8vIE9wZW4gcG9ydGFsc1xyXG4gICAgY29uc3QgYWRkZWREYXRhID0gYXdhaXQgUHJvbWlzZS5hbGwoZGF0YS5ub2Rlcy5tYXAobm9kZURhdGEgPT4gdGhpcy50cnlPcGVuUG9ydGFsKGNhbnZhcywgbm9kZURhdGEpKSlcclxuICAgIGZvciAoY29uc3QgbmV3RGF0YSBvZiBhZGRlZERhdGEpIHtcclxuICAgICAgZGF0YS5ub2Rlcy5wdXNoKC4uLm5ld0RhdGEubm9kZXMpXHJcbiAgICAgIGRhdGEuZWRnZXMucHVzaCguLi5uZXdEYXRhLmVkZ2VzKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBjcm9zcy1wb3J0YWwgZWRnZXNcclxuICAgIGZvciAoY29uc3Qgb3JpZ2luTm9kZURhdGEgb2YgZGF0YS5ub2Rlcykge1xyXG4gICAgICBpZiAob3JpZ2luTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsID09PSB1bmRlZmluZWQpIGNvbnRpbnVlXHJcblxyXG4gICAgICBmb3IgKGNvbnN0IFtyZWxhdGl2ZVBvcnRhbElkLCBlZGdlc10gb2YgT2JqZWN0LmVudHJpZXMob3JpZ2luTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsKSkge1xyXG4gICAgICAgIGNvbnN0IGlkUHJlZml4ID0gb3JpZ2luTm9kZURhdGEucG9ydGFsSWQgPyBgJHtvcmlnaW5Ob2RlRGF0YS5wb3J0YWxJZH0tYCA6ICcnXHJcblxyXG4gICAgICAgIGNvbnN0IHBvcnRhbElkID0gYCR7aWRQcmVmaXh9JHtyZWxhdGl2ZVBvcnRhbElkfWBcclxuICAgICAgICBjb25zdCB0YXJnZXRQb3J0YWxEYXRhID0gZGF0YS5ub2Rlcy5maW5kKG5vZGVEYXRhID0+IG5vZGVEYXRhLmlkID09PSBwb3J0YWxJZClcclxuXHJcbiAgICAgICAgLy8gSWYgdGFyZ2V0IHBvcnRhbCBpcyBkZWxldGVkLCByZW1vdmUgZWRnZXNcclxuICAgICAgICBpZiAoIXRhcmdldFBvcnRhbERhdGEpIHtcclxuICAgICAgICAgIGRlbGV0ZSBvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwhW3BvcnRhbElkXVxyXG4gICAgICAgICAgY29udGludWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIHBvcnRhbCBpcyBvcGVuLCBhZGQgZWRnZXNcclxuICAgICAgICBpZiAodGFyZ2V0UG9ydGFsRGF0YS5wb3J0YWxUb0ZpbGUpIHtcclxuICAgICAgICAgIC8vIFB1c2ggZWRnZXMgd2l0aCB1cGRhdGVkIGZyb20gYW5kIHRvIGlkc1xyXG4gICAgICAgICAgZGF0YS5lZGdlcy5wdXNoKC4uLmVkZ2VzLm1hcChlZGdlID0+ICh7XHJcbiAgICAgICAgICAgIC4uLmVkZ2UsXHJcbiAgICAgICAgICAgIHBvcnRhbElkOiBvcmlnaW5Ob2RlRGF0YS5wb3J0YWxJZCxcclxuICAgICAgICAgICAgZnJvbU5vZGU6IGAke2lkUHJlZml4fSR7ZWRnZS5mcm9tTm9kZX1gLFxyXG4gICAgICAgICAgICB0b05vZGU6IGAke2lkUHJlZml4fSR7ZWRnZS50b05vZGV9YFxyXG4gICAgICAgICAgfSkpKVxyXG5cclxuICAgICAgICAgIGRlbGV0ZSBvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwhW3BvcnRhbElkXVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFscycpKSB7XHJcbiAgICAgICAgICAvLyBJZiBwb3J0YWwgaXMgY2xvc2VkLCBhZGQgYWx0ZXJuYXRpdmUgZWRnZXMgZGlyZWN0bHkgdG8gcG9ydGFsXHJcbiAgICAgICAgICAvLyBCdXQgZG9uJ3QgZGVsZXRlIHRoZSBlZGdlc1xyXG5cclxuICAgICAgICAgIGRhdGEuZWRnZXMucHVzaCguLi5lZGdlcy5tYXAoZWRnZSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdoaWNoIGVuZCBpcyBmcm9tIHBvcnRhbD9cclxuICAgICAgICAgICAgY29uc3QgZnJvbU5vZGVJZCA9IGAke2lkUHJlZml4fSR7ZWRnZS5mcm9tTm9kZX1gXHJcbiAgICAgICAgICAgIGNvbnN0IGZyb21Ob2RlID0gZGF0YS5ub2Rlcy5maW5kKG5vZGVEYXRhID0+IG5vZGVEYXRhLmlkID09PSBmcm9tTm9kZUlkKVxyXG4gICAgICAgICAgICBjb25zdCB0b05vZGVJZCA9IGAke2lkUHJlZml4fSR7ZWRnZS50b05vZGV9YFxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAuLi5lZGdlLFxyXG4gICAgICAgICAgICAgIGZyb21Ob2RlOiBmcm9tTm9kZSA/IGZyb21Ob2RlSWQgOiBwb3J0YWxJZCxcclxuICAgICAgICAgICAgICB0b05vZGU6IGZyb21Ob2RlID8gcG9ydGFsSWQgOiB0b05vZGVJZCxcclxuICAgICAgICAgICAgICBwb3J0YWxJZDogcG9ydGFsSWQgLy8gTWFyayBpdCBhcyB0ZW1wb3JhcnlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiBubyBtb3JlIGVkZ2VzLCBkZWxldGUgdGhlIHByb3BlcnR5XHJcbiAgICAgIGlmIChPYmplY3Qua2V5cyhvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwhKS5sZW5ndGggPT09IDApXHJcbiAgICAgICAgZGVsZXRlIG9yaWdpbk5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHRyeU9wZW5Qb3J0YWwoY2FudmFzOiBDYW52YXMsIHBvcnRhbE5vZGVEYXRhOiBDYW52YXNOb2RlRGF0YSk6IFByb21pc2U8Q2FudmFzRGF0YT4ge1xyXG4gICAgY29uc3QgYWRkZWREYXRhOiBDYW52YXNEYXRhID0geyBub2RlczogW10sIGVkZ2VzOiBbXSB9XHJcbiAgICBpZiAocG9ydGFsTm9kZURhdGEudHlwZSAhPT0gJ2ZpbGUnIHx8ICFwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUpIHJldHVybiBhZGRlZERhdGFcclxuXHJcbiAgICAvLyBVcGRhdGUgcG9ydGFsIGZpbGVcclxuICAgIHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9IHBvcnRhbE5vZGVEYXRhLmZpbGVcclxuXHJcbiAgICAvLyBGaXggcmVjdXJzaXZlIHBvcnRhbHNcclxuICAgIGlmIChwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPT09IGNhbnZhcy52aWV3LmZpbGUucGF0aCkge1xyXG4gICAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPSB1bmRlZmluZWRcclxuICAgICAgcmV0dXJuIGFkZGVkRGF0YVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBvcnRhbEZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBvcnRhbE5vZGVEYXRhLmZpbGUhKVxyXG4gICAgaWYgKCEocG9ydGFsRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB8fCBwb3J0YWxGaWxlLmV4dGVuc2lvbiAhPT0gJ2NhbnZhcycpIHtcclxuICAgICAgcG9ydGFsTm9kZURhdGEucG9ydGFsVG9GaWxlID0gdW5kZWZpbmVkXHJcbiAgICAgIHJldHVybiBhZGRlZERhdGFcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwb3J0YWxGaWxlRGF0YVN0cmluZyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jYWNoZWRSZWFkKHBvcnRhbEZpbGUpXHJcbiAgICBpZiAocG9ydGFsRmlsZURhdGFTdHJpbmcgPT09ICcnKSByZXR1cm4gYWRkZWREYXRhXHJcblxyXG4gICAgY29uc3QgcG9ydGFsRmlsZURhdGEgPSBKU09OLnBhcnNlKHBvcnRhbEZpbGVEYXRhU3RyaW5nKSBhcyBDYW52YXNEYXRhXHJcbiAgICBpZiAoIXBvcnRhbEZpbGVEYXRhKSB7XHJcbiAgICAgIHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9IHVuZGVmaW5lZFxyXG4gICAgICByZXR1cm4gYWRkZWREYXRhXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIHBvcnRhbCBub2RlcyBhbmQgZWRnZXMgaWQgbWFwXHJcbiAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHMgPSB7XHJcbiAgICAgIG5vZGVJZE1hcDoge30sXHJcbiAgICAgIGVkZ2VJZE1hcDoge31cclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgbmVzdGVkIG5vZGUgb2Zmc2V0XHJcbiAgICBjb25zdCBzb3VyY2VNaW5Db29yZGluYXRlcyA9IENhbnZhc0hlbHBlci5nZXRCQm94KHBvcnRhbEZpbGVEYXRhLm5vZGVzKVxyXG4gICAgY29uc3QgcG9ydGFsT2Zmc2V0ID0ge1xyXG4gICAgICB4OiBwb3J0YWxOb2RlRGF0YS54IC0gc291cmNlTWluQ29vcmRpbmF0ZXMubWluWCArIFBPUlRBTF9QQURESU5HLFxyXG4gICAgICB5OiBwb3J0YWxOb2RlRGF0YS55IC0gc291cmNlTWluQ29vcmRpbmF0ZXMubWluWSArIFBPUlRBTF9QQURESU5HXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIG5vZGVzIGZyb20gcG9ydGFsXHJcbiAgICBmb3IgKGNvbnN0IG5vZGVEYXRhRnJvbVBvcnRhbCBvZiBwb3J0YWxGaWxlRGF0YS5ub2Rlcykge1xyXG4gICAgICBjb25zdCByZWZOb2RlSWQgPSBgJHtwb3J0YWxOb2RlRGF0YS5pZH0tJHtub2RlRGF0YUZyb21Qb3J0YWwuaWR9YFxyXG4gICAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHMubm9kZUlkTWFwW3JlZk5vZGVJZF0gPSBub2RlRGF0YUZyb21Qb3J0YWwuaWRcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFkZGVkTm9kZSA9IHtcclxuICAgICAgICAuLi5ub2RlRGF0YUZyb21Qb3J0YWwsXHJcbiAgICAgICAgaWQ6IHJlZk5vZGVJZCxcclxuICAgICAgICB4OiBub2RlRGF0YUZyb21Qb3J0YWwueCArIHBvcnRhbE9mZnNldC54LFxyXG4gICAgICAgIHk6IG5vZGVEYXRhRnJvbVBvcnRhbC55ICsgcG9ydGFsT2Zmc2V0LnksXHJcbiAgICAgICAgcG9ydGFsSWQ6IHBvcnRhbE5vZGVEYXRhLmlkXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFkZGVkRGF0YS5ub2Rlcy5wdXNoKGFkZGVkTm9kZSlcclxuXHJcbiAgICAgIGNvbnN0IG5lc3RlZE5vZGVzID0gYXdhaXQgdGhpcy50cnlPcGVuUG9ydGFsKGNhbnZhcywgYWRkZWROb2RlKVxyXG4gICAgICBhZGRlZERhdGEubm9kZXMucHVzaCguLi5uZXN0ZWROb2Rlcy5ub2RlcylcclxuICAgICAgYWRkZWREYXRhLmVkZ2VzLnB1c2goLi4ubmVzdGVkTm9kZXMuZWRnZXMpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIGVkZ2VzIGZyb20gcG9ydGFsXHJcbiAgICBmb3IgKGNvbnN0IGVkZ2VEYXRhRnJvbVBvcnRhbCBvZiBwb3J0YWxGaWxlRGF0YS5lZGdlcykge1xyXG4gICAgICBjb25zdCByZWZFZGdlSWQgPSBgJHtwb3J0YWxOb2RlRGF0YS5pZH0tJHtlZGdlRGF0YUZyb21Qb3J0YWwuaWR9YFxyXG4gICAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHMuZWRnZUlkTWFwW3JlZkVkZ2VJZF0gPSBlZGdlRGF0YUZyb21Qb3J0YWwuaWRcclxuXHJcbiAgICAgIGNvbnN0IGZyb21SZWZOb2RlID0gT2JqZWN0LmVudHJpZXMocG9ydGFsTm9kZURhdGEucG9ydGFsSWRNYXBzLm5vZGVJZE1hcClcclxuICAgICAgICAuZmluZCgoW19yZWZOb2RlSWQsIG5vZGVJZF0pID0+IG5vZGVJZCA9PT0gZWRnZURhdGFGcm9tUG9ydGFsLmZyb21Ob2RlKT8uWzBdXHJcbiAgICAgIGNvbnN0IHRvUmVmTm9kZSA9IE9iamVjdC5lbnRyaWVzKHBvcnRhbE5vZGVEYXRhLnBvcnRhbElkTWFwcy5ub2RlSWRNYXApXHJcbiAgICAgICAgLmZpbmQoKFtfcmVmTm9kZUlkLCBub2RlSWRdKSA9PiBub2RlSWQgPT09IGVkZ2VEYXRhRnJvbVBvcnRhbC50b05vZGUpPy5bMF1cclxuXHJcbiAgICAgIGlmICghZnJvbVJlZk5vZGUgfHwgIXRvUmVmTm9kZSkgY29udGludWVcclxuXHJcbiAgICAgIGFkZGVkRGF0YS5lZGdlcy5wdXNoKHtcclxuICAgICAgICAuLi5lZGdlRGF0YUZyb21Qb3J0YWwsXHJcbiAgICAgICAgaWQ6IHJlZkVkZ2VJZCxcclxuICAgICAgICBmcm9tTm9kZTogZnJvbVJlZk5vZGUsXHJcbiAgICAgICAgdG9Ob2RlOiB0b1JlZk5vZGUsXHJcbiAgICAgICAgcG9ydGFsSWQ6IHBvcnRhbE5vZGVEYXRhLmlkXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVzaXplIHBvcnRhbFxyXG4gICAgY29uc3QgbmVzdGVkTm9kZXNCQm94ID0gQ2FudmFzSGVscGVyLmdldEJCb3goYWRkZWREYXRhLm5vZGVzKVxyXG4gICAgY29uc3QgdGFyZ2V0U2l6ZSA9IHRoaXMuZ2V0UG9ydGFsU2l6ZShuZXN0ZWROb2Rlc0JCb3gpXHJcblxyXG4gICAgLy8gU2F2ZSBjbG9zZWQgcG9ydGFsIHNpemVcclxuICAgIHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbFdpZHRoID0gcG9ydGFsTm9kZURhdGEud2lkdGhcclxuICAgIHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbEhlaWdodCA9IHBvcnRhbE5vZGVEYXRhLmhlaWdodFxyXG5cclxuICAgIC8vIFNldCBvcGVuIHBvcnRhbCBzaXplXHJcbiAgICBwb3J0YWxOb2RlRGF0YS53aWR0aCA9IHRhcmdldFNpemUud2lkdGhcclxuICAgIHBvcnRhbE5vZGVEYXRhLmhlaWdodCA9IHRhcmdldFNpemUuaGVpZ2h0XHJcblxyXG4gICAgcmV0dXJuIGFkZGVkRGF0YVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRQb3J0YWxTaXplKHNvdXJjZUJCb3g6IEJCb3gpIHtcclxuICAgIGNvbnN0IHNvdXJjZVNpemUgPSB7XHJcbiAgICAgIHdpZHRoOiBzb3VyY2VCQm94Lm1heFggLSBzb3VyY2VCQm94Lm1pblgsXHJcbiAgICAgIGhlaWdodDogc291cmNlQkJveC5tYXhZIC0gc291cmNlQkJveC5taW5ZXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGFyZ2V0U2l6ZSA9IHtcclxuICAgICAgd2lkdGg6IE1hdGgubWF4KHNvdXJjZVNpemUud2lkdGggKyBQT1JUQUxfUEFERElORyAqIDIsIE1JTl9PUEVOX1BPUlRBTF9TSVpFLndpZHRoKSxcclxuICAgICAgaGVpZ2h0OiBNYXRoLm1heChzb3VyY2VTaXplLmhlaWdodCArIFBPUlRBTF9QQURESU5HICogMiwgTUlOX09QRU5fUE9SVEFMX1NJWkUuaGVpZ2h0KVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHRhcmdldFNpemUud2lkdGgpKSB0YXJnZXRTaXplLndpZHRoID0gTUlOX09QRU5fUE9SVEFMX1NJWkUud2lkdGhcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHRhcmdldFNpemUuaGVpZ2h0KSkgdGFyZ2V0U2l6ZS5oZWlnaHQgPSBNSU5fT1BFTl9QT1JUQUxfU0laRS5oZWlnaHRcclxuXHJcbiAgICByZXR1cm4gdGFyZ2V0U2l6ZVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIENhbnZhc0VkZ2UsIENhbnZhc05vZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyIGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5pbXBvcnQgeyBGaWxlU2VsZWN0TW9kYWwgfSBmcm9tIFwic3JjL3V0aWxzL21vZGFsLWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJldHRlckRlZmF1bHRTZXR0aW5nc0NhbnZhc0V4dGVuc2lvbiAgZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuIHRydWUgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5tb2RpZnlDYW52YXNTZXR0aW5ncyh0aGlzLnBsdWdpbi5nZXRDdXJyZW50Q2FudmFzKCkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVCxcclxuICAgICAgKCkgPT4gdGhpcy5tb2RpZnlDYW52YXNTZXR0aW5ncyh0aGlzLnBsdWdpbi5nZXRDdXJyZW50Q2FudmFzKCkpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm1vZGlmeUNhbnZhc1NldHRpbmdzKGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Eb3VibGVDbGljayxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBldmVudDogTW91c2VFdmVudCwgcHJldmVudERlZmF1bHQ6IHsgdmFsdWU6IGJvb2xlYW4gfSkgPT4gdGhpcy5vbkRvdWJsZUNsaWNrKGNhbnZhcywgZXZlbnQsIHByZXZlbnREZWZhdWx0KVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUpID0+IHtcclxuICAgICAgICB0aGlzLmVuZm9yY2VOb2RlR3JpZEFsaWdubWVudChjYW52YXMsIG5vZGUpXHJcbiAgICAgICAgdGhpcy5hcHBseURlZmF1bHROb2RlU3R5bGVzKGNhbnZhcywgbm9kZSlcclxuICAgICAgfVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGVkZ2U6IENhbnZhc0VkZ2UpID0+IHRoaXMuYXBwbHlEZWZhdWx0RWRnZVN0eWxlcyhjYW52YXMsIGVkZ2UpXHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBtb2RpZnlDYW52YXNTZXR0aW5ncyhjYW52YXM6IENhbnZhcyB8IG51bGwpIHtcclxuICAgIGlmICghY2FudmFzKSByZXR1cm5cclxuXHJcbiAgICBjYW52YXMuY29uZmlnLmRlZmF1bHRUZXh0Tm9kZURpbWVuc2lvbnMgPSB7XHJcbiAgICAgIHdpZHRoOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0VGV4dE5vZGVXaWR0aCcpLFxyXG4gICAgICBoZWlnaHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2RlZmF1bHRUZXh0Tm9kZUhlaWdodCcpXHJcbiAgICB9XHJcblxyXG4gICAgY2FudmFzLmNvbmZpZy5kZWZhdWx0RmlsZU5vZGVEaW1lbnNpb25zID0ge1xyXG4gICAgICB3aWR0aDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGVmYXVsdEZpbGVOb2RlV2lkdGgnKSxcclxuICAgICAgaGVpZ2h0OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0RmlsZU5vZGVIZWlnaHQnKVxyXG4gICAgfVxyXG5cclxuICAgIGNhbnZhcy5jb25maWcubWluQ29udGFpbmVyRGltZW5zaW9uID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnbWluTm9kZVNpemUnKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBvbkRvdWJsZUNsaWNrKGNhbnZhczogQ2FudmFzLCBldmVudDogTW91c2VFdmVudCwgcHJldmVudERlZmF1bHQ6IHsgdmFsdWU6IGJvb2xlYW4gfSkge1xyXG4gICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgfHwgZXZlbnQudGFyZ2V0ICE9PSBjYW52YXMud3JhcHBlckVsIHx8IGNhbnZhcy5pc0RyYWdnaW5nIHx8IGNhbnZhcy5yZWFkb25seSkgcmV0dXJuXHJcbiAgICBwcmV2ZW50RGVmYXVsdC52YWx1ZSA9IHRydWVcclxuXHJcbiAgICBsZXQgcG9zID0gY2FudmFzLnBvc0Zyb21FdnQoZXZlbnQpXHJcblxyXG4gICAgc3dpdGNoICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdub2RlVHlwZU9uRG91YmxlQ2xpY2snKSkge1xyXG4gICAgICBjYXNlICdmaWxlJzpcclxuICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgbmV3IEZpbGVTZWxlY3RNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIHVuZGVmaW5lZCwgdHJ1ZSkuYXdhaXRJbnB1dCgpXHJcbiAgICAgICAgY2FudmFzLmNyZWF0ZUZpbGVOb2RlKHtcclxuICAgICAgICAgIHBvczogcG9zLFxyXG4gICAgICAgICAgcG9zaXRpb246ICdjZW50ZXInLFxyXG4gICAgICAgICAgZmlsZTogZmlsZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgY2FudmFzLmNyZWF0ZVRleHROb2RlKHtcclxuICAgICAgICAgIHBvczogcG9zLFxyXG4gICAgICAgICAgcG9zaXRpb246ICdjZW50ZXInXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZW5mb3JjZU5vZGVHcmlkQWxpZ25tZW50KGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2FsaWduTmV3Tm9kZXNUb0dyaWQnKSkgcmV0dXJuXHJcblxyXG4gICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG4gICAgbm9kZS5zZXREYXRhKHtcclxuICAgICAgLi4ubm9kZURhdGEsXHJcbiAgICAgIHg6IE1hdGgucm91bmQobm9kZURhdGEueCAvIENhbnZhc0hlbHBlci5HUklEX1NJWkUpICogQ2FudmFzSGVscGVyLkdSSURfU0laRSxcclxuICAgICAgeTogTWF0aC5yb3VuZChub2RlRGF0YS55IC8gQ2FudmFzSGVscGVyLkdSSURfU0laRSkgKiBDYW52YXNIZWxwZXIuR1JJRF9TSVpFXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhcHBseURlZmF1bHROb2RlU3R5bGVzKF9jYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG4gICAgaWYgKG5vZGVEYXRhLnR5cGUgIT09ICd0ZXh0JykgcmV0dXJuXHJcblxyXG4gICAgbm9kZS5zZXREYXRhKHtcclxuICAgICAgLi4ubm9kZURhdGEsXHJcbiAgICAgIHN0eWxlQXR0cmlidXRlczoge1xyXG4gICAgICAgIC4uLm5vZGVEYXRhLnN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgICAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0VGV4dE5vZGVTdHlsZUF0dHJpYnV0ZXMnKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBhcHBseURlZmF1bHRFZGdlU3R5bGVzKGNhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlKSB7XHJcbiAgICBjb25zdCBlZGdlRGF0YSA9IGVkZ2UuZ2V0RGF0YSgpXHJcblxyXG4gICAgZWRnZS5zZXREYXRhKHtcclxuICAgICAgLi4uZWRnZURhdGEsXHJcbiAgICAgIHN0eWxlQXR0cmlidXRlczoge1xyXG4gICAgICAgIC4uLmVkZ2VEYXRhLnN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgICAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0RWRnZVN0eWxlQXR0cmlidXRlcycpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gV2FpdCB1bnRpbCB0aGUgY29ubmVjdGluZyBjbGFzcyBpcyByZW1vdmVkIChlbHNlLCB0aGUgZGlyZWN0aW9uIHdpbGwgYmUgcmVzZXQgb24gbW91c2Vtb3ZlIChvbkNvbm5lY3Rpb25Qb2ludGVyZG93bikpXHJcbiAgICBpZiAoY2FudmFzLmNhbnZhc0VsLmhhc0NsYXNzKCdpcy1jb25uZWN0aW5nJykpIHtcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKCFjYW52YXMuY2FudmFzRWwuaGFzQ2xhc3MoJ2lzLWNvbm5lY3RpbmcnKSkgcmVzb2x2ZSgpXHJcbiAgICAgICAgfSkub2JzZXJ2ZShjYW52YXMuY2FudmFzRWwsIHsgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ10gfSlcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsaW5lRGlyZWN0aW9uID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGVmYXVsdEVkZ2VMaW5lRGlyZWN0aW9uJylcclxuICAgIGVkZ2Uuc2V0RGF0YSh7XHJcbiAgICAgIC4uLmVkZ2UuZ2V0RGF0YSgpLFxyXG4gICAgICBmcm9tRW5kOiBsaW5lRGlyZWN0aW9uID09PSAnYmlkaXJlY3Rpb25hbCcgPyAnYXJyb3cnIDogJ25vbmUnLFxyXG4gICAgICB0b0VuZDogbGluZURpcmVjdGlvbiA9PT0gJ25vbmRpcmVjdGlvbmFsJyA/ICdub25lJyA6ICdhcnJvdycsXHJcbiAgICB9KVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBXb3Jrc3BhY2VXaW5kb3cgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgREVGQVVMVF9DT0xPUlNfQ09VTlQgPSA2XHJcbmNvbnN0IENVU1RPTV9DT0xPUlNfTU9EX1NUWUxFU19JRCA9ICdtb2QtY3VzdG9tLWNvbG9ycydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbG9yUGFsZXR0ZUNhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgb2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXJ8bnVsbCA9IG51bGxcclxuICBcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuICBcclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICAnd2luZG93LW9wZW4nLFxyXG4gICAgICAoX3dpbjogV29ya3NwYWNlV2luZG93LCBfd2luZG93OiBXaW5kb3cpID0+IHRoaXMudXBkYXRlQ3VzdG9tQ29sb3JNb2RTdHlsZUNsYXNzZXMoKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgICdjc3MtY2hhbmdlJyxcclxuICAgICAgKCkgPT4gdGhpcy51cGRhdGVDdXN0b21Db2xvck1vZFN0eWxlQ2xhc3NlcygpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMudXBkYXRlQ3VzdG9tQ29sb3JNb2RTdHlsZUNsYXNzZXMoKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLnBhdGNoQ29sb3JTZWxlY3Rpb24oY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlcigoKSA9PiB0aGlzLm9ic2VydmVyPy5kaXNjb25uZWN0KCkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUN1c3RvbUNvbG9yTW9kU3R5bGVDbGFzc2VzKCkge1xyXG4gICAgY29uc3QgY3VzdG9tQ3NzID0gdGhpcy5nZXRDdXN0b21Db2xvcnMoKS5tYXAoKGNvbG9ySWQpID0+IGBcclxuICAgICAgLm1vZC1jYW52YXMtY29sb3ItJHtjb2xvcklkfSB7XHJcbiAgICAgICAgLS1jYW52YXMtY29sb3I6IHZhcigtLWNhbnZhcy1jb2xvci0ke2NvbG9ySWR9KTtcclxuICAgICAgfVxyXG4gICAgYCkuam9pbignJylcclxuXHJcbiAgICBmb3IgKGNvbnN0IHdpbiBvZiB0aGlzLnBsdWdpbi53aW5kb3dzTWFuYWdlci53aW5kb3dzKSB7XHJcbiAgICAgIGNvbnN0IGRvYyA9IHdpbi5kb2N1bWVudFxyXG4gICAgICBcclxuICAgICAgZG9jLmdldEVsZW1lbnRCeUlkKENVU1RPTV9DT0xPUlNfTU9EX1NUWUxFU19JRCk/LnJlbW92ZSgpXHJcblxyXG4gICAgICBjb25zdCBjdXN0b21Db2xvck1vZFN0eWxlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJylcclxuICAgICAgY3VzdG9tQ29sb3JNb2RTdHlsZS5pZCA9IENVU1RPTV9DT0xPUlNfTU9EX1NUWUxFU19JRFxyXG4gICAgICBkb2MuaGVhZC5hcHBlbmRDaGlsZChjdXN0b21Db2xvck1vZFN0eWxlKVxyXG5cclxuICAgICAgY3VzdG9tQ29sb3JNb2RTdHlsZS50ZXh0Q29udGVudCA9IGN1c3RvbUNzc1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwYXRjaENvbG9yU2VsZWN0aW9uKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBpZiAodGhpcy5vYnNlcnZlcikgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KClcclxuXHJcbiAgICB0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IHtcclxuICAgICAgY29uc3QgY29sb3JNZW51T3BlbmVkID0gbXV0YXRpb25zLnNvbWUobXV0YXRpb24gPT4gXHJcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhtdXRhdGlvbi5hZGRlZE5vZGVzKS5zb21lKChub2RlOiBOb2RlKSA9PiBcclxuICAgICAgICAgIG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiBub2RlLmNsYXNzTGlzdC5jb250YWlucygnY2FudmFzLXN1Ym1lbnUnKSAmJiBPYmplY3QudmFsdWVzKG5vZGUuY2hpbGROb2Rlcykuc29tZSgobm9kZTogTm9kZSkgPT5cclxuICAgICAgICAgICAgbm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYW52YXMtY29sb3ItcGlja2VyLWl0ZW0nKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgICBpZiAoIWNvbG9yTWVudU9wZW5lZCkgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBzdWJtZW51ID0gY2FudmFzLm1lbnUubWVudUVsLnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXMtc3VibWVudScpXHJcbiAgICAgIGlmICghc3VibWVudSkgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBjdXJyZW50Tm9kZUNvbG9yID0gY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlcy5tYXAobm9kZSA9PiBub2RlLmNvbG9yKS5sYXN0KClcclxuICAgICAgZm9yIChjb25zdCBjb2xvcklkIG9mIHRoaXMuZ2V0Q3VzdG9tQ29sb3JzKCkpIHtcclxuICAgICAgICBjb25zdCBjdXN0b21Db2xvck1lbnVJdGVtID0gdGhpcy5jcmVhdGVDb2xvck1lbnVJdGVtKGNhbnZhcywgY29sb3JJZClcclxuICAgICAgICBpZiAoY3VycmVudE5vZGVDb2xvciA9PT0gY29sb3JJZCkgY3VzdG9tQ29sb3JNZW51SXRlbS5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHN1Ym1lbnUuaW5zZXJ0QmVmb3JlKGN1c3RvbUNvbG9yTWVudUl0ZW0sIHN1Ym1lbnUubGFzdENoaWxkKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShjYW52YXMubWVudS5tZW51RWwsIHsgY2hpbGRMaXN0OiB0cnVlIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUNvbG9yTWVudUl0ZW0oY2FudmFzOiBDYW52YXMsIGNvbG9ySWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgbWVudUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgbWVudUl0ZW0uY2xhc3NMaXN0LmFkZCgnY2FudmFzLWNvbG9yLXBpY2tlci1pdGVtJylcclxuICAgIG1lbnVJdGVtLmNsYXNzTGlzdC5hZGQoYG1vZC1jYW52YXMtY29sb3ItJHtjb2xvcklkfWApXHJcblxyXG4gICAgbWVudUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIG1lbnVJdGVtLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpXHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY2FudmFzLnNlbGVjdGlvbikge1xyXG4gICAgICAgIGl0ZW0uc2V0Q29sb3IoY29sb3JJZClcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FudmFzLnJlcXVlc3RTYXZlKClcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIG1lbnVJdGVtXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEN1c3RvbUNvbG9ycygpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBjb2xvcnM6IHN0cmluZ1tdID0gW11cclxuXHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICBjb25zdCBjb2xvcklkID0gKERFRkFVTFRfQ09MT1JTX0NPVU5UICsgY29sb3JzLmxlbmd0aCArIDEpLnRvU3RyaW5nKClcclxuICAgICAgaWYgKCFnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoYC0tY2FudmFzLWNvbG9yLSR7Y29sb3JJZH1gKSkgYnJlYWtcclxuXHJcbiAgICAgIGNvbG9ycy5wdXNoKGNvbG9ySWQpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbG9yc1xyXG4gIH1cclxufSIsICJpbXBvcnQgeyBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQkJveCwgQ2FudmFzLCBDYW52YXNEYXRhLCBDYW52YXNOb2RlLCBTZWxlY3Rpb25EYXRhIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IEJCb3hIZWxwZXIgZnJvbSBcInNyYy91dGlscy9iYm94LWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuXHJcbmNvbnN0IENPTExBUFNFX0JVVFRPTl9JRCA9ICdncm91cC1jb2xsYXBzZS1idXR0b24nXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2xsYXBzaWJsZUdyb3Vwc0NhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ2NvbGxhcHNpYmxlR3JvdXBzRmVhdHVyZUVuYWJsZWQnIGFzIGNvbnN0IH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUNoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkgPT4gdGhpcy5vbk5vZGVDaGFuZ2VkKGNhbnZhcywgbm9kZSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlQkJveFJlcXVlc3RlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlLCBiYm94OiBCQm94KSA9PiB0aGlzLm9uTm9kZUJCb3hSZXF1ZXN0ZWQoY2FudmFzLCBub2RlLCBiYm94KVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk9uQ29weSxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBzZWxlY3Rpb25EYXRhOiBTZWxlY3Rpb25EYXRhKSA9PiB0aGlzLm9uQ29weShjYW52YXMsIHNlbGVjdGlvbkRhdGEpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRGF0YVJlcXVlc3RlZCxcclxuICAgICAgKF9jYW52YXM6IENhbnZhcywgZGF0YTogQ2FudmFzRGF0YSkgPT4gdGhpcy5leHBhbmRDb2xsYXBzZWROb2RlcyhkYXRhKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkxvYWREYXRhLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBkYXRhOiBDYW52YXNEYXRhLCBfc2V0RGF0YTogKGRhdGE6IENhbnZhc0RhdGEpID0+IHZvaWQpID0+IHRoaXMuY29sbGFwc2VOb2RlcyhkYXRhKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25Ob2RlQ2hhbmdlZChjYW52YXM6IENhbnZhcywgZ3JvdXBOb2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCBncm91cE5vZGVEYXRhID0gZ3JvdXBOb2RlLmdldERhdGEoKVxyXG4gICAgaWYgKGdyb3VwTm9kZURhdGEudHlwZSAhPT0gJ2dyb3VwJykgcmV0dXJuXHJcblxyXG4gICAgLy8gUmVtb3ZlIHRoZSBjb2xsYXBzZS9leHBhbmQgYnV0dG9uXHJcbiAgICBncm91cE5vZGUubm9kZUVsPy5xdWVyeVNlbGVjdG9yQWxsKGAjJHtDT0xMQVBTRV9CVVRUT05fSUR9YCkuZm9yRWFjaCgoZWwpID0+IGVsLnJlbW92ZSgpKVxyXG5cclxuICAgIC8vIEFkZCBjb2xsYXBzZS9leHBhbmQgYnV0dG9uIG5leHQgdG8gdGhlIGxhYmVsXHJcbiAgICBjb25zdCBjb2xsYXBzZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG4gICAgY29sbGFwc2VCdXR0b24uaWQgPSBDT0xMQVBTRV9CVVRUT05fSURcclxuICAgIHNldEljb24oY29sbGFwc2VCdXR0b24sIGdyb3VwTm9kZURhdGEuaXNDb2xsYXBzZWQgPyAncGx1cy1jaXJjbGUnIDogJ21pbnVzLWNpcmNsZScpXHJcblxyXG4gICAgY29sbGFwc2VCdXR0b24ub25jbGljayA9ICgpID0+IHsgXHJcbiAgICAgIHRoaXMuc2V0Q29sbGFwc2VkKGNhbnZhcywgZ3JvdXBOb2RlLCBncm91cE5vZGUuZ2V0RGF0YSgpLmlzQ29sbGFwc2VkID8gdW5kZWZpbmVkIDogdHJ1ZSlcclxuICAgIH1cclxuXHJcbiAgICBncm91cE5vZGUubGFiZWxFbD8uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIGNvbGxhcHNlQnV0dG9uKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbkNvcHkoY2FudmFzOiBDYW52YXMsIHNlbGVjdGlvbkRhdGE6IFNlbGVjdGlvbkRhdGEpIHtcclxuICAgIGZvciAoY29uc3QgY29sbGFwc2VkR3JvdXBEYXRhIG9mIHNlbGVjdGlvbkRhdGEubm9kZXMpIHtcclxuICAgICAgaWYgKGNvbGxhcHNlZEdyb3VwRGF0YS50eXBlICE9PSAnZ3JvdXAnIHx8ICFjb2xsYXBzZWRHcm91cERhdGEuaXNDb2xsYXBzZWQgfHwgIWNvbGxhcHNlZEdyb3VwRGF0YS5jb2xsYXBzZWREYXRhKSBjb250aW51ZVxyXG5cclxuICAgICAgc2VsZWN0aW9uRGF0YS5ub2Rlcy5wdXNoKC4uLmNvbGxhcHNlZEdyb3VwRGF0YS5jb2xsYXBzZWREYXRhLm5vZGVzLm1hcChub2RlRGF0YSA9PiAoeyBcclxuICAgICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgICAvLyBSZXN0b3JlIHRoZSByZWxhdGl2ZSBwb3NpdGlvbiBvZiB0aGUgbm9kZSB0byB0aGUgZ3JvdXBcclxuICAgICAgICB4OiBub2RlRGF0YS54ICsgY29sbGFwc2VkR3JvdXBEYXRhLngsXHJcbiAgICAgICAgeTogbm9kZURhdGEueSArIGNvbGxhcHNlZEdyb3VwRGF0YS55XHJcbiAgICAgIH0pKSlcclxuICAgICAgc2VsZWN0aW9uRGF0YS5lZGdlcy5wdXNoKC4uLmNvbGxhcHNlZEdyb3VwRGF0YS5jb2xsYXBzZWREYXRhLmVkZ2VzKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRDb2xsYXBzZWQoY2FudmFzOiBDYW52YXMsIGdyb3VwTm9kZTogQ2FudmFzTm9kZSwgY29sbGFwc2VkOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XHJcbiAgICBncm91cE5vZGUuc2V0RGF0YSh7IC4uLmdyb3VwTm9kZS5nZXREYXRhKCksIGlzQ29sbGFwc2VkOiBjb2xsYXBzZWQgfSlcclxuICAgIGNhbnZhcy5zZXREYXRhKGNhbnZhcy5nZXREYXRhKCkpXHJcblxyXG4gICAgY2FudmFzLmhpc3RvcnkuY3VycmVudC0tXHJcbiAgICBjYW52YXMucHVzaEhpc3RvcnkoY2FudmFzLmdldERhdGEoKSlcclxuICB9XHJcblxyXG4gIG9uTm9kZUJCb3hSZXF1ZXN0ZWQoX2NhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlLCBiYm94OiBCQm94KSB7XHJcbiAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICBpZiAobm9kZURhdGEudHlwZSAhPT0gJ2dyb3VwJyB8fCAhbm9kZURhdGEuaXNDb2xsYXBzZWQpIHJldHVyblxyXG5cclxuICAgIC8vIFNldCB3aWR0aCB0byBsYWJlbCB3aWR0aFxyXG4gICAgYmJveC5tYXhYID0gYmJveC5taW5YICsgKG5vZGUubm9kZUVsPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA/PyAwKVxyXG4gICAgXHJcbiAgICAvLyBTZXQgaGVpZ2h0IG9mIHRvIDAgKERvbid0IGRyYWcgYW55IG5vZGVzIHdpdGggaXQpXHJcbiAgICBiYm94Lm1heFkgPSBiYm94Lm1pbllcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXhwYW5kQ29sbGFwc2VkTm9kZXMoZGF0YTogQ2FudmFzRGF0YSkge1xyXG4gICAgZGF0YS5ub2RlcyA9IGRhdGEubm9kZXMuZmxhdE1hcCgoZ3JvdXBOb2RlRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjb2xsYXBzZWREYXRhID0gZ3JvdXBOb2RlRGF0YS5jb2xsYXBzZWREYXRhXHJcbiAgICAgIGlmIChjb2xsYXBzZWREYXRhID09PSB1bmRlZmluZWQpIHJldHVybiBbZ3JvdXBOb2RlRGF0YV1cclxuXHJcbiAgICAgIGdyb3VwTm9kZURhdGEuY29sbGFwc2VkRGF0YSA9IHVuZGVmaW5lZFxyXG5cclxuICAgICAgZGF0YS5lZGdlcy5wdXNoKC4uLmNvbGxhcHNlZERhdGEuZWRnZXMpXHJcbiAgICAgIHJldHVybiBbZ3JvdXBOb2RlRGF0YSwgLi4uY29sbGFwc2VkRGF0YS5ub2Rlcy5tYXAoKG5vZGVEYXRhKSA9PiAoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgLi4ubm9kZURhdGEsXHJcbiAgICAgICAgICAvLyBSZXN0b3JlIHRoZSByZWxhdGl2ZSBwb3NpdGlvbiBvZiB0aGUgbm9kZSB0byB0aGUgZ3JvdXBcclxuICAgICAgICAgIHg6IG5vZGVEYXRhLnggKyBncm91cE5vZGVEYXRhLngsXHJcbiAgICAgICAgICB5OiBub2RlRGF0YS55ICsgZ3JvdXBOb2RlRGF0YS55XHJcbiAgICAgICAgfVxyXG4gICAgICApKV1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbGxhcHNlTm9kZXMoZGF0YTogQ2FudmFzRGF0YSkge1xyXG4gICAgZGF0YS5ub2Rlcy5mb3JFYWNoKChncm91cE5vZGVEYXRhKSA9PiB7XHJcbiAgICAgIGlmICghZ3JvdXBOb2RlRGF0YS5pc0NvbGxhcHNlZCkgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBncm91cE5vZGVCQm94ID0gQ2FudmFzSGVscGVyLmdldEJCb3goW2dyb3VwTm9kZURhdGFdKVxyXG4gICAgICBjb25zdCBjb250YWluZWROb2Rlc0RhdGEgPSBkYXRhLm5vZGVzLmZpbHRlcigobm9kZURhdGEpID0+XHJcbiAgICAgICAgbm9kZURhdGEuaWQgIT09IGdyb3VwTm9kZURhdGEuaWQgJiYgQkJveEhlbHBlci5pbnNpZGVCQm94KENhbnZhc0hlbHBlci5nZXRCQm94KFtub2RlRGF0YV0pLCBncm91cE5vZGVCQm94LCBmYWxzZSlcclxuICAgICAgKVxyXG4gICAgICBjb25zdCBjb250YWluZWRFZGdlc0RhdGEgPSBkYXRhLmVkZ2VzLmZpbHRlcigoZWRnZURhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gY29udGFpbmVkTm9kZXNEYXRhLnNvbWUoKG5vZGVEYXRhKSA9PiBub2RlRGF0YS5pZCA9PT0gZWRnZURhdGEuZnJvbU5vZGUpIHx8IFxyXG4gICAgICAgICAgY29udGFpbmVkTm9kZXNEYXRhLnNvbWUoKG5vZGVEYXRhKSA9PiBub2RlRGF0YS5pZCA9PT0gZWRnZURhdGEudG9Ob2RlKVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgZGF0YS5ub2RlcyA9IGRhdGEubm9kZXMuZmlsdGVyKChub2RlRGF0YSkgPT4gIWNvbnRhaW5lZE5vZGVzRGF0YS5pbmNsdWRlcyhub2RlRGF0YSkpXHJcbiAgICAgIGRhdGEuZWRnZXMgPSBkYXRhLmVkZ2VzLmZpbHRlcigoZWRnZURhdGEpID0+ICFjb250YWluZWRFZGdlc0RhdGEuaW5jbHVkZXMoZWRnZURhdGEpKVxyXG5cclxuICAgICAgZ3JvdXBOb2RlRGF0YS5jb2xsYXBzZWREYXRhID0ge1xyXG4gICAgICAgIG5vZGVzOiBjb250YWluZWROb2Rlc0RhdGEubWFwKChub2RlRGF0YSkgPT4gKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBub2RlIHRvIHRoZSBncm91cFxyXG4gICAgICAgICAgICB4OiBub2RlRGF0YS54IC0gZ3JvdXBOb2RlRGF0YS54LFxyXG4gICAgICAgICAgICB5OiBub2RlRGF0YS55IC0gZ3JvdXBOb2RlRGF0YS55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKSksXHJcbiAgICAgICAgZWRnZXM6IGNvbnRhaW5lZEVkZ2VzRGF0YVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufSIsICJpbXBvcnQgQXBwLCB7IE1vZGFsLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvcGVydGllc0NhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5vbkNhbnZhc0NoYW5nZWQoY2FudmFzKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25DYW52YXNDaGFuZ2VkKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICB0aGlzLnVwZGF0ZUNzc0NsYXNzZXMoY2FudmFzKVxyXG5cclxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gY2FudmFzLnF1aWNrU2V0dGluZ3NCdXR0b24/LnBhcmVudEVsZW1lbnRcclxuICAgIGlmICghc2V0dGluZ3NDb250YWluZXIpIHJldHVyblxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRDb250cm9sTWVudUJ1dHRvbihcclxuICAgICAgc2V0dGluZ3NDb250YWluZXIsXHJcbiAgICAgIENhbnZhc0hlbHBlci5jcmVhdGVDb250cm9sTWVudUJ1dHRvbih7XHJcbiAgICAgICAgaWQ6ICdwcm9wZXJ0aWVzJyxcclxuICAgICAgICBsYWJlbDogJ1Byb3BlcnRpZXMnLFxyXG4gICAgICAgIGljb246ICdzZXR0aW5ncy0yJyxcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuUHJvcGVydGllc0RpYWxvZyhjYW52YXMpXHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHByZXZpb3VzQ3NzY2xhc3Nlczogc3RyaW5nW10gPSBbXVxyXG4gIHByaXZhdGUgdXBkYXRlQ3NzQ2xhc3NlcyhjYW52YXM6IENhbnZhcykge1xyXG4gICAgdGhpcy5wcmV2aW91c0Nzc2NsYXNzZXMuZm9yRWFjaCgoY3NzY2xhc3MpID0+IHtcclxuICAgICAgY2FudmFzLndyYXBwZXJFbC5jbGFzc0xpc3QucmVtb3ZlKGNzc2NsYXNzKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnByZXZpb3VzQ3NzY2xhc3NlcyA9IGNhbnZhcy5tZXRhZGF0YT8ucHJvcGVydGllcz8uY3NzY2xhc3NlcyB8fCBbXVxyXG4gICAgdGhpcy5wcmV2aW91c0Nzc2NsYXNzZXMuZm9yRWFjaCgoY3NzY2xhc3MpID0+IHtcclxuICAgICAgY2FudmFzLndyYXBwZXJFbC5jbGFzc0xpc3QuYWRkKGNzc2NsYXNzKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgb3BlblByb3BlcnRpZXNEaWFsb2coY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGF3YWl0IG5ldyBQcm9wZXJ0aWVzTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBjYW52YXMpLmF3YWl0RGlhbG9nKClcclxuICAgIHRoaXMudXBkYXRlQ3NzQ2xhc3NlcyhjYW52YXMpXHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBQcm9wZXJ0aWVzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgY2FudmFzOiBDYW52YXNcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBzdXBlcihhcHApXHJcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhc1xyXG4gIH1cclxuXHJcbiAgb25PcGVuKCkge1xyXG4gICAgbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXHJcbiAgICAuc2V0SGVhZGluZygpXHJcbiAgICAuc2V0TmFtZShcIlByb3BlcnRpZXNcIilcclxuXHJcbiAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcclxuICAgICAgLnNldENsYXNzKFwicHJvcGVydGllcy1maWVsZFwiKVxyXG4gICAgICAuc2V0TmFtZShcImNzc2NsYXNzZXNcIilcclxuICAgICAgLnNldFRvb2x0aXAoXCJBZGQgY2xhc3NlcyB0byB0aGUgY2FudmFzIHdyYXBwZXIgZWxlbWVudC4gU2VwYXJhdGUgbXVsdGlwbGUgY2xhc3NlcyB3aXRoIHNwYWNlcy5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuY2FudmFzLm1ldGFkYXRhLnByb3BlcnRpZXM/LmNzc2NsYXNzZXM/LmpvaW4oJyAnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMubWV0YWRhdGEucHJvcGVydGllcyA9IHRoaXMuY2FudmFzLm1ldGFkYXRhPy5wcm9wZXJ0aWVzID8/IHt9XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1ldGFkYXRhLnByb3BlcnRpZXMuY3NzY2xhc3NlcyA9IHZhbHVlLnNwbGl0KCcgJylcclxuICAgICAgICAgIH0pXHJcbiAgICAgIClcclxuICB9XHJcblxyXG4gIG9uQ2xvc2UoKSB7fVxyXG5cclxuICBhd2FpdERpYWxvZygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICB0aGlzLm9uQ2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKVxyXG4gICAgICAgIHJlc29sdmUoKVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm9wZW4oKVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgQ09OVFJPTF9NRU5VX0ZPQ1VTX1RPR0dMRV9JRCA9ICdmb2N1cy1tb2RlLXRvZ2dsZSdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvY3VzTW9kZUNhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ2ZvY3VzTW9kZUZlYXR1cmVFbmFibGVkJyBhcyBjb25zdCB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICd0b2dnbGUtZm9jdXMtbW9kZScsXHJcbiAgICAgIG5hbWU6ICdUb2dnbGUgRm9jdXMgTW9kZScsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChfY2FudmFzOiBDYW52YXMpID0+IHRydWUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLnRvZ2dsZUZvY3VzTW9kZShjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5DYW52YXNDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuYWRkQ29udHJvbE1lbnVUb2dnbGUoY2FudmFzKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkQ29udHJvbE1lbnVUb2dnbGUoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gY2FudmFzLnF1aWNrU2V0dGluZ3NCdXR0b24/LnBhcmVudEVsZW1lbnRcclxuICAgIGlmICghc2V0dGluZ3NDb250YWluZXIpIHJldHVyblxyXG5cclxuICAgIGNvbnN0IGNvbnRyb2xNZW51Rm9jdXNUb2dnbGUgPSBDYW52YXNIZWxwZXIuY3JlYXRlQ29udHJvbE1lbnVCdXR0b24oe1xyXG4gICAgICBpZDogQ09OVFJPTF9NRU5VX0ZPQ1VTX1RPR0dMRV9JRCxcclxuICAgICAgbGFiZWw6ICdGb2N1cyBNb2RlJyxcclxuICAgICAgaWNvbjogJ2ZvY3VzJyxcclxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMudG9nZ2xlRm9jdXNNb2RlKGNhbnZhcylcclxuICAgIH0pXHJcblxyXG4gICAgQ2FudmFzSGVscGVyLmFkZENvbnRyb2xNZW51QnV0dG9uKHNldHRpbmdzQ29udGFpbmVyLCBjb250cm9sTWVudUZvY3VzVG9nZ2xlKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB0b2dnbGVGb2N1c01vZGUoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IGNvbnRyb2xNZW51Rm9jdXNUb2dnbGUgPSBjYW52YXMucXVpY2tTZXR0aW5nc0J1dHRvbj8ucGFyZW50RWxlbWVudD8ucXVlcnlTZWxlY3RvcihgIyR7Q09OVFJPTF9NRU5VX0ZPQ1VTX1RPR0dMRV9JRH1gKSBhcyBIVE1MRWxlbWVudFxyXG4gICAgaWYgKCFjb250cm9sTWVudUZvY3VzVG9nZ2xlKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBuZXdWYWx1ZSA9IGNvbnRyb2xNZW51Rm9jdXNUb2dnbGUuZGF0YXNldC50b2dnbGVkICE9PSAndHJ1ZSdcclxuXHJcbiAgICBjYW52YXMud3JhcHBlckVsLmRhdGFzZXQuZm9jdXNNb2RlRW5hYmxlZCA9IG5ld1ZhbHVlLnRvU3RyaW5nKClcclxuICAgIGNvbnRyb2xNZW51Rm9jdXNUb2dnbGUuZGF0YXNldC50b2dnbGVkID0gbmV3VmFsdWUudG9TdHJpbmcoKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uLy4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcbmltcG9ydCB7IEJVSUxUSU5fTk9ERV9TVFlMRV9BVFRSSUJVVEVTLCBTdHlsZUF0dHJpYnV0ZSB9IGZyb20gXCIuL3N0eWxlLWNvbmZpZ1wiXHJcbmltcG9ydCBTZXR0aW5nc01hbmFnZXIgZnJvbSBcInNyYy9zZXR0aW5nc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb2RlU3R5bGVzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBhbGxOb2RlU3R5bGVzOiBTdHlsZUF0dHJpYnV0ZVtdXHJcblxyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuICdub2RlU3R5bGluZ0ZlYXR1cmVFbmFibGVkJyBhcyBjb25zdCB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLmFsbE5vZGVTdHlsZXMgPSBbLi4uQlVJTFRJTl9OT0RFX1NUWUxFX0FUVFJJQlVURVMsIC4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2N1c3RvbU5vZGVTdHlsZUF0dHJpYnV0ZXMnKV1cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgU2V0dGluZ3NNYW5hZ2VyLlNFVFRJTkdTX0NIQU5HRURfRVZFTlQsXHJcbiAgICAgICgpID0+IHRoaXMuYWxsTm9kZVN0eWxlcyA9IFsuLi5CVUlMVElOX05PREVfU1RZTEVfQVRUUklCVVRFUywgLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnY3VzdG9tTm9kZVN0eWxlQXR0cmlidXRlcycpXVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlBvcHVwTWVudUNyZWF0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5vblBvcHVwTWVudUNyZWF0ZWQoY2FudmFzKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25Qb3B1cE1lbnVDcmVhdGVkKGNhbnZhczogQ2FudmFzKTogdm9pZCB7XHJcbiAgICBjb25zdCBzZWxlY3Rpb25Ob2RlRGF0YSA9IGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXNcclxuICAgIGlmIChjYW52YXMucmVhZG9ubHkgfHwgc2VsZWN0aW9uTm9kZURhdGEubGVuZ3RoID09PSAwIHx8IHNlbGVjdGlvbk5vZGVEYXRhLmxlbmd0aCAhPT0gY2FudmFzLnNlbGVjdGlvbi5zaXplKVxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICBjb25zdCBzZWxlY3RlZE5vZGVUeXBlcyA9IG5ldyBTZXQoc2VsZWN0aW9uTm9kZURhdGEubWFwKG5vZGUgPT4gbm9kZS50eXBlKSlcclxuICAgIGNvbnN0IGF2YWlsYWJsZU5vZGVTdHlsZXMgPSB0aGlzLmFsbE5vZGVTdHlsZXMuZmlsdGVyKHN0eWxlID0+ICFzdHlsZS5ub2RlVHlwZXMgfHwgc3R5bGUubm9kZVR5cGVzLnNvbWUodHlwZSA9PiBzZWxlY3RlZE5vZGVUeXBlcy5oYXModHlwZSkpKVxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRTdHlsZUF0dHJpYnV0ZXNUb1BvcHVwKFxyXG4gICAgICB0aGlzLnBsdWdpbiwgY2FudmFzLCBhdmFpbGFibGVOb2RlU3R5bGVzLFxyXG4gICAgICBzZWxlY3Rpb25Ob2RlRGF0YVswXS5zdHlsZUF0dHJpYnV0ZXMgPz8ge30sXHJcbiAgICAgIChhdHRyaWJ1dGUsIHZhbHVlKSA9PiB0aGlzLnNldFN0eWxlQXR0cmlidXRlRm9yU2VsZWN0aW9uKGNhbnZhcywgYXR0cmlidXRlLCB2YWx1ZSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0U3R5bGVBdHRyaWJ1dGVGb3JTZWxlY3Rpb24oY2FudmFzOiBDYW52YXMsIGF0dHJpYnV0ZTogU3R5bGVBdHRyaWJ1dGUsIHZhbHVlOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XHJcbiAgICBjb25zdCBzZWxlY3Rpb25Ob2RlRGF0YSA9IGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXNcclxuICAgIGZvciAoY29uc3Qgbm9kZURhdGEgb2Ygc2VsZWN0aW9uTm9kZURhdGEpIHtcclxuICAgICAgY29uc3Qgbm9kZSA9IGNhbnZhcy5ub2Rlcy5nZXQobm9kZURhdGEuaWQpXHJcbiAgICAgIGlmICghbm9kZSkgY29udGludWVcclxuXHJcbiAgICAgIC8vIE9ubHkgYXBwbHkgdGhlIGF0dHJpYnV0ZSBpZiB0aGUgbm9kZSB0eXBlIGlzIGFsbG93ZWRcclxuICAgICAgaWYgKGF0dHJpYnV0ZS5ub2RlVHlwZXMgJiYgIWF0dHJpYnV0ZS5ub2RlVHlwZXMuaW5jbHVkZXMobm9kZURhdGEudHlwZSkpIGNvbnRpbnVlXHJcblxyXG4gICAgICBub2RlLnNldERhdGEoe1xyXG4gICAgICAgIC4uLm5vZGVEYXRhLFxyXG4gICAgICAgIHN0eWxlQXR0cmlidXRlczoge1xyXG4gICAgICAgICAgLi4ubm9kZURhdGEuc3R5bGVBdHRyaWJ1dGVzLFxyXG4gICAgICAgICAgW2F0dHJpYnV0ZS5kYXRhc2V0S2V5XTogdmFsdWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNhbnZhcy5wdXNoSGlzdG9yeShjYW52YXMuZ2V0RGF0YSgpKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIFBvc2l0aW9uLCBTaWRlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBFZGdlUGF0aGZpbmRpbmdNZXRob2Qge1xyXG4gIGFic3RyYWN0IGdldFBhdGgocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbiwgY2FudmFzOiBDYW52YXMsIGZyb21Qb3M6IFBvc2l0aW9uLCBmcm9tQkJveFNpZGVQb3M6IFBvc2l0aW9uLCBmcm9tU2lkZTogU2lkZSwgdG9Qb3M6IFBvc2l0aW9uLCB0b0JCb3hTaWRlUG9zOiBQb3NpdGlvbiwgdG9TaWRlOiBTaWRlLCBpc0RyYWdnaW5nOiBib29sZWFuKTogRWRnZVBhdGggfCBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRWRnZVBhdGgge1xyXG4gIHN2Z1BhdGg6IHN0cmluZ1xyXG4gIGNlbnRlcjogUG9zaXRpb25cclxuICByb3RhdGVBcnJvd3M6IGJvb2xlYW5cclxufSIsICJpbXBvcnQgeyBQb3NpdGlvbiB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdmdQYXRoSGVscGVyIHtcclxuICBzdGF0aWMgcGF0aEFycmF5VG9TdmdQYXRoKHBvc2l0aW9uczogUG9zaXRpb25bXSwgcm91bmRlZCA9IGZhbHNlKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHRlbnNpb24gPSAwLjJcclxuICAgIGxldCBuZXdQb3NpdGlvbnMgPSBbLi4ucG9zaXRpb25zXVxyXG5cclxuICAgIGlmIChyb3VuZGVkICYmIHBvc2l0aW9ucy5sZW5ndGggPiAyKSB7XHJcbiAgICAgIG5ld1Bvc2l0aW9ucyA9IFtwb3NpdGlvbnNbMF1dXHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBvc2l0aW9ucy5sZW5ndGggLSAyOyBpKyspIHtcclxuICAgICAgICBjb25zdCBwMSA9IHBvc2l0aW9uc1tpXVxyXG4gICAgICAgIGNvbnN0IHAyID0gcG9zaXRpb25zW2kgKyAxXVxyXG4gICAgICAgIGNvbnN0IHAzID0gcG9zaXRpb25zW2kgKyAyXVxyXG5cclxuICAgICAgICBjb25zdCB0MSA9ICgxIC0gdGVuc2lvbikgLyAyXHJcbiAgICAgICAgY29uc3QgdDIgPSAxIC0gdDFcclxuXHJcbiAgICAgICAgY29uc3QgeCA9XHJcbiAgICAgICAgICB0MiAqIHQyICogdDIgKiBwMS54ICtcclxuICAgICAgICAgIDMgKiB0MiAqIHQyICogdDEgKiBwMi54ICtcclxuICAgICAgICAgIDMgKiB0MiAqIHQxICogdDEgKiBwMy54ICtcclxuICAgICAgICAgIHQxICogdDEgKiB0MSAqIHAyLnhcclxuXHJcbiAgICAgICAgY29uc3QgeSA9XHJcbiAgICAgICAgICB0MiAqIHQyICogdDIgKiBwMS55ICtcclxuICAgICAgICAgIDMgKiB0MiAqIHQyICogdDEgKiBwMi55ICtcclxuICAgICAgICAgIDMgKiB0MiAqIHQxICogdDEgKiBwMy55ICtcclxuICAgICAgICAgIHQxICogdDEgKiB0MSAqIHAyLnlcclxuXHJcbiAgICAgICAgbmV3UG9zaXRpb25zLnB1c2goeyB4OiB4LCB5OiB5IH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGxhc3RQb2ludCA9IHBvc2l0aW9uc1twb3NpdGlvbnMubGVuZ3RoIC0gMV1cclxuICAgICAgbmV3UG9zaXRpb25zLnB1c2gobGFzdFBvaW50KVxyXG4gICAgfVxyXG4gICAgICBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3UG9zaXRpb25zLmxlbmd0aCAtIDI7IGkrKykge1xyXG4gICAgICBjb25zdCBwMSA9IG5ld1Bvc2l0aW9uc1tpXVxyXG4gICAgICBjb25zdCBwMiA9IG5ld1Bvc2l0aW9uc1tpICsgMV1cclxuICAgICAgY29uc3QgcDMgPSBuZXdQb3NpdGlvbnNbaSArIDJdXHJcblxyXG4gICAgICBjb25zdCBjdXJyZW50RGlyZWN0aW9uID0ge1xyXG4gICAgICAgIHg6IHAyLnggLSBwMS54LFxyXG4gICAgICAgIHk6IHAyLnkgLSBwMS55XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG5leHREaXJlY3Rpb24gPSB7XHJcbiAgICAgICAgeDogcDMueCAtIHAyLngsXHJcbiAgICAgICAgeTogcDMueSAtIHAyLnlcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGN1cnJlbnREaXJlY3Rpb24ueCAhPT0gbmV4dERpcmVjdGlvbi54ICYmIGN1cnJlbnREaXJlY3Rpb24ueSAhPT0gbmV4dERpcmVjdGlvbi55KSBjb250aW51ZVxyXG5cclxuICAgICAgbmV3UG9zaXRpb25zLnNwbGljZShpICsgMSwgMSlcclxuICAgICAgaS0tXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ld1Bvc2l0aW9ucy5tYXAoKHBvc2l0aW9uLCBpbmRleCkgPT4gXHJcbiAgICAgIGAke2luZGV4ID09PSAwID8gJ00nIDogJ0wnfSAke3Bvc2l0aW9uLnh9ICR7cG9zaXRpb24ueX1gXHJcbiAgICApLmpvaW4oJyAnKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIFBvc2l0aW9uLCBTaWRlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IEVkZ2VQYXRoZmluZGluZ01ldGhvZCwgeyBFZGdlUGF0aCB9IGZyb20gXCIuL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kXCJcclxuaW1wb3J0IFN2Z1BhdGhIZWxwZXIgZnJvbSBcInNyYy91dGlscy9zdmctcGF0aC1oZWxwZXJcIlxyXG5pbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcInNyYy9tYWluXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkZ2VQYXRoZmluZGluZ0RpcmVjdCBleHRlbmRzIEVkZ2VQYXRoZmluZGluZ01ldGhvZCB7XHJcbiAgZ2V0UGF0aChfcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbiwgX2NhbnZhczogQ2FudmFzLCBmcm9tUG9zOiBQb3NpdGlvbiwgX2Zyb21CQm94U2lkZVBvczogUG9zaXRpb24sIF9mcm9tU2lkZTogU2lkZSwgdG9Qb3M6IFBvc2l0aW9uLCBfdG9CQm94U2lkZVBvczogUG9zaXRpb24sIF90b1NpZGU6IFNpZGUsIF9pc0RyYWdnaW5nOiBib29sZWFuKTogRWRnZVBhdGgge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3ZnUGF0aDogU3ZnUGF0aEhlbHBlci5wYXRoQXJyYXlUb1N2Z1BhdGgoW2Zyb21Qb3MsIHRvUG9zXSwgZmFsc2UpLFxyXG4gICAgICBjZW50ZXI6IHtcclxuICAgICAgICB4OiAoZnJvbVBvcy54ICsgdG9Qb3MueCkgLyAyLFxyXG4gICAgICAgIHk6IChmcm9tUG9zLnkgKyB0b1Bvcy55KSAvIDJcclxuICAgICAgfSxcclxuICAgICAgcm90YXRlQXJyb3dzOiB0cnVlXHJcbiAgICB9XHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgUG9zaXRpb24sIFNpZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgRWRnZVBhdGhmaW5kaW5nTWV0aG9kLCB7IEVkZ2VQYXRoIH0gZnJvbSBcIi4vZWRnZS1wYXRoZmluZGluZy1tZXRob2RcIlxyXG5pbXBvcnQgU3ZnUGF0aEhlbHBlciBmcm9tIFwic3JjL3V0aWxzL3N2Zy1wYXRoLWhlbHBlclwiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5pbXBvcnQgQkJveEhlbHBlciBmcm9tIFwic3JjL3V0aWxzL2Jib3gtaGVscGVyXCJcclxuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWRnZVBhdGhmaW5kaW5nU3F1YXJlIGV4dGVuZHMgRWRnZVBhdGhmaW5kaW5nTWV0aG9kIHtcclxuICBnZXRQYXRoKF9wbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luLCBfY2FudmFzOiBDYW52YXMsIGZyb21Qb3M6IFBvc2l0aW9uLCBmcm9tQkJveFNpZGVQb3M6IFBvc2l0aW9uLCBmcm9tU2lkZTogU2lkZSwgdG9Qb3M6IFBvc2l0aW9uLCB0b0JCb3hTaWRlUG9zOiBQb3NpdGlvbiwgdG9TaWRlOiBTaWRlLCBfaXNEcmFnZ2luZzogYm9vbGVhbik6IEVkZ2VQYXRoIHtcclxuICAgIGxldCBwYXRoQXJyYXk6IFBvc2l0aW9uW10gPSBbXVxyXG4gICAgbGV0IGNlbnRlcjogUG9zaXRpb24gPSB7IHg6IDAsIHk6IDAgfVxyXG5cclxuICAgIGlmIChmcm9tU2lkZSA9PT0gdG9TaWRlKSB7XHJcbiAgICAgIC8vIFNhbWUgc2lkZSAtPiBNYWtlIGEgVVxyXG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSBCQm94SGVscGVyLmRpcmVjdGlvbihmcm9tU2lkZSlcclxuXHJcbiAgICAgIGlmIChCQm94SGVscGVyLmlzSG9yaXpvbnRhbChmcm9tU2lkZSkpIHtcclxuICAgICAgICBwYXRoQXJyYXkgPSBbXHJcbiAgICAgICAgICBmcm9tUG9zLFxyXG4gICAgICAgICAgeyB4OiBNYXRoLm1heChmcm9tQkJveFNpZGVQb3MueCwgdG9CQm94U2lkZVBvcy54KSArIGRpcmVjdGlvbiAqIENhbnZhc0hlbHBlci5HUklEX1NJWkUsIHk6IGZyb21CQm94U2lkZVBvcy55IH0sXHJcbiAgICAgICAgICB7IHg6IE1hdGgubWF4KGZyb21CQm94U2lkZVBvcy54LCB0b0JCb3hTaWRlUG9zLngpICsgZGlyZWN0aW9uICogQ2FudmFzSGVscGVyLkdSSURfU0laRSwgeTogdG9CQm94U2lkZVBvcy55IH0sXHJcbiAgICAgICAgICB0b1Bvc1xyXG4gICAgICAgIF1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwYXRoQXJyYXkgPSBbXHJcbiAgICAgICAgICBmcm9tUG9zLFxyXG4gICAgICAgICAgeyB4OiBmcm9tQkJveFNpZGVQb3MueCwgeTogTWF0aC5tYXgoZnJvbUJCb3hTaWRlUG9zLnksIHRvQkJveFNpZGVQb3MueSkgKyBkaXJlY3Rpb24gKiBDYW52YXNIZWxwZXIuR1JJRF9TSVpFIH0sXHJcbiAgICAgICAgICB7IHg6IHRvQkJveFNpZGVQb3MueCwgeTogTWF0aC5tYXgoZnJvbUJCb3hTaWRlUG9zLnksIHRvQkJveFNpZGVQb3MueSkgKyBkaXJlY3Rpb24gKiBDYW52YXNIZWxwZXIuR1JJRF9TSVpFIH0sXHJcbiAgICAgICAgICB0b1Bvc1xyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG5cclxuICAgICAgY2VudGVyID0geyBcclxuICAgICAgICB4OiAocGF0aEFycmF5WzFdLnggKyBwYXRoQXJyYXlbMl0ueCkgLyAyLFxyXG4gICAgICAgIHk6IChwYXRoQXJyYXlbMV0ueSArIHBhdGhBcnJheVsyXS55KSAvIDJcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChCQm94SGVscGVyLmlzSG9yaXpvbnRhbChmcm9tU2lkZSkgPT09IEJCb3hIZWxwZXIuaXNIb3Jpem9udGFsKHRvU2lkZSkpIHtcclxuICAgICAgLy8gU2FtZSBheGlzLCBkaWZmZXJlbnQgc2lkZSAtPiBNYWtlIGEgWlxyXG4gICAgICBpZiAoQkJveEhlbHBlci5pc0hvcml6b250YWwoZnJvbVNpZGUpKSB7XHJcbiAgICAgICAgcGF0aEFycmF5ID0gW1xyXG4gICAgICAgICAgZnJvbVBvcyxcclxuICAgICAgICAgIHsgeDogZnJvbUJCb3hTaWRlUG9zLnggKyAodG9CQm94U2lkZVBvcy54IC0gZnJvbUJCb3hTaWRlUG9zLngpIC8gMiwgeTogZnJvbUJCb3hTaWRlUG9zLnkgfSxcclxuICAgICAgICAgIHsgeDogZnJvbUJCb3hTaWRlUG9zLnggKyAodG9CQm94U2lkZVBvcy54IC0gZnJvbUJCb3hTaWRlUG9zLngpIC8gMiwgeTogdG9CQm94U2lkZVBvcy55IH0sXHJcbiAgICAgICAgICB0b1Bvc1xyXG4gICAgICAgIF1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwYXRoQXJyYXkgPSBbXHJcbiAgICAgICAgICBmcm9tUG9zLFxyXG4gICAgICAgICAgeyB4OiBmcm9tQkJveFNpZGVQb3MueCwgeTogZnJvbUJCb3hTaWRlUG9zLnkgKyAodG9CQm94U2lkZVBvcy55IC0gZnJvbUJCb3hTaWRlUG9zLnkpIC8gMiB9LFxyXG4gICAgICAgICAgeyB4OiB0b0JCb3hTaWRlUG9zLngsIHk6IGZyb21CQm94U2lkZVBvcy55ICsgKHRvQkJveFNpZGVQb3MueSAtIGZyb21CQm94U2lkZVBvcy55KSAvIDIgfSxcclxuICAgICAgICAgIHRvUG9zXHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjZW50ZXIgPSB7IFxyXG4gICAgICAgIHg6IChmcm9tQkJveFNpZGVQb3MueCArIHRvQkJveFNpZGVQb3MueCkgLyAyLCBcclxuICAgICAgICB5OiAoZnJvbUJCb3hTaWRlUG9zLnkgKyB0b0JCb3hTaWRlUG9zLnkpIC8gMiBcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRGlmZmVyZW50IGF4aXMgLT4gTWFrZSBhIExcclxuICAgICAgaWYgKEJCb3hIZWxwZXIuaXNIb3Jpem9udGFsKGZyb21TaWRlKSkge1xyXG4gICAgICAgIHBhdGhBcnJheSA9IFtcclxuICAgICAgICAgIGZyb21Qb3MsXHJcbiAgICAgICAgICB7IHg6IHRvQkJveFNpZGVQb3MueCwgeTogZnJvbUJCb3hTaWRlUG9zLnkgfSxcclxuICAgICAgICAgIHRvUG9zXHJcbiAgICAgICAgXVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBhdGhBcnJheSA9IFtcclxuICAgICAgICAgIGZyb21Qb3MsXHJcbiAgICAgICAgICB7IHg6IGZyb21CQm94U2lkZVBvcy54LCB5OiB0b0JCb3hTaWRlUG9zLnkgfSxcclxuICAgICAgICAgIHRvUG9zXHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjZW50ZXIgPSB7IFxyXG4gICAgICAgIHg6IHBhdGhBcnJheVsxXS54LFxyXG4gICAgICAgIHk6IHBhdGhBcnJheVsxXS55XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdmdQYXRoOiBTdmdQYXRoSGVscGVyLnBhdGhBcnJheVRvU3ZnUGF0aChwYXRoQXJyYXksIGZhbHNlKSxcclxuICAgICAgY2VudGVyOiBjZW50ZXIsXHJcbiAgICAgIHJvdGF0ZUFycm93czogZmFsc2VcclxuICAgIH1cclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQkJveCwgQ2FudmFzLCBQb3NpdGlvbiwgU2lkZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCBFZGdlUGF0aGZpbmRpbmdNZXRob2QsIHsgRWRnZVBhdGggfSBmcm9tIFwiLi9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZFwiXHJcbmltcG9ydCBTdmdQYXRoSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvc3ZnLXBhdGgtaGVscGVyXCJcclxuaW1wb3J0IEFkdmFuY2VkQ2FudmFzUGx1Z2luIGZyb20gXCJzcmMvbWFpblwiXHJcbmltcG9ydCBCQm94SGVscGVyIGZyb20gXCJzcmMvdXRpbHMvYmJveC1oZWxwZXJcIlxyXG5cclxuY29uc3QgRElSRUNUSU9OUyA9IFtcclxuICB7IGR4OiAxLCBkeTogMCB9LCB7IGR4OiAtMSwgZHk6IDAgfSwgeyBkeDogMCwgZHk6IDEgfSwgeyBkeDogMCwgZHk6IC0xIH0sXHJcbiAgeyBkeDogMSwgZHk6IDEgfSwgeyBkeDogLTEsIGR5OiAxIH0sIHsgZHg6IDEsIGR5OiAtMSB9LCB7IGR4OiAtMSwgZHk6IC0xIH0sXHJcbl0gYXMgY29uc3RcclxuY29uc3QgRElBR09OQUxfQ09TVCA9IE1hdGguc3FydCgyKVxyXG5cclxuY2xhc3MgTm9kZSB7XHJcbiAgeDogbnVtYmVyXHJcbiAgeTogbnVtYmVyXHJcbiAgZ0Nvc3Q6IG51bWJlclxyXG4gIGhDb3N0OiBudW1iZXJcclxuICBmQ29zdDogbnVtYmVyXHJcbiAgcGFyZW50OiBOb2RlfG51bGxcclxuXHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHRoaXMueCA9IHhcclxuICAgIHRoaXMueSA9IHlcclxuXHJcbiAgICB0aGlzLmdDb3N0ID0gMFxyXG4gICAgdGhpcy5oQ29zdCA9IDBcclxuICAgIHRoaXMuZkNvc3QgPSAwXHJcbiAgICB0aGlzLnBhcmVudCA9IG51bGxcclxuICB9XHJcblxyXG4gIC8vIE9ubHkgY2hlY2sgZm9yIHggYW5kIHksIG5vdCBnQ29zdCwgaENvc3QsIGZDb3N0LCBvciBwYXJlbnRcclxuICBpbkxpc3Qobm9kZXM6IE5vZGVbXSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIG5vZGVzLnNvbWUobiA9PiBuLnggPT09IHRoaXMueCAmJiBuLnkgPT09IHRoaXMueSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkZ2VQYXRoZmluZGluZ0FTdGFyIGV4dGVuZHMgRWRnZVBhdGhmaW5kaW5nTWV0aG9kIHtcclxuICBnZXRQYXRoKHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4sIGNhbnZhczogQ2FudmFzLCBmcm9tUG9zOiBQb3NpdGlvbiwgX2Zyb21CQm94U2lkZVBvczogUG9zaXRpb24sIGZyb21TaWRlOiBTaWRlLCB0b1BvczogUG9zaXRpb24sIF90b0JCb3hTaWRlUG9zOiBQb3NpdGlvbiwgdG9TaWRlOiBTaWRlLCBpc0RyYWdnaW5nOiBib29sZWFuKTogRWRnZVBhdGggfCBudWxsIHtcclxuICAgIGlmIChpc0RyYWdnaW5nICYmICFwbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhMaXZlVXBkYXRlJykpIHJldHVybiBudWxsXHJcbiAgICAgICAgXHJcbiAgICBjb25zdCBub2RlQkJveGVzID0gWy4uLmNhbnZhcy5ub2Rlcy52YWx1ZXMoKV1cclxuICAgICAgLmZpbHRlcihub2RlID0+IHtcclxuICAgICAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaXNHcm91cCA9IG5vZGVEYXRhLnR5cGUgPT09ICdncm91cCcgLy8gRXhjbHVkZSBncm91cCBub2Rlc1xyXG4gICAgICAgIGNvbnN0IGlzT3BlblBvcnRhbCA9IG5vZGVEYXRhLnBvcnRhbFRvRmlsZSAhPT0gdW5kZWZpbmVkIC8vIEV4Y2x1ZGUgb3BlbiBwb3J0YWxzXHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuICFpc0dyb3VwICYmICFpc09wZW5Qb3J0YWxcclxuICAgICAgfSkubWFwKG5vZGUgPT4gbm9kZS5nZXRCQm94KCkpXHJcbiAgICBcclxuICAgIGNvbnN0IGZyb21Qb3NXaXRoTWFyZ2luID0gQkJveEhlbHBlci5tb3ZlSW5EaXJlY3Rpb24oZnJvbVBvcywgZnJvbVNpZGUsIDEwKVxyXG4gICAgY29uc3QgdG9Qb3NXaXRoTWFyZ2luID0gQkJveEhlbHBlci5tb3ZlSW5EaXJlY3Rpb24odG9Qb3MsIHRvU2lkZSwgMTApXHJcblxyXG4gICAgY29uc3QgZ3JpZFJlc29sdXRpb24gPSBwbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZWRnZVN0eWxlUGF0aGZpbmRlckdyaWRSZXNvbHV0aW9uJylcclxuICAgIGNvbnN0IHBhdGhBcnJheSA9IHRoaXMuYVN0YXJBbGdvcml0aG0oZnJvbVBvc1dpdGhNYXJnaW4sIGZyb21TaWRlLCB0b1Bvc1dpdGhNYXJnaW4sIHRvU2lkZSwgbm9kZUJCb3hlcywgZ3JpZFJlc29sdXRpb24pXHJcbiAgICBpZiAoIXBhdGhBcnJheSkgcmV0dXJuIG51bGwgLy8gTm8gcGF0aCBmb3VuZCAtIHVzZSBkZWZhdWx0IHBhdGhcclxuXHJcbiAgICAvLyBNYWtlIGNvbm5lY3Rpb24gcG9pbnRzIHRvIHRoZSBub2RlIHJlbW92aW5nIHRoZSBtYXJnaW5cclxuICAgIHBhdGhBcnJheS5zcGxpY2UoMCwgMCwgZnJvbVBvcylcclxuICAgIHBhdGhBcnJheS5zcGxpY2UocGF0aEFycmF5Lmxlbmd0aCwgMCwgdG9Qb3MpXHJcblxyXG4gICAgY29uc3Qgcm91bmRlZFBhdGggPSBwbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhSb3VuZGVkJylcclxuICAgIGNvbnN0IHN2Z1BhdGggPSBTdmdQYXRoSGVscGVyLnBhdGhBcnJheVRvU3ZnUGF0aChwYXRoQXJyYXksIHJvdW5kZWRQYXRoKVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN2Z1BhdGg6IHN2Z1BhdGgsXHJcbiAgICAgIGNlbnRlcjogcGF0aEFycmF5W01hdGguZmxvb3IocGF0aEFycmF5Lmxlbmd0aCAvIDIpXSxcclxuICAgICAgcm90YXRlQXJyb3dzOiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhU3RhckFsZ29yaXRobShmcm9tUG9zOiBQb3NpdGlvbiwgZnJvbVNpZGU6IFNpZGUsIHRvUG9zOiBQb3NpdGlvbiwgdG9TaWRlOiBTaWRlLCBvYnN0YWNsZXM6IEJCb3hbXSwgZ3JpZFJlc29sdXRpb246IG51bWJlcik6IFBvc2l0aW9uW10gfCBudWxsIHtcclxuICAgIGNvbnN0IHN0YXJ0OiBOb2RlID0gbmV3IE5vZGUoXHJcbiAgICAgIE1hdGguZmxvb3IoZnJvbVBvcy54IC8gZ3JpZFJlc29sdXRpb24pICogZ3JpZFJlc29sdXRpb24sXHJcbiAgICAgIE1hdGguZmxvb3IoZnJvbVBvcy55IC8gZ3JpZFJlc29sdXRpb24pICogZ3JpZFJlc29sdXRpb25cclxuICAgIClcclxuICAgIC8vIFJvdW5kIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25zIHRvIHRoZSBuZWFyZXN0IGdyaWQgY2VsbCBvdXRzaWRlIG9mIHRoZSBub2RlcyB0byBjb25uZWN0XHJcbiAgICBpZiAoZnJvbVNpZGUgPT09ICdyaWdodCcgJiYgZnJvbVBvcy54ICE9PSBzdGFydC54KSBzdGFydC54ICs9IGdyaWRSZXNvbHV0aW9uXHJcbiAgICBpZiAoZnJvbVNpZGUgPT09ICdib3R0b20nICYmIGZyb21Qb3MueSAhPT0gc3RhcnQueSkgc3RhcnQueSArPSBncmlkUmVzb2x1dGlvblxyXG4gIFxyXG4gICAgY29uc3QgZW5kOiBOb2RlID0gbmV3IE5vZGUoXHJcbiAgICAgIE1hdGguZmxvb3IodG9Qb3MueCAvIGdyaWRSZXNvbHV0aW9uKSAqIGdyaWRSZXNvbHV0aW9uLFxyXG4gICAgICBNYXRoLmZsb29yKHRvUG9zLnkgLyBncmlkUmVzb2x1dGlvbikgKiBncmlkUmVzb2x1dGlvblxyXG4gICAgKVxyXG4gICAgLy8gUm91bmQgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbnMgdG8gdGhlIG5lYXJlc3QgZ3JpZCBjZWxsIG91dHNpZGUgb2YgdGhlIG5vZGVzIHRvIGNvbm5lY3RcclxuICAgIGlmICh0b1NpZGUgPT09ICdyaWdodCcgJiYgdG9Qb3MueCAhPT0gZW5kLngpIGVuZC54ICs9IGdyaWRSZXNvbHV0aW9uXHJcbiAgICBpZiAodG9TaWRlID09PSAnYm90dG9tJyAmJiB0b1Bvcy55ICE9PSBlbmQueSkgZW5kLnkgKz0gZ3JpZFJlc29sdXRpb25cclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbnMgYXJlIHZhbGlkXHJcbiAgICBpZiAodGhpcy5pc0luc2lkZU9ic3RhY2xlKHN0YXJ0LCBvYnN0YWNsZXMpIHx8IHRoaXMuaXNJbnNpZGVPYnN0YWNsZShlbmQsIG9ic3RhY2xlcykpIHJldHVybiBudWxsXHJcbiAgXHJcbiAgICBjb25zdCBvcGVuU2V0OiBOb2RlW10gPSBbc3RhcnRdXHJcbiAgICBjb25zdCBjbG9zZWRTZXQ6IE5vZGVbXSA9IFtdXHJcbiAgXHJcbiAgICB3aGlsZSAob3BlblNldC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIEZpbmQgdGhlIG5vZGUgd2l0aCB0aGUgbG93ZXN0IGZDb3N0IGluIHRoZSBvcGVuIHNldFxyXG4gICAgICBsZXQgY3VycmVudDogTm9kZXxudWxsID0gbnVsbFxyXG4gICAgICBsZXQgbG93ZXN0RkNvc3QgPSBJbmZpbml0eVxyXG4gIFxyXG4gICAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygb3BlblNldCkge1xyXG4gICAgICAgIGlmIChub2RlLmZDb3N0IDwgbG93ZXN0RkNvc3QpIHtcclxuICAgICAgICAgIGN1cnJlbnQgPSBub2RlXHJcbiAgICAgICAgICBsb3dlc3RGQ29zdCA9IG5vZGUuZkNvc3RcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgLy8gTm8gcGF0aCBmb3VuZFxyXG4gICAgICBpZiAoIWN1cnJlbnQpIHJldHVybiBudWxsXHJcbiAgXHJcbiAgICAgIC8vIFJlbW92ZSB0aGUgY3VycmVudCBub2RlIGZyb20gdGhlIG9wZW4gc2V0IGFuZCBhZGQgaXQgdG8gdGhlIGNsb3NlZCBzZXRcclxuICAgICAgb3BlblNldC5zcGxpY2Uob3BlblNldC5pbmRleE9mKGN1cnJlbnQpLCAxKVxyXG4gICAgICBjbG9zZWRTZXQucHVzaChjdXJyZW50KVxyXG4gIFxyXG4gICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHJlYWNoZWQgdGhlIGVuZFxyXG4gICAgICBpZiAoY3VycmVudC54ID09PSBlbmQueCAmJiBjdXJyZW50LnkgPT09IGVuZC55KSB7XHJcbiAgICAgICAgcmV0dXJuIFtmcm9tUG9zLCAuLi50aGlzLnJlY29uc3RydWN0UGF0aChjdXJyZW50KSwgdG9Qb3NdLm1hcChub2RlID0+ICh7IHg6IG5vZGUueCwgeTogbm9kZS55IH0pKVxyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vIExvY2F0aW9uIGlzIG5vdCBzdGFydCBvciBlbmQsIGFsbCB0b3VjaGluZyBwb3NpdGlvbnMgYXJlIGludmFsaWRcclxuICAgICAgaWYgKCEoY3VycmVudC54ID09PSBzdGFydC54ICYmIGN1cnJlbnQueSA9PT0gc3RhcnQueSkgJiYgdGhpcy5pc1RvdWNoaW5nT2JzdGFjbGUoY3VycmVudCwgb2JzdGFjbGVzKSkgY29udGludWVcclxuICBcclxuICAgICAgLy8gRXhwYW5kIG5laWdoYm9yc1xyXG4gICAgICBmb3IgKGNvbnN0IG5laWdoYm9yIG9mIHRoaXMuZ2V0UG9zc2libGVOZWlnaGJvcnMoY3VycmVudCwgb2JzdGFjbGVzLCBncmlkUmVzb2x1dGlvbikpIHtcclxuICAgICAgICBpZiAobmVpZ2hib3IuaW5MaXN0KGNsb3NlZFNldCkpIGNvbnRpbnVlXHJcbiAgXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRlbnRhdGl2ZSBnQ29zdFxyXG4gICAgICAgIGNvbnN0IHRlbnRhdGl2ZUdDb3N0ID0gY3VycmVudC5nQ29zdCArIHRoaXMuZ2V0TW92ZW1lbnRDb3N0KHtcclxuICAgICAgICAgIGR4OiBuZWlnaGJvci54IC0gY3VycmVudC54LFxyXG4gICAgICAgICAgZHk6IG5laWdoYm9yLnkgLSBjdXJyZW50LnksXHJcbiAgICAgICAgfSlcclxuICBcclxuICAgICAgICAvLyBDaGVjayBpZiBuZWlnaGJvciBpcyBub3QgYWxyZWFkeSBpbiB0aGUgb3BlbiBzZXQgb3IgaWYgdGhlIG5ldyBnQ29zdCBpcyBsb3dlclxyXG4gICAgICAgIGlmICghbmVpZ2hib3IuaW5MaXN0KG9wZW5TZXQpIHx8IHRlbnRhdGl2ZUdDb3N0IDwgbmVpZ2hib3IuZ0Nvc3QpIHtcclxuICAgICAgICAgIG5laWdoYm9yLnBhcmVudCA9IGN1cnJlbnRcclxuICAgICAgICAgIG5laWdoYm9yLmdDb3N0ID0gdGVudGF0aXZlR0Nvc3RcclxuICAgICAgICAgIG5laWdoYm9yLmhDb3N0ID0gdGhpcy5oZXVyaXN0aWMobmVpZ2hib3IsIGVuZClcclxuICAgICAgICAgIG5laWdoYm9yLmZDb3N0ID0gbmVpZ2hib3IuZ0Nvc3QgKyBuZWlnaGJvci5oQ29zdFxyXG4gIFxyXG4gICAgICAgICAgLy8gQWRkIG5laWdoYm9yIHRvIHRoZSBvcGVuIHNldFxyXG4gICAgICAgICAgb3BlblNldC5wdXNoKG5laWdoYm9yKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gTm8gcGF0aCBmb3VuZFxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcbiAgXHJcbiAgLy8gTWFuaGF0dGFuIGRpc3RhbmNlXHJcbiAgcHJpdmF0ZSBoZXVyaXN0aWMobm9kZTogTm9kZSwgZW5kOiBOb2RlKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLmFicyhub2RlLnggLSBlbmQueCkgKyBNYXRoLmFicyhub2RlLnkgLSBlbmQueSlcclxuICB9XHJcbiAgXHJcbiAgLy8gRGVmaW5lIGEgZnVuY3Rpb24gdG8gY2hlY2sgaWYgYSBwb3NpdGlvbiBpc24ndCBpbnNpZGUgYW55IG9ic3RhY2xlXHJcbiAgcHJpdmF0ZSBpc1RvdWNoaW5nT2JzdGFjbGUobm9kZTogUG9zaXRpb24sIG9ic3RhY2xlczogQkJveFtdKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gb2JzdGFjbGVzLnNvbWUob2JzdGFjbGUgPT4gQkJveEhlbHBlci5pbnNpZGVCQm94KG5vZGUsIG9ic3RhY2xlLCB0cnVlKSlcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBpc0luc2lkZU9ic3RhY2xlKG5vZGU6IFBvc2l0aW9uLCBvYnN0YWNsZXM6IEJCb3hbXSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIG9ic3RhY2xlcy5zb21lKG9ic3RhY2xlID0+IEJCb3hIZWxwZXIuaW5zaWRlQkJveChub2RlLCBvYnN0YWNsZSwgZmFsc2UpKVxyXG4gIH1cclxuICBcclxuICAvLyBEZWZpbmUgYSBmdW5jdGlvbiB0byBjYWxjdWxhdGUgbW92ZW1lbnQgY29zdCBiYXNlZCBvbiBkaXJlY3Rpb25cclxuICBwcml2YXRlIGdldE1vdmVtZW50Q29zdChkaXJlY3Rpb246IHsgZHg6IG51bWJlcjsgZHk6IG51bWJlciB9KTogbnVtYmVyIHtcclxuICAgIHJldHVybiBkaXJlY3Rpb24uZHggIT09IDAgJiYgZGlyZWN0aW9uLmR5ICE9PSAwID8gRElBR09OQUxfQ09TVCA6IDFcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBnZXRQb3NzaWJsZU5laWdoYm9ycyhub2RlOiBOb2RlLCBvYnN0YWNsZXM6IEJCb3hbXSwgZ3JpZFJlc29sdXRpb246IG51bWJlcik6IE5vZGVbXSB7XHJcbiAgICBjb25zdCBuZWlnaGJvcnM6IE5vZGVbXSA9IFtdXHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgZGlyZWN0aW9uIG9mIERJUkVDVElPTlMpIHtcclxuICAgICAgY29uc3QgbmVpZ2hib3IgPSBuZXcgTm9kZShcclxuICAgICAgICBub2RlLnggKyBkaXJlY3Rpb24uZHggKiBncmlkUmVzb2x1dGlvbiwgXHJcbiAgICAgICAgbm9kZS55ICsgZGlyZWN0aW9uLmR5ICogZ3JpZFJlc29sdXRpb25cclxuICAgICAgKVxyXG4gICAgICBuZWlnaGJvci5nQ29zdCA9IG5vZGUuZ0Nvc3QgKyB0aGlzLmdldE1vdmVtZW50Q29zdChkaXJlY3Rpb24pXHJcbiAgXHJcbiAgICAgIGlmICh0aGlzLmlzSW5zaWRlT2JzdGFjbGUobmVpZ2hib3IsIG9ic3RhY2xlcykpIGNvbnRpbnVlXHJcbiAgXHJcbiAgICAgIG5laWdoYm9ycy5wdXNoKG5laWdoYm9yKVxyXG4gICAgfVxyXG4gIFxyXG4gICAgcmV0dXJuIG5laWdoYm9yc1xyXG4gIH1cclxuICBcclxuICBwcml2YXRlIHJlY29uc3RydWN0UGF0aChub2RlOiBOb2RlKTogTm9kZVtdIHtcclxuICAgIGNvbnN0IHBhdGg6IE5vZGVbXSA9IFtdXHJcbiAgICB3aGlsZSAobm9kZSkge1xyXG4gICAgICBwYXRoLnB1c2gobm9kZSlcclxuICAgICAgbm9kZSA9IG5vZGUucGFyZW50IVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhdGgucmV2ZXJzZSgpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgQ2FudmFzRWRnZSwgQ2FudmFzTm9kZSwgUG9zaXRpb24sIFNpZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBCQm94SGVscGVyIGZyb20gXCJzcmMvdXRpbHMvYmJveC1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi8uLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5pbXBvcnQgeyBCVUlMVElOX0VER0VfU1RZTEVfQVRUUklCVVRFUywgU3R5bGVBdHRyaWJ1dGUgfSBmcm9tIFwiLi9zdHlsZS1jb25maWdcIlxyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyIGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5pbXBvcnQgRWRnZVBhdGhmaW5kaW5nTWV0aG9kIGZyb20gXCIuL2VkZ2UtcGF0aGZpbmRpbmctbWV0aG9kcy9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZFwiXHJcbmltcG9ydCBFZGdlUGF0aGZpbmRpbmdEaXJlY3QgZnJvbSBcIi4vZWRnZS1wYXRoZmluZGluZy1tZXRob2RzL3BhdGhmaW5kaW5nLWRpcmVjdFwiXHJcbmltcG9ydCBFZGdlUGF0aGZpbmRpbmdTcXVhcmUgZnJvbSBcIi4vZWRnZS1wYXRoZmluZGluZy1tZXRob2RzL3BhdGhmaW5kaW5nLXNxdWFyZVwiXHJcbmltcG9ydCBFZGdlUGF0aGZpbmRpbmdBU3RhciBmcm9tIFwiLi9lZGdlLXBhdGhmaW5kaW5nLW1ldGhvZHMvcGF0aGZpbmRpbmctYS1zdGFyXCJcclxuXHJcbmNvbnN0IEVER0VfUEFUSEZJTkRJTkdfTUVUSE9EUzogeyBba2V5OiBzdHJpbmddOiBuZXcoKSA9PiBFZGdlUGF0aGZpbmRpbmdNZXRob2QgfSA9IHtcclxuICAnZGlyZWN0JzogRWRnZVBhdGhmaW5kaW5nRGlyZWN0LFxyXG4gICdzcXVhcmUnOiBFZGdlUGF0aGZpbmRpbmdTcXVhcmUsXHJcbiAgJ2Etc3Rhcic6IEVkZ2VQYXRoZmluZGluZ0FTdGFyXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkZ2VTdHlsZXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGFsbEVkZ2VTdHlsZUF0dHJpYnV0ZXM6IFN0eWxlQXR0cmlidXRlW11cclxuXHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ2VkZ2VzU3R5bGluZ0ZlYXR1cmVFbmFibGVkJyBhcyBjb25zdCB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLmFsbEVkZ2VTdHlsZUF0dHJpYnV0ZXMgPSBbLi4uQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMsIC4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2N1c3RvbUVkZ2VTdHlsZUF0dHJpYnV0ZXMnKV1cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgU2V0dGluZ3NNYW5hZ2VyLlNFVFRJTkdTX0NIQU5HRURfRVZFTlQsXHJcbiAgICAgICgpID0+IHRoaXMuYWxsRWRnZVN0eWxlQXR0cmlidXRlcyA9IFsuLi5CVUlMVElOX0VER0VfU1RZTEVfQVRUUklCVVRFUywgLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnY3VzdG9tRWRnZVN0eWxlQXR0cmlidXRlcycpXVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlBvcHVwTWVudUNyZWF0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5vblBvcHVwTWVudUNyZWF0ZWQoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGVkZ2U6IENhbnZhc0VkZ2UpID0+IHRoaXMub25FZGdlQ2hhbmdlZChjYW52YXMsIGVkZ2UpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRWRnZUNlbnRlclJlcXVlc3RlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlLCBjZW50ZXI6IFBvc2l0aW9uKSA9PiB0aGlzLm9uRWRnZUNlbnRlclJlcXVlc3RlZChjYW52YXMsIGVkZ2UsIGNlbnRlcilcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlQWRkZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgX25vZGU6IENhbnZhc05vZGUpID0+IHRoaXMudXBkYXRlQWxsRWRnZXMoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVNb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBfbm9kZTogQ2FudmFzTm9kZSkgPT4gdGhpcy51cGRhdGVBbGxFZGdlcyhjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZVJlbW92ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgX25vZGU6IENhbnZhc05vZGUpID0+IHRoaXMudXBkYXRlQWxsRWRnZXMoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkRyYWdnaW5nU3RhdGVDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGlzRHJhZ2dpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICBpZiAoaXNEcmFnZ2luZykgcmV0dXJuXHJcbiAgICAgICAgdGhpcy51cGRhdGVBbGxFZGdlcyhjYW52YXMpXHJcbiAgICAgIH1cclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXM6IENhbnZhcyk6IHZvaWQge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRFZGdlcyA9IFsuLi5jYW52YXMuc2VsZWN0aW9uXS5maWx0ZXIoKGl0ZW06IGFueSkgPT4gaXRlbS5wYXRoICE9PSB1bmRlZmluZWQpIGFzIENhbnZhc0VkZ2VbXVxyXG4gICAgaWYgKGNhbnZhcy5yZWFkb25seSB8fCBzZWxlY3RlZEVkZ2VzLmxlbmd0aCA9PT0gMCB8fCBzZWxlY3RlZEVkZ2VzLmxlbmd0aCAhPT0gY2FudmFzLnNlbGVjdGlvbi5zaXplKVxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICBDYW52YXNIZWxwZXIuYWRkU3R5bGVBdHRyaWJ1dGVzVG9Qb3B1cChcclxuICAgICAgdGhpcy5wbHVnaW4sIGNhbnZhcywgdGhpcy5hbGxFZGdlU3R5bGVBdHRyaWJ1dGVzLFxyXG4gICAgICBzZWxlY3RlZEVkZ2VzWzBdLmdldERhdGEoKS5zdHlsZUF0dHJpYnV0ZXMgPz8ge30sXHJcbiAgICAgIChhdHRyaWJ1dGUsIHZhbHVlKSA9PiB0aGlzLnNldFN0eWxlQXR0cmlidXRlRm9yU2VsZWN0aW9uKGNhbnZhcywgYXR0cmlidXRlLCB2YWx1ZSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0U3R5bGVBdHRyaWJ1dGVGb3JTZWxlY3Rpb24oY2FudmFzOiBDYW52YXMsIGF0dHJpYnV0ZTogU3R5bGVBdHRyaWJ1dGUsIHZhbHVlOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XHJcbiAgICBjb25zdCBzZWxlY3RlZEVkZ2VzID0gWy4uLmNhbnZhcy5zZWxlY3Rpb25dLmZpbHRlcigoaXRlbTogYW55KSA9PiBpdGVtLnBhdGggIT09IHVuZGVmaW5lZCkgYXMgQ2FudmFzRWRnZVtdXHJcblxyXG4gICAgZm9yIChjb25zdCBlZGdlIG9mIHNlbGVjdGVkRWRnZXMpIHtcclxuICAgICAgY29uc3QgZWRnZURhdGEgPSBlZGdlLmdldERhdGEoKVxyXG5cclxuICAgICAgZWRnZS5zZXREYXRhKHtcclxuICAgICAgICAuLi5lZGdlRGF0YSxcclxuICAgICAgICBzdHlsZUF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgIC4uLmVkZ2VEYXRhLnN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgICAgIFthdHRyaWJ1dGUuZGF0YXNldEtleV06IHZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjYW52YXMucHVzaEhpc3RvcnkoY2FudmFzLmdldERhdGEoKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlQWxsRWRnZXMoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGZvciAoY29uc3QgZWRnZSBvZiBjYW52YXMuZWRnZXMudmFsdWVzKCkpIHtcclxuICAgICAgdGhpcy5vbkVkZ2VDaGFuZ2VkKGNhbnZhcywgZWRnZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25FZGdlQ2hhbmdlZChjYW52YXM6IENhbnZhcywgZWRnZTogQ2FudmFzRWRnZSkge1xyXG4gICAgY29uc3QgZWRnZURhdGEgPSBlZGdlLmdldERhdGEoKVxyXG4gICAgXHJcbiAgICAvLyBSZXNldCBwYXRoIHRvIGRlZmF1bHRcclxuICAgIGlmICghZWRnZS5iZXppZXIpIHJldHVyblxyXG4gICAgZWRnZS5jZW50ZXIgPSB1bmRlZmluZWRcclxuICAgIGVkZ2UudXBkYXRlUGF0aCgpXHJcblxyXG4gICAgLy8gU2V0IHBhdGhmaW5kaW5nIG1ldGhvZFxyXG4gICAgY29uc3QgcGF0aGZpbmRpbmdNZXRob2QgPSBlZGdlRGF0YS5zdHlsZUF0dHJpYnV0ZXM/LnBhdGhmaW5kaW5nTWV0aG9kXHJcbiAgICBpZiAocGF0aGZpbmRpbmdNZXRob2QpIHtcclxuICAgICAgY29uc3QgZnJvbUJCb3hTaWRlUG9zID0gQkJveEhlbHBlci5nZXRDZW50ZXJPZkJCb3hTaWRlKGVkZ2UuZnJvbS5ub2RlLmdldEJCb3goKSwgZWRnZS5mcm9tLnNpZGUpXHJcbiAgICAgIGNvbnN0IGZyb21Qb3MgPSBlZGdlLmZyb20uZW5kID09PSAnbm9uZScgPyBcclxuICAgICAgICBmcm9tQkJveFNpZGVQb3MgOlxyXG4gICAgICAgIGVkZ2UuYmV6aWVyLmZyb21cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHRvQkJveFNpZGVQb3MgPSBCQm94SGVscGVyLmdldENlbnRlck9mQkJveFNpZGUoZWRnZS50by5ub2RlLmdldEJCb3goKSwgZWRnZS50by5zaWRlKVxyXG4gICAgICBjb25zdCB0b1BvcyA9IGVkZ2UudG8uZW5kID09PSAnbm9uZScgPyBcclxuICAgICAgICB0b0JCb3hTaWRlUG9zIDpcclxuICAgICAgICBlZGdlLmJlemllci50b1xyXG5cclxuICAgICAgY29uc3QgcGF0aCA9IG5ldyBFREdFX1BBVEhGSU5ESU5HX01FVEhPRFNbcGF0aGZpbmRpbmdNZXRob2RdKCkuZ2V0UGF0aCh0aGlzLnBsdWdpbiwgY2FudmFzLCBmcm9tUG9zLCBmcm9tQkJveFNpZGVQb3MsIGVkZ2UuZnJvbS5zaWRlLCB0b1BvcywgdG9CQm94U2lkZVBvcywgZWRnZS50by5zaWRlLCBjYW52YXMuaXNEcmFnZ2luZylcclxuICAgICAgaWYgKCFwYXRoKSByZXR1cm5cclxuXHJcbiAgICAgIGVkZ2UuY2VudGVyID0gcGF0aC5jZW50ZXJcclxuICAgICAgZWRnZS5wYXRoLmludGVyYWN0aW9uLnNldEF0dHIoXCJkXCIsIHBhdGg/LnN2Z1BhdGgpXHJcbiAgICAgIGVkZ2UucGF0aC5kaXNwbGF5LnNldEF0dHIoXCJkXCIsIHBhdGg/LnN2Z1BhdGgpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIGxhYmVsIHBvc2l0aW9uXHJcbiAgICBlZGdlLmxhYmVsRWxlbWVudD8ucmVuZGVyKClcclxuXHJcbiAgICAvLyBTZXQgYXJyb3cgcG9seWdvblxyXG4gICAgY29uc3QgYXJyb3dQb2x5Z29uUG9pbnRzID0gdGhpcy5nZXRBcnJvd1BvbHlnb25Qb2ludHMoZWRnZURhdGEuc3R5bGVBdHRyaWJ1dGVzPy5hcnJvdylcclxuICAgIGlmIChlZGdlLmZyb21MaW5lRW5kPy5lbCkgZWRnZS5mcm9tTGluZUVuZC5lbC5xdWVyeVNlbGVjdG9yKCdwb2x5Z29uJyk/LnNldEF0dHJpYnV0ZSgncG9pbnRzJywgYXJyb3dQb2x5Z29uUG9pbnRzKVxyXG4gICAgaWYgKGVkZ2UudG9MaW5lRW5kPy5lbCkgZWRnZS50b0xpbmVFbmQuZWwucXVlcnlTZWxlY3RvcigncG9seWdvbicpPy5zZXRBdHRyaWJ1dGUoJ3BvaW50cycsIGFycm93UG9seWdvblBvaW50cylcclxuXHJcbiAgICAvLyBSb3RhdGUgYXJyb3dzIGFjY29yZGluZ2x5XHJcbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZWRnZVN0eWxlRGlyZWN0Um90YXRlQXJyb3cnKSkge1xyXG4gICAgICB0aGlzLnJvdGF0ZUFycm93cyhlZGdlLCBwYXRoZmluZGluZ01ldGhvZClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25FZGdlQ2VudGVyUmVxdWVzdGVkKF9jYW52YXM6IENhbnZhcywgZWRnZTogQ2FudmFzRWRnZSwgY2VudGVyOiBQb3NpdGlvbikge1xyXG4gICAgY2VudGVyLnggPSBlZGdlLmNlbnRlcj8ueCA/PyBjZW50ZXIueFxyXG4gICAgY2VudGVyLnkgPSBlZGdlLmNlbnRlcj8ueSA/PyBjZW50ZXIueVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRBcnJvd1BvbHlnb25Qb2ludHMoYXJyb3dTdHlsZT86IHN0cmluZyB8IG51bGwpOiBzdHJpbmcge1xyXG4gICAgaWYgKGFycm93U3R5bGUgPT09ICdoYWx2ZWQtdHJpYW5nbGUnKVxyXG4gICAgICByZXR1cm4gYC0yLDAgNy41LDEyIC0yLDEyYFxyXG4gICAgZWxzZSBpZiAoYXJyb3dTdHlsZSA9PT0gJ3RoaW4tdHJpYW5nbGUnKVxyXG4gICAgICByZXR1cm4gYDAsMCA3LDEwIDAsMCAwLDEwIDAsMCAtNywxMGBcclxuICAgIGVsc2UgaWYgKGFycm93U3R5bGUgPT09ICdkaWFtb25kJyB8fCBhcnJvd1N0eWxlID09PSAnZGlhbW9uZC1vdXRsaW5lJylcclxuICAgICAgcmV0dXJuIGAwLDAgNSwxMCAwLDIwIC01LDEwYFxyXG4gICAgZWxzZSBpZiAoYXJyb3dTdHlsZSA9PT0gJ2NpcmNsZScgfHwgYXJyb3dTdHlsZSA9PT0gJ2NpcmNsZS1vdXRsaW5lJylcclxuICAgICAgcmV0dXJuIGAwIDAsIDQuOTUgMS44LCA3LjUgNi40NSwgNi42IDExLjcsIDIuNyAxNSwgLTIuNyAxNSwgLTYuNiAxMS43LCAtNy41IDYuNDUsIC00Ljk1IDEuOGBcclxuICAgIGVsc2UgLy8gRGVmYXVsdCB0cmlhbmdsZVxyXG4gICAgICByZXR1cm4gYDAsMCA2LjUsMTAuNCAtNi41LDEwLjRgXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJvdGF0ZUFycm93cyhlZGdlOiBDYW52YXNFZGdlLCBwYXRoUm91dGVUeXBlPzogc3RyaW5nIHwgbnVsbCkge1xyXG4gICAgLy8gUmVzZXQgYXJyb3cgcm90YXRpb25cclxuICAgIGlmIChwYXRoUm91dGVUeXBlICE9PSAnZGlyZWN0Jykge1xyXG4gICAgICBpZiAoZWRnZS5mcm9tTGluZUVuZD8uZWwpIGVkZ2UuZnJvbUxpbmVFbmQuZWwuc3R5bGUudHJhbnNsYXRlID0gXCJcIlxyXG4gICAgICBpZiAoZWRnZS50b0xpbmVFbmQ/LmVsKSBlZGdlLnRvTGluZUVuZC5lbC5zdHlsZS50cmFuc2xhdGUgPSBcIlwiXHJcblxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3Qgc2V0QXJyb3dSb3RhdGlvbiA9IChlbGVtZW50OiBIVE1MRWxlbWVudCwgc2lkZTogU2lkZSwgcm90YXRpb246IG51bWJlcikgPT4ge1xyXG4gICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtXHJcbiAgICAgICAgLnJlcGxhY2UoL3JvdGF0ZVxcKFstXFxkXSsoZGVnfHJhZClcXCkvZywgYHJvdGF0ZSgke3JvdGF0aW9ufXJhZClgKVxyXG5cclxuICAgICAgY29uc3Qgb2Zmc2V0ID0gQkJveEhlbHBlci5nZXRTaWRlVmVjdG9yKHNpZGUpXHJcbiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNsYXRlID0gYCR7b2Zmc2V0LnggKiA3fXB4ICR7b2Zmc2V0LnkgKiAtN31weGBcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlZGdlUm90YXRpb24gPSBNYXRoLmF0YW4yKGVkZ2UuYmV6aWVyLnRvLnkgLSBlZGdlLmJlemllci5mcm9tLnksIGVkZ2UuYmV6aWVyLnRvLnggLSBlZGdlLmJlemllci5mcm9tLngpIC0gKE1hdGguUEkgLyAyKVxyXG5cclxuICAgIGlmIChlZGdlLmZyb21MaW5lRW5kPy5lbCkgc2V0QXJyb3dSb3RhdGlvbihlZGdlLmZyb21MaW5lRW5kLmVsLCBlZGdlLmZyb20uc2lkZSwgZWRnZVJvdGF0aW9uKVxyXG4gICAgaWYgKGVkZ2UudG9MaW5lRW5kPy5lbCkgc2V0QXJyb3dSb3RhdGlvbihlZGdlLnRvTGluZUVuZC5lbCwgZWRnZS50by5zaWRlLCBlZGdlUm90YXRpb24gLSBNYXRoLlBJKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIENhbnZhc05vZGUsIENhbnZhc05vZGVEYXRhIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IFNldHRpbmdzTWFuYWdlciBmcm9tIFwic3JjL3NldHRpbmdzXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHBvc2VkTm9kZURhdGEoc2V0dGluZ3M6IFNldHRpbmdzTWFuYWdlcik6IChrZXlvZiBDYW52YXNOb2RlRGF0YSlbXSB7XHJcbiAgY29uc3QgZXhwb3NlZERhdGE6IChrZXlvZiBDYW52YXNOb2RlRGF0YSlbXSA9IFtdXHJcblxyXG4gIGlmIChzZXR0aW5ncy5nZXRTZXR0aW5nKCdub2RlU3R5bGluZ0ZlYXR1cmVFbmFibGVkJykpIGV4cG9zZWREYXRhLnB1c2goJ3N0eWxlQXR0cmlidXRlcycpXHJcbiAgaWYgKHNldHRpbmdzLmdldFNldHRpbmcoJ2NvbGxhcHNpYmxlR3JvdXBzRmVhdHVyZUVuYWJsZWQnKSkgZXhwb3NlZERhdGEucHVzaCgnaXNDb2xsYXBzZWQnKVxyXG4gIGlmIChzZXR0aW5ncy5nZXRTZXR0aW5nKCdwcmVzZW50YXRpb25GZWF0dXJlRW5hYmxlZCcpKSBleHBvc2VkRGF0YS5wdXNoKCdpc1N0YXJ0Tm9kZScpXHJcbiAgaWYgKHNldHRpbmdzLmdldFNldHRpbmcoJ3BvcnRhbHNGZWF0dXJlRW5hYmxlZCcpKSBleHBvc2VkRGF0YS5wdXNoKCdwb3J0YWxUb0ZpbGUnLCAncG9ydGFsSWQnKVxyXG5cclxuICByZXR1cm4gZXhwb3NlZERhdGFcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm9kZUV4cG9zZXJFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuIHRydWUgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlQ2hhbmdlZCxcclxuICAgICAgKF9jYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZT8uZ2V0RGF0YSgpXHJcbiAgICAgICAgaWYgKCFub2RlRGF0YSkgcmV0dXJuXHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZXhwb3NlZERhdGFLZXkgb2YgZ2V0RXhwb3NlZE5vZGVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKSkge1xyXG4gICAgICAgICAgY29uc3QgZGF0YXNldFBhaXJzID0gbm9kZURhdGFbZXhwb3NlZERhdGFLZXldIGluc3RhbmNlb2YgT2JqZWN0XHJcbiAgICAgICAgICAgID8gT2JqZWN0LmVudHJpZXMobm9kZURhdGFbZXhwb3NlZERhdGFLZXldKVxyXG4gICAgICAgICAgICA6IFtbZXhwb3NlZERhdGFLZXksIG5vZGVEYXRhW2V4cG9zZWREYXRhS2V5XV1dXHJcblxyXG4gICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgZGF0YXNldFBhaXJzKSB7XHJcbiAgICAgICAgICAgIGlmICghdmFsdWUpIGRlbGV0ZSBub2RlLm5vZGVFbC5kYXRhc2V0W2tleV1cclxuICAgICAgICAgICAgZWxzZSBub2RlLm5vZGVFbC5kYXRhc2V0W2tleV0gPSB2YWx1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzLCBDYW52YXNOb2RlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgZ2V0RXhwb3NlZE5vZGVEYXRhIH0gZnJvbSBcIi4vbm9kZS1leHBvc2VyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuXHJcbmV4cG9ydCBjb25zdCBUQVJHRVRfTk9ERV9EQVRBU0VUX1BSRUZJWCA9IFwidGFyZ2V0XCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGVJbnRlcmFjdGlvbkV4cG9zZXJFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuIHRydWUgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlSW50ZXJhY3Rpb24sXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZT8uZ2V0RGF0YSgpXHJcbiAgICAgICAgaWYgKCFub2RlRGF0YSkgcmV0dXJuXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25FbCA9IGNhbnZhcy5ub2RlSW50ZXJhY3Rpb25MYXllci5pbnRlcmFjdGlvbkVsXHJcbiAgICAgICAgaWYgKCFpbnRlcmFjdGlvbkVsKSByZXR1cm5cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBleHBvc2VkRGF0YUtleSBvZiBnZXRFeHBvc2VkTm9kZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICBjb25zdCBkYXRhc2V0UGFpcnMgPSBub2RlRGF0YVtleHBvc2VkRGF0YUtleV0gaW5zdGFuY2VvZiBPYmplY3RcclxuICAgICAgICAgICAgPyBPYmplY3QuZW50cmllcyhub2RlRGF0YVtleHBvc2VkRGF0YUtleV0pXHJcbiAgICAgICAgICAgIDogW1tleHBvc2VkRGF0YUtleSwgbm9kZURhdGFbZXhwb3NlZERhdGFLZXldXV1cclxuXHJcbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBkYXRhc2V0UGFpcnMpIHtcclxuICAgICAgICAgICAgY29uc3QgbW9kaWZpZWRLZXkgPSBUQVJHRVRfTk9ERV9EQVRBU0VUX1BSRUZJWCArIGtleS50b1N0cmluZygpLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnRvU3RyaW5nKCkuc2xpY2UoMSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghdmFsdWUpIGRlbGV0ZSBpbnRlcmFjdGlvbkVsLmRhdGFzZXRbbW9kaWZpZWRLZXldXHJcbiAgICAgICAgICAgIGVsc2UgaW50ZXJhY3Rpb25FbC5kYXRhc2V0W21vZGlmaWVkS2V5XSA9IHZhbHVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIENhbnZhc0VkZ2UsIENhbnZhc0VkZ2VEYXRhIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IFNldHRpbmdzTWFuYWdlciBmcm9tIFwic3JjL3NldHRpbmdzXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHBvc2VkRWRnZURhdGEoc2V0dGluZ3M6IFNldHRpbmdzTWFuYWdlcik6IChrZXlvZiBDYW52YXNFZGdlRGF0YSlbXSB7XHJcbiAgY29uc3QgZXhwb3NlZERhdGE6IChrZXlvZiBDYW52YXNFZGdlRGF0YSlbXSA9IFtdXHJcblxyXG4gIGlmIChzZXR0aW5ncy5nZXRTZXR0aW5nKCdlZGdlc1N0eWxpbmdGZWF0dXJlRW5hYmxlZCcpKSBleHBvc2VkRGF0YS5wdXNoKCdzdHlsZUF0dHJpYnV0ZXMnKVxyXG5cclxuICByZXR1cm4gZXhwb3NlZERhdGFcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWRnZUV4cG9zZXJFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuIHRydWUgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5FZGdlQ2hhbmdlZCxcclxuICAgICAgKF9jYW52YXM6IENhbnZhcywgZWRnZTogQ2FudmFzRWRnZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVkZ2VEYXRhID0gZWRnZT8uZ2V0RGF0YSgpXHJcbiAgICAgICAgaWYgKCFlZGdlRGF0YSkgcmV0dXJuXHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZXhwb3NlZERhdGFLZXkgb2YgZ2V0RXhwb3NlZEVkZ2VEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhc2V0UGFpcnMgPSBlZGdlRGF0YVtleHBvc2VkRGF0YUtleV0gaW5zdGFuY2VvZiBPYmplY3RcclxuICAgICAgICAgICAgICA/IE9iamVjdC5lbnRyaWVzKGVkZ2VEYXRhW2V4cG9zZWREYXRhS2V5XSlcclxuICAgICAgICAgICAgICA6IFtbZXhwb3NlZERhdGFLZXksIGVkZ2VEYXRhW2V4cG9zZWREYXRhS2V5XV1dXHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBkYXRhc2V0UGFpcnMpIHtcclxuICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgZWRnZS5wYXRoLmRpc3BsYXkuZGF0YXNldFtrZXldXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVkZ2UuZnJvbUxpbmVFbmQ/LmVsKSBkZWxldGUgZWRnZS5mcm9tTGluZUVuZC5lbC5kYXRhc2V0W2tleV1cclxuICAgICAgICAgICAgICAgIGlmIChlZGdlLnRvTGluZUVuZD8uZWwpIGRlbGV0ZSBlZGdlLnRvTGluZUVuZC5lbC5kYXRhc2V0W2tleV1cclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWRnZS5wYXRoLmRpc3BsYXkuZGF0YXNldFtrZXldID0gdmFsdWVcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZWRnZS5mcm9tTGluZUVuZD8uZWwpIGVkZ2UuZnJvbUxpbmVFbmQuZWwuZGF0YXNldFtrZXldID0gdmFsdWVcclxuICAgICAgICAgICAgICAgIGlmIChlZGdlLnRvTGluZUVuZD8uZWwpIGVkZ2UudG9MaW5lRW5kLmVsLmRhdGFzZXRba2V5XSA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyLCB7IEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwic3JjL3NldHRpbmdzXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuXHJcbmNvbnN0IEVYUE9TRURfU0VUVElOR1M6IChrZXlvZiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzKVtdID0gW1xyXG4gICdkaXNhYmxlRm9udFNpemVSZWxhdGl2ZVRvWm9vbScsXHJcbiAgJ2NvbGxhcHNpYmxlR3JvdXBzRmVhdHVyZUVuYWJsZWQnLFxyXG4gICdjb2xsYXBzZWRHcm91cFByZXZpZXdPbkRyYWcnLFxyXG5dXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXNXcmFwcGVyRXhwb3NlckV4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIFNldHRpbmdzTWFuYWdlci5TRVRUSU5HU19DSEFOR0VEX0VWRU5ULFxyXG4gICAgICAoKSA9PiB0aGlzLnVwZGF0ZUV4cG9zZWRTZXR0aW5ncyh0aGlzLnBsdWdpbi5nZXRDdXJyZW50Q2FudmFzKCkpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLnVwZGF0ZUV4cG9zZWRTZXR0aW5ncyhjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRHJhZ2dpbmdTdGF0ZUNoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgZHJhZ2dpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICBpZiAoZHJhZ2dpbmcpIGNhbnZhcy53cmFwcGVyRWwuZGF0YXNldC5pc0RyYWdnaW5nID0gJ3RydWUnXHJcbiAgICAgICAgZWxzZSBkZWxldGUgY2FudmFzLndyYXBwZXJFbC5kYXRhc2V0LmlzRHJhZ2dpbmdcclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlRXhwb3NlZFNldHRpbmdzKGNhbnZhczogQ2FudmFzIHwgbnVsbCkge1xyXG4gICAgaWYgKCFjYW52YXMpIHJldHVyblxyXG5cclxuICAgIGZvciAoY29uc3Qgc2V0dGluZyBvZiBFWFBPU0VEX1NFVFRJTkdTKSB7XHJcbiAgICAgIGNhbnZhcy53cmFwcGVyRWwuZGF0YXNldFtzZXR0aW5nXSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoc2V0dGluZykudG9TdHJpbmcoKVxyXG4gICAgfVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcInNyYy9tYWluXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pZ3JhdGlvbkhlbHBlciB7XHJcbiAgcHJpdmF0ZSBwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luXHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4pIHtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXHJcbiAgfVxyXG5cclxuICBhc3luYyBtaWdyYXRlKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5taWdyYXRlTm9kZUFuZEVkZ2VTdHlsZXMoKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBtaWdyYXRlTm9kZUFuZEVkZ2VTdHlsZXMoKTogdm9pZCB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4ge1xyXG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBjYW52YXMubm9kZXMudmFsdWVzKCkpIHtcclxuICAgICAgICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZS5nZXREYXRhKClcclxuXHJcbiAgICAgICAgICBjb25zdCBuZXdTdHlsZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVsbCB9ID0ge31cclxuXHJcbiAgICAgICAgICBpZiAobm9kZURhdGEuaXNTdGlja2VyKSBuZXdTdHlsZUF0dHJpYnV0ZXNbJ2JvcmRlciddID0gJ2ludmlzaWJsZSdcclxuICAgICAgICAgIGlmIChub2RlRGF0YS5ib3JkZXJTdHlsZSkgbmV3U3R5bGVBdHRyaWJ1dGVzWydib3JkZXInXSA9IG5vZGVEYXRhLmJvcmRlclN0eWxlXHJcbiAgICAgICAgICBpZiAobm9kZURhdGEuc2hhcGUpIHtcclxuICAgICAgICAgICAgbmV3U3R5bGVBdHRyaWJ1dGVzLnRleHRBbGlnbiA9ICdjZW50ZXInXHJcbiAgICAgICAgICAgIG5ld1N0eWxlQXR0cmlidXRlcy5zaGFwZSA9IG5vZGVEYXRhLnNoYXBlXHJcblxyXG4gICAgICAgICAgICBpZiAobmV3U3R5bGVBdHRyaWJ1dGVzPy5zaGFwZSA9PT0gJ2NlbnRlcmVkLXJlY3RhbmdsZScpIGRlbGV0ZSBuZXdTdHlsZUF0dHJpYnV0ZXMuc2hhcGVcclxuICAgICAgICAgICAgaWYgKG5ld1N0eWxlQXR0cmlidXRlcz8uc2hhcGUgPT09ICdvdmFsJykgbmV3U3R5bGVBdHRyaWJ1dGVzLnNoYXBlID0gJ3BpbGwnXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZGVsZXRlIG5vZGVEYXRhLmlzU3RpY2tlclxyXG4gICAgICAgICAgZGVsZXRlIG5vZGVEYXRhLmJvcmRlclN0eWxlXHJcbiAgICAgICAgICBkZWxldGUgbm9kZURhdGEuc2hhcGVcclxuXHJcbiAgICAgICAgICBub2RlLnNldERhdGEoe1xyXG4gICAgICAgICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgICAgICAgc3R5bGVBdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgLi4ubm9kZURhdGEuc3R5bGVBdHRyaWJ1dGVzLFxyXG4gICAgICAgICAgICAgIC4uLm5ld1N0eWxlQXR0cmlidXRlc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBlZGdlIG9mIGNhbnZhcy5lZGdlcy52YWx1ZXMoKSkge1xyXG4gICAgICAgICAgY29uc3QgZWRnZURhdGEgPSBlZGdlLmdldERhdGEoKVxyXG5cclxuICAgICAgICAgIGNvbnN0IG5ld1N0eWxlQXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudWxsIH0gPSB7fVxyXG5cclxuICAgICAgICAgIGlmIChlZGdlRGF0YS5lZGdlU3R5bGUpIG5ld1N0eWxlQXR0cmlidXRlcy5lZGdlID0gZWRnZURhdGEuZWRnZVN0eWxlXHJcbiAgICAgICAgICBpZiAoZWRnZURhdGEuZWRnZVBhdGhSb3V0ZSkgbmV3U3R5bGVBdHRyaWJ1dGVzLnBhdGhmaW5kaW5nTWV0aG9kID0gZWRnZURhdGEuZWRnZVBhdGhSb3V0ZVxyXG5cclxuICAgICAgICAgIGRlbGV0ZSBlZGdlRGF0YS5lZGdlU3R5bGVcclxuICAgICAgICAgIGRlbGV0ZSBlZGdlRGF0YS5lZGdlUGF0aFJvdXRlXHJcbiAgICAgICAgfVxyXG4g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QUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBLEVBQ0E7QUFBQSxJQUNFLFlBQVk7QUFBQSxJQUNaLE9BQU87QUFBQSxJQUNQLFdBQVcsQ0FBQyxNQUFNO0FBQUEsSUFDbEIsU0FBUztBQUFBLE1BQ1A7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBLEVBQ0E7QUFBQSxJQUNFLFlBQVk7QUFBQSxJQUNaLE9BQU87QUFBQSxJQUNQLFNBQVM7QUFBQSxNQUNQO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtB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QixJQUFJLGdCQUFnQixJQUFJO0FBQy9DLFVBQU0sS0FBSyxnQkFBZ0IsUUFBUTtBQUVuQyxnQkFBWSxTQUFTO0FBRXJCLFNBQUssV0FBVyxJQUFJLGdCQUFnQixJQUFJO0FBQ3hDLFVBQU0sS0FBSyxTQUFTLGFBQWE7QUFDakMsU0FBSyxTQUFTLGVBQWU7QUFFN0IsU0FBSyxpQkFBaUIsSUFBSSxlQUFlLElBQUk7QUFFN0MsU0FBSyxnQkFBZ0IsSUFBSSxjQUFjLElBQUk7QUFDM0MsU0FBSyxtQkFBbUIsa0JBQWtCLElBQUksQ0FBQyxjQUFtQixJQUFJLFVBQVUsSUFBSSxDQUFDO0FBQUEsRUFDeEY7QUFBQSxFQUVDLFdBQVc7QUFBQSxFQUFDO0FBQUEsRUFFWix1QkFBMEM7QUFDeEMsVUFBTSxhQUFhLEtBQUssSUFBSSxVQUFVLG9CQUFvQiwwQkFBUTtBQUNsRSxTQUFJLHlDQUFZLG1CQUFrQjtBQUFVLGFBQU87QUFDbkQsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLG1CQUFrQztBQXBHcEM7QUFxR0ksYUFBTyxVQUFLLHFCQUFxQixNQUExQixtQkFBNkIsV0FBVTtBQUFBLEVBQ2hEO0FBQUEsRUFFQSxtQkFBbUIsTUFBYyxTQUFpQjtBQXhHcEQ7QUF5R0ksVUFBTSxzQkFBcUIsVUFBSyxJQUFJLGdCQUFnQixRQUFRLGVBQWUsTUFBaEQsbUJBQW1EO0FBQzlFLFFBQUksQ0FBQztBQUFvQjtBQUV6Qix1QkFBbUIsU0FBUyxNQUFNLE9BQU87QUFBQSxFQUMzQztBQUFBO0FBQUEsRUFHQSxrQkFBa0I7QUFDaEIsUUFBSSxLQUFLO0FBQWE7QUFDdEIsU0FBSyxjQUFjLElBQUksWUFBWSxJQUFJO0FBQUEsRUFDekM7QUFDRjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgInJlc3VsdCIsICJ1cGRhdGUiLCAiZGF0YSIsICJjYW52YXNWaWV3IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAid2luZG93IiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJfYiIsICJsZWZ0UG9zaXRpb24iLCAicmlnaHRQb3NpdGlvbiIsICJjYW52YXMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImNhbnZhcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIm5vZGUiLCAiX2EiLCAiX2IiLCAibm9kZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgIl9iIiwgIkRJUkVDVElPTlMiXQp9Cg==
